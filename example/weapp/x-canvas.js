!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).XCanvas={})}(this,(function(t){"use strict";var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},e(t,o)};function o(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}var n=function(){return n=Object.assign||function(t){for(var e,o=arguments,n=1,r=arguments.length;n<r;n++)for(var i in e=o[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e,o,n){if("a"===o&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?n:"a"===o?n.call(t):n?n.value:e.get(t)}function i(t,e,o,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,o):r?r.value=o:e.set(t,o),o}var a=function(){},l=function(t){return"auto"===t},u=Array.isArray,d=function(t){var e=[];if(null!=t){var o=[],n=void 0,r=void 0;for(o.unshift(t);0!=o.length;)if(n=o.shift(),e.push(n),r=n.children,u(r))for(var i=0;i<r.length;i++)o.push(r[i])}return e},c=function(t){var e=[];return function t(o){0!==o.children.length&&o.children.forEach((function(e){t(e)})),e.push(o)}(t),e};var s,p=function(t,e){return 0},h=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,o){return new t(this.x+e,this.y+o)},t}(),f=function(t,e,o){return new h(t.x+(e.x-t.x)*o,t.y+(e.y-t.y)*o)},g=function(){function t(t,e,o,n){this.type=1,this.start=t,this.startControl=e,this.endControl=o,this.end=n}return t.prototype.subdivide=function(e,o){var n=f(this.start,this.startControl,e),r=f(this.startControl,this.endControl,e),i=f(this.endControl,this.end,e),a=f(n,r,e),l=f(r,i,e),u=f(a,l,e);return o?new t(this.start,n,a,u):new t(u,l,i,this.end)},t.prototype.add=function(e,o){return new t(this.start.add(e,o),this.startControl.add(e,o),this.endControl.add(e,o),this.end.add(e,o))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),b=function(t){return 1===t.type},m=function(t){return 17===t.type},y=function(t){return 20===t.type};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(s||(s={}));var B=function(t,e,o,n,r){var i=(Math.sqrt(2)-1)/3*4,a=o*i,l=n*i,u=t+o,d=e+n;switch(r){case s.TOP_LEFT:return new g(new h(t,d),new h(t,d-l),new h(u-a,e),new h(u,e));case s.TOP_RIGHT:return new g(new h(t,e),new h(t+a,e),new h(u,d-l),new h(u,d));case s.BOTTOM_RIGHT:return new g(new h(u,e),new h(u,e+l),new h(t+a,d),new h(t,d));case s.BOTTOM_LEFT:default:return new g(new h(u,d),new h(u-a,d),new h(t,e+l),new h(t,e))}};function x(t){this.paint(t.renderObject)}function w(t){var e=this;switch(t.type){case"block":this.paintBlock(t);break;case"inline-block":case"inline":this.paintInline(t);break;case"text":this.paintText(t)}t.hasChildNode()&&t.children.forEach((function(t){return e.paint(t)}))}function S(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()}function T(t,e){t.beginPath(),function(t,e){e.forEach((function(e,o){var n=b(e)?e.start:e;0===o?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),b(e)&&t.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))}(t,e),t.closePath()}function v(t,e){var o=e.element.getComputedStyles(),n=L(p(o.backgroundClip),e.curves);t.save(),T(t,n),t.clip(),o.backgroundColor&&"transparent"!==o.backgroundColor&&(t.fillStyle=o.backgroundColor,t.fill()),t.restore()}function R(t){v(this.ctx,t)}function O(t){v(this.ctx,t)}function C(t){var e=this.ctx,o=t.getTextStyles();e.textBaseline="ideographic",console.log("fontFamily",o.fontFamily,o.fontSize),e.font="normal ".concat(o.fontSize,"px ").concat(o.fontFamily||this.defaultFontFamily),e.fillStyle=o.color,t.textLines.lines.forEach((function(o){return e.fillText(o[0],o[1],o[2]+t.layoutBox.top)}))}var k,L=function(t,e){switch(t){case 0:return function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]}(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]}(e)}},P=!1,I=function(){P=!0},E=function(t){return P=!1,t},M=function(t,e,o){return function(n){return t()?(o&&o(),e(n)):n}};function _(t){return t instanceof j}(k={})[1]="TEXT",k[2]="CLASS",k[4]="STYLE",k[8]="PROPS",k[16]="FULL_PROPS",k[32]="HYDRATE_EVENTS",k[64]="STABLE_FRAGMENT",k[128]="KEYED_FRAGMENT",k[256]="UNKEYED_FRAGMENT",k[512]="NEED_PATCH",k[1024]="DYNAMIC_SLOTS",k[2048]="DEV_ROOT_FRAGMENT",k[-1]="HOISTED",k[-2]="BAIL";var j=function(){function t(t){this._children=t?t.children:[]}return Object.defineProperty(t.prototype,"children",{get:function(){return this._children},set:function(t){this._children=t},enumerable:!1,configurable:!0}),t.prototype.setParentNode=function(t){this._parentNode=t},t.prototype.getRootNode=function(){return z(this)},t.prototype.hasChildNode=function(){return!(!Array.isArray(this._children)||!this._children.length)},t.prototype.appendChildNode=function(t){if(!_(t))throw Error("Unknown treeNode type");var e=this,o=e._children[e._children.length-1]||null;o&&_(o)&&F(o,o.previousSibling,t),Array.isArray(e._children)&&e._children.push(t),t.setParentNode(e),F(t,o,null)},t.prototype.prependChildNode=function(t){if(!_(t))throw Error("Unknown treeNode type")},t.prototype.removeChildNode=function(t){if(!_(t))throw Error("Unknown treeNode type")},t}();function z(t){return t.parentNode?z(t.parentNode):t}function F(t,e,o){t.previousSibling=e,t.nextSibling=o}!function(t){function e(e,o){void 0===o&&(o={});var n=t.call(this)||this;return n.element=e,n.options=o,n}o(e,t),e.prototype.getContainer=function(){return this.parentNode},e.prototype.appendChild=function(t){console.log(this),this.appendChildNode(t)},e.prototype.flow=function(){this.layout(),this.curves=function(t){console.log("createBoundCurves",t);var e=t.element.getComputedStyles(),o=t.layoutBox;if(e){var n=(e.borderTopLeftRadius,o.width,o.height,[0,0]),r=n[0],i=n[1],a=(e.borderTopRightRadius,o.width,o.height,[0,0]),l=a[0],u=a[1],d=(e.borderBottomRightRadius,o.width,o.height,[0,0]),c=d[0],p=d[1],f=(e.borderBottomLeftRadius,o.width,o.height,[0,0]),g=f[0],b=f[1],m=[];m.push((r+l)/o.width),m.push((g+c)/o.width),m.push((i+b)/o.height),m.push((u+p)/o.height);var y=Math.max.apply(Math,m);y>1&&(r/=y,i/=y,l/=y,u/=y,c/=y,p/=y,g/=y,b/=y);var x=o.width-l,w=o.height-p,S=o.width-c,T=o.height-b,v=e.paddingTop,R=e.paddingRight,O=e.paddingBottom,C=e.paddingLeft,k={topWidth:x,rightHeight:w,bottomWidth:S,leftHeight:T,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,paddingTop:v,paddingRight:R,paddingBottom:O,paddingLeft:C,topLeftBorderDoubleOuterBox:null,topRightBorderDoubleOuterBox:null,bottomRightBorderDoubleOuterBox:null,bottomLeftBorderDoubleOuterBox:null,topLeftBorderDoubleInnerBox:null,topRightBorderDoubleInnerBox:null,bottomRightBorderDoubleInnerBox:null,bottomLeftBorderDoubleInnerBox:null,topLeftBorderStroke:null,topRightBorderStroke:null,bottomRightBorderStroke:null,bottomLeftBorderStroke:null,topLeftBorderBox:null,topRightBorderBox:null,bottomRightBorderBox:null,bottomLeftBorderBox:null,topLeftPaddingBox:null,topRightPaddingBox:null,bottomRightPaddingBox:null,bottomLeftPaddingBox:null,topLeftContentBox:null,topRightContentBox:null,bottomRightContentBox:null,bottomLeftContentBox:null};return k.topLeftBorderDoubleOuterBox=r>0||i>0?B(o.left+0,o.top+0,r-0,i-0,s.TOP_LEFT):new h(o.left+0,o.top+0),k.topRightBorderDoubleOuterBox=r>0||i>0?B(o.left+x,o.top+0,l-0,u-0,s.TOP_RIGHT):new h(o.left+o.width-0,o.top+0),k.bottomRightBorderDoubleOuterBox=c>0||p>0?B(o.left+S,o.top+w,c-0,p-0,s.BOTTOM_RIGHT):new h(o.left+o.width-0,o.top+o.height-0),k.bottomLeftBorderDoubleOuterBox=g>0||b>0?B(o.left+0,o.top+T,g-0,b-0,s.BOTTOM_LEFT):new h(o.left+0,o.top+o.height-0),k.topLeftBorderDoubleInnerBox=r>0||i>0?B(o.left+0,o.top+0,r-0,i-0,s.TOP_LEFT):new h(o.left+0,o.top+0),k.topRightBorderDoubleInnerBox=r>0||i>0?B(o.left+x,o.top+0,l-0,u-0,s.TOP_RIGHT):new h(o.left+o.width-0,o.top+0),k.bottomRightBorderDoubleInnerBox=c>0||p>0?B(o.left+S,o.top+w,c-0,p-0,s.BOTTOM_RIGHT):new h(o.left+o.width-0,o.top+o.height-0),k.bottomLeftBorderDoubleInnerBox=g>0||b>0?B(o.left+0,o.top+T,g-0,b-0,s.BOTTOM_LEFT):new h(o.left+0,o.top+o.height-0),k.topLeftBorderStroke=r>0||i>0?B(o.left+0,o.top+0,r-0,i-0,s.TOP_LEFT):new h(o.left+0,o.top+0),k.topRightBorderStroke=r>0||i>0?B(o.left+x,o.top+0,l-0,u-0,s.TOP_RIGHT):new h(o.left+o.width-0,o.top+0),k.bottomRightBorderStroke=c>0||p>0?B(o.left+S,o.top+w,c-0,p-0,s.BOTTOM_RIGHT):new h(o.left+o.width-0,o.top+o.height-0),k.bottomLeftBorderStroke=g>0||b>0?B(o.left+0,o.top+T,g-0,b-0,s.BOTTOM_LEFT):new h(o.left+0,o.top+o.height-0),k.topLeftBorderBox=r>0||i>0?B(o.left,o.top,r,i,s.TOP_LEFT):new h(o.left,o.top),k.topRightBorderBox=l>0||u>0?B(o.left+x,o.top,l,u,s.TOP_RIGHT):new h(o.left+o.width,o.top),k.bottomRightBorderBox=c>0||p>0?B(o.left+S,o.top+w,c,p,s.BOTTOM_RIGHT):new h(o.left+o.width,o.top+o.height),k.bottomLeftBorderBox=g>0||b>0?B(o.left,o.top+T,g,b,s.BOTTOM_LEFT):new h(o.left,o.top+o.height),k.topLeftPaddingBox=r>0||i>0?B(o.left+0,o.top+0,Math.max(0,r-0),Math.max(0,i-0),s.TOP_LEFT):new h(o.left+0,o.top+0),k.topRightPaddingBox=l>0||u>0?B(o.left+Math.min(x,o.width-0),o.top+0,x>o.width+0?0:Math.max(0,l-0),Math.max(0,u-0),s.TOP_RIGHT):new h(o.left+o.width-0,o.top+0),k.bottomRightPaddingBox=c>0||p>0?B(o.left+Math.min(S,o.width-0),o.top+Math.min(w,o.height-0),Math.max(0,c-0),Math.max(0,p-0),s.BOTTOM_RIGHT):new h(o.left+o.width-0,o.top+o.height-0),k.bottomLeftPaddingBox=g>0||b>0?B(o.left+0,o.top+Math.min(T,o.height-0),Math.max(0,g-0),Math.max(0,b-0),s.BOTTOM_LEFT):new h(o.left+0,o.top+o.height-0),k.topLeftContentBox=r>0||i>0?B(o.left+0+C,o.top+0+v,Math.max(0,r-(0+C)),Math.max(0,i-(0+v)),s.TOP_LEFT):new h(o.left+0+C,o.top+0+v),k.topRightContentBox=l>0||u>0?B(o.left+Math.min(x,o.width+0+C),o.top+0+v,x>o.width+0+C?0:l-0+C,u-(0+v),s.TOP_RIGHT):new h(o.left+o.width-(0+R),o.top+0+v),k.bottomRightContentBox=c>0||p>0?B(o.left+Math.min(S,o.width-(0+C)),o.top+Math.min(w,o.height+0+v),Math.max(0,c-(0+R)),p-(0+O),s.BOTTOM_RIGHT):new h(o.left+o.width-(0+R),o.top+o.height-(0+O)),k.bottomLeftContentBox=g>0||b>0?B(o.left+0+C,o.top+T,Math.max(0,g-(0+C)),b-(0+O),s.BOTTOM_LEFT):new h(o.left+0+C,o.top+o.height-(0+O)),k}}(this),this.children.forEach((function(t){return t.flow()}))},e.prototype.isRoot=function(){return null===this.parentNode},e.prototype.measureBoxSize=function(){},e.prototype.layout=function(){}}(j);var N={accentColor:"rgb(94, 158, 255)",additiveSymbols:"",alignContent:"normal",alignItems:"normal",alignSelf:"auto",alignmentBaseline:"auto",all:"",animation:"none 0s ease 0s 1 normal none running",animationComposition:"replace",animationDelay:"0s",animationDirection:"normal",animationDuration:"0s",animationFillMode:"none",animationIterationCount:"1",animationName:"none",animationPlayState:"running",animationTimingFunction:"ease",appRegion:"none",appearance:"none",ascentOverride:"",aspectRatio:"auto",backdropFilter:"none",backfaceVisibility:"visible",background:"rgba(0, 0, 0, 0) none repeat scroll 0% 0% / auto padding-box border-box",backgroundAttachment:"scroll",backgroundBlendMode:"normal",backgroundClip:"border-box",backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",backgroundOrigin:"padding-box",backgroundPosition:"0% 0%",backgroundPositionX:"0%",backgroundPositionY:"0%",backgroundRepeat:"repeat",backgroundRepeatX:"repeat",backgroundRepeatY:"repeat",backgroundSize:"auto",basePalette:"",baselineShift:"0",baselineSource:"auto",blockSize:"8066.71",border:"0 none rgb(255, 255, 255)",borderBlock:"0 none rgb(255, 255, 255)",borderBlockColor:"rgb(255, 255, 255)",borderBlockEnd:"0 none rgb(255, 255, 255)",borderBlockEndColor:"rgb(255, 255, 255)",borderBlockEndStyle:"none",borderBlockEndWidth:"0",borderBlockStart:"0 none rgb(255, 255, 255)",borderBlockStartColor:"rgb(255, 255, 255)",borderBlockStartStyle:"none",borderBlockStartWidth:"0",borderBlockStyle:"none",borderBlockWidth:"0",borderBottom:"0 none rgb(255, 255, 255)",borderBottomColor:"rgb(255, 255, 255)",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",borderBottomStyle:"none",borderBottomWidth:"0",borderCollapse:"separate",borderColor:"rgb(255, 255, 255)",borderEndEndRadius:"0",borderEndStartRadius:"0",borderImage:"none",borderImageOutset:"0",borderImageRepeat:"stretch",borderImageSlice:"100%",borderImageSource:"none",borderImageWidth:"1",borderInline:"0 none rgb(255, 255, 255)",borderInlineColor:"rgb(255, 255, 255)",borderInlineEnd:"0 none rgb(255, 255, 255)",borderInlineEndColor:"rgb(255, 255, 255)",borderInlineEndStyle:"none",borderInlineEndWidth:"0",borderInlineStart:"0 none rgb(255, 255, 255)",borderInlineStartColor:"rgb(255, 255, 255)",borderInlineStartStyle:"none",borderInlineStartWidth:"0",borderInlineStyle:"none",borderInlineWidth:"0",borderLeft:"0 none rgb(255, 255, 255)",borderLeftColor:"rgb(255, 255, 255)",borderLeftStyle:"none",borderLeftWidth:"0",borderRadius:"0",borderRight:"0 none rgb(255, 255, 255)",borderRightColor:"rgb(255, 255, 255)",borderRightStyle:"none",borderRightWidth:"0",borderSpacing:"0 0",borderStartEndRadius:"0",borderStartStartRadius:"0",borderStyle:"none",borderTop:"0 none rgb(255, 255, 255)",borderTopColor:"rgb(255, 255, 255)",borderTopLeftRadius:"0",borderTopRightRadius:"0",borderTopStyle:"none",borderTopWidth:"0",borderWidth:"0",bottom:"auto",boxShadow:"none",boxSizing:"content-box",breakAfter:"auto",breakBefore:"auto",breakInside:"auto",bufferedRendering:"auto",captionSide:"top",caretColor:"rgb(255, 255, 255)",clear:"none",clip:"auto",clipPath:"none",clipRule:"nonzero",color:"rgb(255, 255, 255)",colorInterpolation:"srgb",colorInterpolationFilters:"linearrgb",colorRendering:"auto",colorScheme:"dark",columnCount:"auto",columnFill:"balance",columnGap:"normal",columnRule:"0 none rgb(255, 255, 255)",columnRuleColor:"rgb(255, 255, 255)",columnRuleStyle:"none",columnRuleWidth:"0",columnSpan:"none",columnWidth:"auto",columns:"auto auto",contain:"none",containIntrinsicBlockSize:"none",containIntrinsicHeight:"none",containIntrinsicInlineSize:"none",containIntrinsicSize:"none",containIntrinsicWidth:"none",container:"none",containerName:"none",containerType:"normal",content:"normal",contentVisibility:"visible",counterIncrement:"none",counterReset:"none",counterSet:"none",cursor:"auto",cx:"0",cy:"0",d:"none",descentOverride:"",direction:"ltr",display:"block",dominantBaseline:"auto",emptyCells:"show",fallback:"",fill:"rgb(0, 0, 0)",fillOpacity:"1",fillRule:"nonzero",filter:"none",flex:"0 1 auto",flexBasis:"auto",flexDirection:"row",flexFlow:"row nowrap",flexGrow:"0",flexShrink:"1",flexWrap:"nowrap",float:"none",floodColor:"rgb(0, 0, 0)",floodOpacity:"1",font:'20 / 35 Inter, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontDisplay:"",fontFamily:'Inter, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontFeatureSettings:"normal",fontKerning:"auto",fontOpticalSizing:"auto",fontPalette:"normal",fontSize:"20",fontStretch:"100%",fontStyle:"normal",fontSynthesis:"weight style small-caps",fontSynthesisSmallCaps:"auto",fontSynthesisStyle:"auto",fontSynthesisWeight:"auto",fontVariant:"normal",fontVariantAlternates:"normal",fontVariantCaps:"normal",fontVariantEastAsian:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",fontVariationSettings:"normal",fontWeight:"400",forcedColorAdjust:"auto",gap:"normal",grid:"none / none / none / row / auto / auto",gridArea:"auto / auto / auto / auto",gridAutoColumns:"auto",gridAutoFlow:"row",gridAutoRows:"auto",gridColumn:"auto / auto",gridColumnEnd:"auto",gridColumnGap:"normal",gridColumnStart:"auto",gridGap:"normal normal",gridRow:"auto / auto",gridRowEnd:"auto",gridRowGap:"normal",gridRowStart:"auto",gridTemplate:"none / none / none",gridTemplateAreas:"none",gridTemplateColumns:"none",gridTemplateRows:"none",height:"100%",hyphenateCharacter:"auto",hyphenateLimitChars:"auto",hyphens:"manual",imageOrientation:"from-image",imageRendering:"auto",inherits:"",initialLetter:"normal",initialValue:"",inlineSize:"484",inset:"auto",insetBlock:"auto",insetBlockEnd:"auto",insetBlockStart:"auto",insetInline:"auto",insetInlineEnd:"auto",insetInlineStart:"auto",isolation:"auto",justifyContent:"normal",justifyItems:"normal",justifySelf:"auto",left:"auto",letterSpacing:"normal",lightingColor:"rgb(255, 255, 255)",lineBreak:"auto",lineGapOverride:"",lineHeight:"35",listStyle:"outside none disc",listStyleImage:"none",listStylePosition:"outside",listStyleType:"disc",margin:"0",marginBlock:"0",marginBlockEnd:"0",marginBlockStart:"0",marginBottom:"0",marginInline:"0",marginInlineEnd:"0",marginInlineStart:"0",marginLeft:"0",marginRight:"0",marginTop:"0",marker:"none",markerEnd:"none",markerMid:"none",markerStart:"none",mask:"none",maskType:"luminance",mathDepth:"0",mathShift:"normal",mathStyle:"normal",maxBlockSize:"none",maxHeight:"none",maxInlineSize:"none",maxWidth:"none",minBlockSize:"0",minHeight:"0",minInlineSize:"0",minWidth:"0",mixBlendMode:"normal",negative:"",objectFit:"fill",objectPosition:"50% 50%",objectViewBox:"none",offset:"none 0 auto 0deg",offsetDistance:"0",offsetPath:"none",offsetRotate:"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"rgb(255, 255, 255) none 0",outlineColor:"rgb(255, 255, 255)",outlineOffset:"0",outlineStyle:"none",outlineWidth:"0",overflow:"visible",overflowAnchor:"auto",overflowClipMargin:"0",overflowWrap:"normal",overflowX:"visible",overflowY:"visible",overrideColors:"",overscrollBehavior:"auto",overscrollBehaviorBlock:"auto",overscrollBehaviorInline:"auto",overscrollBehaviorX:"auto",overscrollBehaviorY:"auto",pad:"",padding:"0",paddingBlock:"0",paddingBlockEnd:"0",paddingBlockStart:"0",paddingBottom:"0",paddingInline:"0",paddingInlineEnd:"0",paddingInlineStart:"0",paddingLeft:"0",paddingRight:"0",paddingTop:"0",page:"auto",pageBreakAfter:"auto",pageBreakBefore:"auto",pageBreakInside:"auto",pageOrientation:"",paintOrder:"normal",perspective:"none",perspectiveOrigin:"242 4033.36",placeContent:"normal",placeItems:"normal",placeSelf:"auto",pointerEvents:"auto",position:"static",prefix:"",quotes:"auto",r:"0",range:"",resize:"none",right:"auto",rotate:"none",rowGap:"normal",rubyPosition:"over",rx:"auto",ry:"auto",scale:"none",scrollBehavior:"auto",scrollMargin:"0",scrollMarginBlock:"0",scrollMarginBlockEnd:"0",scrollMarginBlockStart:"0",scrollMarginBottom:"0",scrollMarginInline:"0",scrollMarginInlineEnd:"0",scrollMarginInlineStart:"0",scrollMarginLeft:"0",scrollMarginRight:"0",scrollMarginTop:"0",scrollPadding:"auto",scrollPaddingBlock:"auto",scrollPaddingBlockEnd:"auto",scrollPaddingBlockStart:"auto",scrollPaddingBottom:"auto",scrollPaddingInline:"auto",scrollPaddingInlineEnd:"auto",scrollPaddingInlineStart:"auto",scrollPaddingLeft:"auto",scrollPaddingRight:"auto",scrollPaddingTop:"auto",scrollSnapAlign:"none",scrollSnapStop:"normal",scrollSnapType:"none",scrollbarGutter:"auto",shapeImageThreshold:"0",shapeMargin:"0",shapeOutside:"none",shapeRendering:"auto",size:"",sizeAdjust:"",speak:"normal",speakAs:"",src:"",stopColor:"rgb(0, 0, 0)",stopOpacity:"1",stroke:"none",strokeDasharray:"none",strokeDashoffset:"0",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeOpacity:"1",strokeWidth:"1",suffix:"",symbols:"",syntax:"",system:"",tabSize:"8",tableLayout:"auto",textAlign:"start",textAlignLast:"auto",textAnchor:"start",textCombineUpright:"none",textDecoration:"none solid rgb(255, 255, 255)",textDecorationColor:"rgb(255, 255, 255)",textDecorationLine:"none",textDecorationSkipInk:"auto",textDecorationStyle:"solid",textDecorationThickness:"auto",textEmphasis:"none rgb(255, 255, 255)",textEmphasisColor:"rgb(255, 255, 255)",textEmphasisPosition:"over",textEmphasisStyle:"none",textIndent:"0",textOrientation:"mixed",textOverflow:"clip",textRendering:"optimizespeed",textShadow:"none",textSizeAdjust:"auto",textTransform:"none",textUnderlineOffset:"auto",textUnderlinePosition:"auto",top:"auto",touchAction:"auto",transform:"none",transformBox:"view-box",transformOrigin:"242 4033.36",transformStyle:"flat",transition:"all 0s ease 0s",transitionDelay:"0s",transitionDuration:"0s",transitionProperty:"all",transitionTimingFunction:"ease",translate:"none",unicodeBidi:"normal",unicodeRange:"",userSelect:"auto",vectorEffect:"none",verticalAlign:"baseline",viewTransitionName:"none",visibility:"visible",whiteSpace:"normal",widows:"2",width:"100%",willChange:"auto",wordBreak:"normal",wordSpacing:"0",wordWrap:"normal",writingMode:"horizontal-tb",x:"0",y:"0",zIndex:"auto",zoom:"1",cssFloat:"none",cssText:"",length:351,parentRule:null},W={display:"block"},A={display:"inline"},D=["alignItems","color","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","textAlign","visivility","wordSpacing"],H={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t){return t.map((function(t){if(y(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},V={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},G=function(t){return{name:"border-".concat(t,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},U=G("top"),Y=G("right"),X=G("bottom"),K=G("left"),q={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},J={name:"display",initialValue:function(t){return"text"===t?"inline":"block"},prefix:!1,type:1,parse:function(t){return t.filter(y).reduce((function(t,e){return t|Q(e.value)}),0)}},Q=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Z={name:"font-size",initialValue:"12",prefix:!1,type:3,format:"length"},$={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t){return m(t)?t.number:y(t)&&"bold"===t.value?700:400}},tt={name:"height",initialValue:"auto",prefix:!1,type:4},et={name:"line-height",initialValue:"normal",prefix:!1,type:4},ot=function(t){return{name:"margin-".concat(t),initialValue:"0",prefix:!1,type:4}},nt=ot("top"),rt=ot("right"),it=ot("bottom"),at=ot("left"),lt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t){return m(t)?t.number:1}},ut=function(t){return{name:"padding-".concat(t),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dt=ut("top"),ct=ut("right"),st=ut("bottom"),pt=ut("left"),ht={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},ft={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var e=gt[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'.concat(t.name,'"'));return e(t.values)}return null}},gt={matrix:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),o=e[0],n=e[1];e[2],e[3];var r=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],l=e[13];return e[14],e[15],16===e.length?[o,n,r,i,a,l]:null}},bt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}},mt={name:"width",initialValue:"auto",prefix:!1,type:4},yt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t){if(20===t.type)return{auto:!0,order:0};if(m(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}};function Bt(t,e){var o=function(t){if("text"===t)return A;return W}(t);return n(n({},o),{backgroundClip:xt(t,H,e.backgroundClip),backgroundColor:xt(t,V,e.backgroundColor),borderTopColor:xt(t,U,e.borderTopColor),borderRightColor:xt(t,Y,e.borderRightColor),borderBottomColor:xt(t,X,e.borderBottomColor),borderLeftColor:xt(t,K,e.borderLeftColor),borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,color:xt(t,q,e.color),display:xt(t,J,e.display),fontSize:Number(xt(t,Z,e.fontSize)),fontWeight:xt(t,$,e.fontWeight),height:xt(t,tt,e.height),lineHeight:xt(t,et,e.lineHeight),marginTop:Number(xt(t,nt,e.marginTop)),marginRight:Number(xt(t,rt,e.marginRight)),marginBottom:Number(xt(t,it,e.marginBottom)),marginLeft:Number(xt(t,at,e.marginLeft)),opacity:xt(t,lt,e.opacity),paddingTop:Number(xt(t,dt,e.paddingTop)),paddingRight:Number(xt(t,ct,e.paddingRight)),paddingBottom:Number(xt(t,st,e.paddingBottom)),paddingLeft:Number(xt(t,pt,e.paddingLeft)),textAlign:xt(t,ht,e.textAlign),transform:xt(t,ft,e.transform),visibility:xt(t,bt,e.visibility),width:xt(t,mt,e.width),zIndex:xt(t,yt,e.zIndex)})}var xt=function(t,e,o){return null!=o?o.toString():"string"==typeof e.initialValue?e.initialValue:e.initialValue(t)};var wt=function(t){function e(e){var o=t.call(this)||this;return o._computedStyles={width:0,height:0},o.isBody=!1,o.text=e,o}return o(e,t),e.prototype.getContainer=function(){return this._parentNode},e.prototype.getComputedStyles=function(){return this._computedStyles},e.prototype.attach=function(t){},e}(j);function St(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),{x:t,y:e,setX:function(t){this.x=t},setY:function(t){this.y=t}}}function Tt(t){return St(t.x+t.width/2,t.y+t.height/2)}var vt,Rt,Ot=function(t){function e(e){var o=t.call(this)||this;return o.element=e,o}return o(e,t),e.prototype.getStyles=function(){return this.element.getComputedStyles()},e.prototype.appendChild=function(e){t.prototype.appendChildNode.call(this,e)},e}(j),Ct=function(t){function e(e){var o=t.call(this,e)||this;return o.offsetLeft=0,o.offsetTop=0,o.offsetWidth=0,o.offsetHeight=0,o}return o(e,t),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return t.prototype.getStyles.call(this).paddingTop||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return t.prototype.getStyles.call(this).paddingBottom||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return t.prototype.getStyles.call(this).paddingLeft||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return t.prototype.getStyles.call(this).paddingRight||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBefore",{get:function(){return this.physicalPaddingToLogical().before()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingAfter",{get:function(){return this.physicalPaddingToLogical().after()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingEnd",{get:function(){return this.physicalPaddingToLogical().end()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderTop",{get:function(){return t.prototype.getStyles.call(this).borderTopWidth||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderBottom",{get:function(){return t.prototype.getStyles.call(this).borderBottomWidth||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderLeft",{get:function(){return t.prototype.getStyles.call(this).borderLeftWidth||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderRight",{get:function(){return t.prototype.getStyles.call(this).borderRightWidth||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderBefore",{get:function(){return this.physicalBorderToLogical().before()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderAfter",{get:function(){return this.physicalBorderToLogical().after()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderStart",{get:function(){return this.physicalBorderToLogical().start()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderEnd",{get:function(){return this.physicalBorderToLogical().end()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderWidth",{get:function(){return this.borderLeft+this.borderRight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderHeight",{get:function(){return this.borderTop+this.borderBottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderBoxOutsets",{get:function(){var t=this;return{borderTop:t.borderTop,borderRight:t.borderRight,borderBottom:t.borderBottom,borderLeft:t.borderLeft}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingOutsets",{get:function(){var t=this;return{paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,paddingLeft:t.paddingLeft}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"marginTop",{get:function(){return t.prototype.getStyles.call(this).marginTop},enumerable:!1,configurable:!0}),e.prototype.physicalPaddingToLogical=function(){return{before:function(){return 0},after:function(){return 0},end:function(){return 0}}},e.prototype.physicalBorderToLogical=function(){return{before:function(){return 0},after:function(){return 0},start:function(){return 0},end:function(){return 0}}},e.prototype.physicalMarginToLogical=function(){return{before:function(){return 0},after:function(){return 0},start:function(){return 0},end:function(){return 0},lineLeft:function(){return 0}}},e}(Ot),kt=function(t){function e(e){var o,n,r=t.call(this,e)||this;return r.size={width:0,height:0,setWidth:function(t){this.width=t},setHeight:function(t){this.height=t}},r.location=St(),r.rect=(o=r.size,n=r.location,{location:o,size:n,get x(){return o.x},get y(){return o.y},getCenter:Tt}),r}return o(e,t),e.prototype.setWidth=function(t){t!==this.size.width&&this.size.setWidth(t)},e.prototype.setHeight=function(t){t!==this.size.height&&this.size.setHeight(t)},e.prototype.setX=function(t){t!==this.location.x&&this.location.setX(t)},e.prototype.setY=function(t){t!==this.location.y&&this.location.setY(t)},e.prototype.updateSize=function(){var t=Lt(this);console.log("updateSize",t,this),this.size.setWidth(t.width),this.size.setHeight(t.height)},e}(Ct),Lt=function(t){return function(){for(var t=arguments,e=[],o=0;o<arguments.length;o++)e[o]=t[o];return function(t){return e.reduce((function(e,o){return P?E(t):o(e)}),t)}}(Pt(t.element),M((function(){return t.element.isBody}),It(t.element),I),M((function(){return!t.hasChildNode()}),a,I),M((function(){return l(t.getStyles().width)}),Et(t)),M((function(){return l(t.getStyles().height)}),Mt(t)))({width:0,height:0,setWidth:function(t){this.width=t},setHeight:function(t){this.height=t}})},Pt=function(t){return function(e){return console.log(t.getComputedStyles()),e.setWidth(Number(t.getComputedStyles().width)),e.setHeight(Number(t.getComputedStyles().height)),e}},It=function(t){return function(e){return e.setWidth(t.getContext().viewport.width),e.setHeight(t.getContext().viewport.height),e}},Et=function(t){return function(e){return e.width=t.children.reduce((function(t,e){return console.log(e.size.width),Number(e.size.width)>t?Number(e.size.width):t}),0),e}},Mt=function(t){return function(e){return e.height=t.children.reduce((function(t,e){return t+Number(e.size.height)}),0),e}},_t=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.updateLayout=function(){},e.prototype.mergeInlineChild=function(){},e}(kt),jt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Ct),zt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(kt),Ft=function(t){function e(e){var o=t.call(this,e)||this;return o.element=e,o}return o(e,t),e}(Ot);function Nt(t){if("body"===t.type)return new _t(t);if(t instanceof wt)return new Ft(t);switch(t.getComputedStyles().display){case"block":default:return new _t(t);case"inline":return new jt(t);case"inline-block":return new zt(t)}}var Wt=function(t){function e(e,o,r,a){void 0===r&&(r={});var l,u=t.call(this)||this;return vt.set(u,void 0),Rt.set(u,void 0),u.type=o,u.id=r.id||null,u.options=r,a&&(u.children=a),u.computedStyles=(l=u,console.log(" = {}",l.isBody),l.isBody?Bt(l.type,N):Bt(l.type,l.styles)),i(u,vt,e,"f"),"body"===o&&(u.computedStyles.width=e.viewport.width,u.computedStyles.height=e.viewport.height,i(u,Rt,n(n({},u.computedStyles),{fontFamily:e.renderer.defaultFontFamily}),"f"),u.initLayoutObject()),function(t){if(o=t.children,"string"==typeof o){var e=new wt(t.children);t.children=[e],e.setParentNode(t),e.attach(t)}var o}(u),u}return o(e,t),Object.defineProperty(e.prototype,"styles",{get:function(){return this.options.style||{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBody",{get:function(){return"body"===this.type},enumerable:!1,configurable:!0}),e.prototype.attach=function(t){var e=this;this.getLayoutObject()||this.initLayoutObject(),t.layoutObject.appendChild(this.layoutObject),this.hasChildren()&&this.childNodes.forEach((function(t){t.attach(e)}))},e.prototype.appendChild=function(e){t.prototype.appendChildNode.call(this,e);var o=this.getRootElement();o&&"body"===o.type&&(e.attach(this),r(o,vt,"f").flow(this))},e.prototype.computeStyles=function(){var t=this;this.getContainer()&&(D.forEach((function(e){var o=t.getContainerStyle(e);o&&(t.getComputedStyles()[e]=o)})),Object.freeze(this.getComputedStyles())),this.hasChildren()&&this.children.forEach((function(t){t.computeStyles()}))},e.prototype.hasChildren=function(){return this.hasChildNode()},e.prototype.getRootElement=function(){return this.getRootNode()},e.prototype.getContainerStyle=function(t){var e=this.getContainer();if(e)return"transparent"===this.getComputedStyles()[t]?e.getComputedStyles()[t]:e.getContainerStyle(t)},e.prototype.getContainer=function(){return this.parentNode},e.prototype.getContext=function(){return r(this,vt,"f")},e.prototype.isVisible=function(){return!0},e.prototype.initLayoutObject=function(){this.layoutObject=Nt(this)},e.prototype.getLayoutObject=function(){return this.layoutObject},e.prototype.getComputedStyles=function(){return this.computedStyles},e.prototype.setComputedStyles=function(t,e){var o;this.computedStyles=n(n({},this.computedStyles),((o={})[t]=e,o)),Object.freeze(this.computeStyles)},e}(j);vt=new WeakMap,Rt=new WeakMap,t.createDoCanvas=function(t){console.log("createDoCanvas",t);var e,o={},n=function(t){return{canvas:t.canvas,ctx:t.ctx,dpr:t.dpr||1,defaultFontFamily:t.defaultFontFamily,root:null,render:x,paint:w,paintBlock:R,paintInline:O,paintText:C,mask:S}}(t),r=function(t,e){var o={renderer:t,viewport:{width:e.width,height:e.height},rootRenderObject:null,DFSRenderArray:[],updateDFSRenderArray:function(t){o.DFSRenderArray=c(t)},measureBoxSize:function(t){o.updateDFSRenderArray(t.renderObject),o.DFSRenderArray.forEach((function(t){t.measureBoxSize()}))},flow:function(t){return console.log(d(t.layoutObject)),void d(t.layoutObject).reverse().forEach((function(t){return t.updateSize&&t.updateSize()}))},reflow:function(t){console.log("reflow",t),t.computeStyles(),t.renderObject.flow(),"body"===t.getRootElement().type&&n(t)},paint:function(e){console.log("paint",e),e?t.paint(e.renderObject):t.paint(o.rootRenderObject)},repaint:n};function n(e){console.log("repaint",e),e?t.paint(e.renderObject):t.paint(o.rootRenderObject)}return t.engine=o,o}(n,t),i=(e=r,function(t,o,n){return void 0===o&&(o={}),new Wt(e,t,o,n)});return(o={body:null,engine:r,renderer:n,createElement:i,createTextNode:function(t){return new wt(t)}}).body=i("body"),o}}));
//# sourceMappingURL=x-canvas.js.map
