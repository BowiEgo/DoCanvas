!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).XCanvas={})}(this,(function(e){"use strict";var n={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},t=function(e){return{name:"border-".concat(e,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},r=t("top"),i=t("right"),o=t("bottom"),a=t("left"),u=function(e){return 17===e.type},l=function(e){return 20===e.type},c=function(e){return{name:"border-".concat(e,"-width"),initialValue:"0",type:0,prefix:!1,parse:function(e){return function(e){return 15===e.type}(e)?e.number:0}}},d=c("top"),f=c("right"),p=c("bottom"),s=c("left"),b={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},h={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e){return e.filter(l).reduce((function(e,n){return e|g(n.value)}),0)}},g=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},m={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},y={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e){return u(e)?e.number:l(e)&&"bold"===e.value?700:400}},v={name:"line-height",initialValue:"normal",prefix:!1,type:4},x=function(e){return{name:"margin-".concat(e),initialValue:"0",prefix:!1,type:4}},S=x("top"),C=x("right"),E=x("bottom"),_=x("left"),R={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e){return u(e)?e.number:1}},T=function(e){return{name:"padding-".concat(e),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},w=T("top"),O=T("right"),j=T("bottom"),V=T("left"),A={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},L={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var n=P[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'.concat(e.name,'"'));return n(e.values)}return null}},P={matrix:function(e){var n=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===n.length?n:null},matrix3d:function(e){var n=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),t=n[0],r=n[1];n[2],n[3];var i=n[4],o=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var a=n[12],u=n[13];return n[14],n[15],16===n.length?[t,r,i,o,a,u]:null}},N={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},k={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e){if(20===e.type)return{auto:!0,order:0};if(u(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}};var B=function(e,n){return null!=n?n.toString():e.initialValue};function W(e){return!!e&&!0===e.__v_isTreeNode}function D(e){var n={__v_isTreeNode:!0,_children:e.children||[],parent:null,prev:null,next:null,instance:e.instance||null,set children(e){n._children=e},get children(){return n._children||[]},get root(){return t(this)},hasChildren:function(){return!(!Array.isArray(n._children)||!n._children.length)},appendChild:function(e){if(!W(e))throw Error("Unknown treeNode type");var t=n._children[n._children.length-1]||null;t&&W(t)&&z(t,t.prev,e);Array.isArray(n._children)&&n._children.push(e),function(e,n){e.parent=n}(e,n),z(e,t,null)},prependChild:function(e){if(!W(e))throw Error("Unknown treeNode type")},removeChild:function(e){if(!W(e))throw Error("Unknown treeNode type")},append:function(){},prepend:function(){},remove:function(){}};function t(e){return e.parent?t(e.parent):e}return n}function z(e,n,t){e.prev=n,e.next=t}function I(e,t){void 0===t&&(t={});var u={__v_isRenderObject:!0,options:t,root:null,container:null,nextSibling:null,prevSibling:null,children:[],element:e,node:null,renderStyle:c(e),createRenderStyle:c,updateRenderStyle:function(){},layout:function(){},reflow:function(){},appendChild:function(e){l.appendChild(e.node)}},l=D({instance:u});function c(e){var t,u=(t=e.styles,console.log("CSSSSSSSS",t),{backgroundColor:B(n,t.backgroundColor),borderTopColor:B(r,t.borderTopColor),borderRightColor:B(i,t.borderRightColor),borderBottomColor:B(o,t.borderBottomColor),borderLeftColor:B(a,t.borderLeftColor),borderTopWidth:B(d,t.borderTopWidth),borderRightWidth:B(f,t.borderRightWidth),borderBottomWidth:B(p,t.borderBottomWidth),borderLeftWidth:B(s,t.borderLeftWidth),color:B(b,t.color),display:B(h,t.display),fontSize:B(m,t.fontSize),fontWeight:B(y,t.fontWeight),lineHeight:B(v,t.lineHeight),marginTop:B(S,t.marginTop),marginRight:B(C,t.marginRight),marginBottom:B(E,t.marginBottom),marginLeft:B(_,t.marginLeft),opacity:B(R,t.opacity),paddingTop:B(w,t.paddingTop),paddingRight:B(O,t.paddingRight),paddingBottom:B(j,t.paddingBottom),paddingLeft:B(V,t.paddingLeft),textAlign:B(A,t.textAlign),transform:B(L,t.transform),visibility:B(N,t.visibility),zIndex:B(k,t.zIndex)});return console.log("renderStyle",e,e.styles,u),u}return u.node=l,Object.defineProperty(u,"root",{get:function(){return l.root.instance}}),Object.defineProperty(u,"container",{get:function(){return l.parent?l.parent.instance:null}}),Object.defineProperty(u,"prevSibling",{get:function(){return l.prev?l.prev.instance:null}}),Object.defineProperty(u,"nextSibling",{get:function(){return l.next?l.next.instance:null}}),Object.defineProperty(u,"children",{get:function(){return l.children.map((function(e){return e.instance}))}}),u}function F(e){return{canvas:e.canvas,ctx:e.ctx,dpr:e.dpr||1,render:function(){}}}var H,M=function(e){return"string"==typeof e};function U(e){return function(n,t,r){return void 0===t&&(t={}),function(e,n,t,r){void 0===t&&(t={});var i={__v_isCanvasElement:!0,type:n,options:t,styles:t.style||{},context:e,root:null,container:null,nextSibling:null,prevSibling:null,children:[],node:null,renderObject:null,debugColor:null,appendChild:function(e){o.appendChild(e.node),i.hasRootElement()&&e.attach(i)},hasChildren:function(){return i.node.hasChildren()},attach:function(e){e.renderObject.appendChild(i.renderObject),i.hasChildren()&&i.children.forEach((function(e){e.attach(i)}))},hasRootElement:function(){return o.root&&o.root.instance&&"body"===o.root.instance.type},getRootElement:function(){return i.hasRootElement()?o.root.instance:null},isVisible:function(){return!0}},o=D({instance:i});i.node=o;var a=I(i);return i.renderObject=a,Object.defineProperty(i,"root",{get:function(){return o.root.instance}}),Object.defineProperty(i,"container",{get:function(){return o.parent?o.parent.instance:null}}),Object.defineProperty(i,"prevSibling",{get:function(){return o.prev?o.prev.instance:null}}),Object.defineProperty(i,"nextSibling",{get:function(){return o.next?o.next.instance:null}}),Object.defineProperty(i,"children",{get:function(){return M(r)?r:o.children.map((function(e){return e.instance}))}}),"body"===i.type&&(i.styles={width:"100%",height:"100%"}),i}(e,n,t,r)}}(H={})[1]="TEXT",H[2]="CLASS",H[4]="STYLE",H[8]="PROPS",H[16]="FULL_PROPS",H[32]="HYDRATE_EVENTS",H[64]="STABLE_FRAGMENT",H[128]="KEYED_FRAGMENT",H[256]="UNKEYED_FRAGMENT",H[512]="NEED_PATCH",H[1024]="DYNAMIC_SLOTS",H[2048]="DEV_ROOT_FRAGMENT",H[-1]="HOISTED",H[-2]="BAIL",e.createDoCanvas=function(e){var n=function(){var e={rootRenderObject:null,createRoot:function(n){e.createRenderTree(n)},createRenderTree:function(n){e.rootRenderObject=I(n)}};return e}(),t=U(n),r={body:null,engine:n,renderer:F(e),createElement:t};return r.body=t("body"),n.createRoot(r.body),r.renderer.render(),r}}));
//# sourceMappingURL=x-canvas.js.map
