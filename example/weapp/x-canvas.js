!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).XCanvas={})}(this,(function(t){"use strict";var e=function(){return e=Object.assign||function(t){for(var e,n=arguments,o=1,r=arguments.length;o<r;o++)for(var i in e=n[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)},n={accentColor:"rgb(94, 158, 255)",additiveSymbols:"",alignContent:"normal",alignItems:"normal",alignSelf:"auto",alignmentBaseline:"auto",all:"",animation:"none 0s ease 0s 1 normal none running",animationComposition:"replace",animationDelay:"0s",animationDirection:"normal",animationDuration:"0s",animationFillMode:"none",animationIterationCount:"1",animationName:"none",animationPlayState:"running",animationTimingFunction:"ease",appRegion:"none",appearance:"none",ascentOverride:"",aspectRatio:"auto",backdropFilter:"none",backfaceVisibility:"visible",background:"rgba(0, 0, 0, 0) none repeat scroll 0% 0% / auto padding-box border-box",backgroundAttachment:"scroll",backgroundBlendMode:"normal",backgroundClip:"border-box",backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"none",backgroundOrigin:"padding-box",backgroundPosition:"0% 0%",backgroundPositionX:"0%",backgroundPositionY:"0%",backgroundRepeat:"repeat",backgroundRepeatX:"repeat",backgroundRepeatY:"repeat",backgroundSize:"auto",basePalette:"",baselineShift:"0",baselineSource:"auto",blockSize:"8066.71",border:"0 none rgb(255, 255, 255)",borderBlock:"0 none rgb(255, 255, 255)",borderBlockColor:"rgb(255, 255, 255)",borderBlockEnd:"0 none rgb(255, 255, 255)",borderBlockEndColor:"rgb(255, 255, 255)",borderBlockEndStyle:"none",borderBlockEndWidth:"0",borderBlockStart:"0 none rgb(255, 255, 255)",borderBlockStartColor:"rgb(255, 255, 255)",borderBlockStartStyle:"none",borderBlockStartWidth:"0",borderBlockStyle:"none",borderBlockWidth:"0",borderBottom:"0 none rgb(255, 255, 255)",borderBottomColor:"rgb(255, 255, 255)",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",borderBottomStyle:"none",borderBottomWidth:"0",borderCollapse:"separate",borderColor:"rgb(255, 255, 255)",borderEndEndRadius:"0",borderEndStartRadius:"0",borderImage:"none",borderImageOutset:"0",borderImageRepeat:"stretch",borderImageSlice:"100%",borderImageSource:"none",borderImageWidth:"1",borderInline:"0 none rgb(255, 255, 255)",borderInlineColor:"rgb(255, 255, 255)",borderInlineEnd:"0 none rgb(255, 255, 255)",borderInlineEndColor:"rgb(255, 255, 255)",borderInlineEndStyle:"none",borderInlineEndWidth:"0",borderInlineStart:"0 none rgb(255, 255, 255)",borderInlineStartColor:"rgb(255, 255, 255)",borderInlineStartStyle:"none",borderInlineStartWidth:"0",borderInlineStyle:"none",borderInlineWidth:"0",borderLeft:"0 none rgb(255, 255, 255)",borderLeftColor:"rgb(255, 255, 255)",borderLeftStyle:"none",borderLeftWidth:"0",borderRadius:"0",borderRight:"0 none rgb(255, 255, 255)",borderRightColor:"rgb(255, 255, 255)",borderRightStyle:"none",borderRightWidth:"0",borderSpacing:"0 0",borderStartEndRadius:"0",borderStartStartRadius:"0",borderStyle:"none",borderTop:"0 none rgb(255, 255, 255)",borderTopColor:"rgb(255, 255, 255)",borderTopLeftRadius:"0",borderTopRightRadius:"0",borderTopStyle:"none",borderTopWidth:"0",borderWidth:"0",bottom:"auto",boxShadow:"none",boxSizing:"content-box",breakAfter:"auto",breakBefore:"auto",breakInside:"auto",bufferedRendering:"auto",captionSide:"top",caretColor:"rgb(255, 255, 255)",clear:"none",clip:"auto",clipPath:"none",clipRule:"nonzero",color:"rgb(255, 255, 255)",colorInterpolation:"srgb",colorInterpolationFilters:"linearrgb",colorRendering:"auto",colorScheme:"dark",columnCount:"auto",columnFill:"balance",columnGap:"normal",columnRule:"0 none rgb(255, 255, 255)",columnRuleColor:"rgb(255, 255, 255)",columnRuleStyle:"none",columnRuleWidth:"0",columnSpan:"none",columnWidth:"auto",columns:"auto auto",contain:"none",containIntrinsicBlockSize:"none",containIntrinsicHeight:"none",containIntrinsicInlineSize:"none",containIntrinsicSize:"none",containIntrinsicWidth:"none",container:"none",containerName:"none",containerType:"normal",content:"normal",contentVisibility:"visible",counterIncrement:"none",counterReset:"none",counterSet:"none",cursor:"auto",cx:"0",cy:"0",d:"none",descentOverride:"",direction:"ltr",display:"block",dominantBaseline:"auto",emptyCells:"show",fallback:"",fill:"rgb(0, 0, 0)",fillOpacity:"1",fillRule:"nonzero",filter:"none",flex:"0 1 auto",flexBasis:"auto",flexDirection:"row",flexFlow:"row nowrap",flexGrow:"0",flexShrink:"1",flexWrap:"nowrap",float:"none",floodColor:"rgb(0, 0, 0)",floodOpacity:"1",font:'20 / 35 Inter, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontDisplay:"",fontFamily:'Inter, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontFeatureSettings:"normal",fontKerning:"auto",fontOpticalSizing:"auto",fontPalette:"normal",fontSize:"20",fontStretch:"100%",fontStyle:"normal",fontSynthesis:"weight style small-caps",fontSynthesisSmallCaps:"auto",fontSynthesisStyle:"auto",fontSynthesisWeight:"auto",fontVariant:"normal",fontVariantAlternates:"normal",fontVariantCaps:"normal",fontVariantEastAsian:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",fontVariationSettings:"normal",fontWeight:"400",forcedColorAdjust:"auto",gap:"normal",grid:"none / none / none / row / auto / auto",gridArea:"auto / auto / auto / auto",gridAutoColumns:"auto",gridAutoFlow:"row",gridAutoRows:"auto",gridColumn:"auto / auto",gridColumnEnd:"auto",gridColumnGap:"normal",gridColumnStart:"auto",gridGap:"normal normal",gridRow:"auto / auto",gridRowEnd:"auto",gridRowGap:"normal",gridRowStart:"auto",gridTemplate:"none / none / none",gridTemplateAreas:"none",gridTemplateColumns:"none",gridTemplateRows:"none",height:"100%",hyphenateCharacter:"auto",hyphenateLimitChars:"auto",hyphens:"manual",imageOrientation:"from-image",imageRendering:"auto",inherits:"",initialLetter:"normal",initialValue:"",inlineSize:"484",inset:"auto",insetBlock:"auto",insetBlockEnd:"auto",insetBlockStart:"auto",insetInline:"auto",insetInlineEnd:"auto",insetInlineStart:"auto",isolation:"auto",justifyContent:"normal",justifyItems:"normal",justifySelf:"auto",left:"auto",letterSpacing:"normal",lightingColor:"rgb(255, 255, 255)",lineBreak:"auto",lineGapOverride:"",lineHeight:"35",listStyle:"outside none disc",listStyleImage:"none",listStylePosition:"outside",listStyleType:"disc",margin:"0",marginBlock:"0",marginBlockEnd:"0",marginBlockStart:"0",marginBottom:"0",marginInline:"0",marginInlineEnd:"0",marginInlineStart:"0",marginLeft:"0",marginRight:"0",marginTop:"0",marker:"none",markerEnd:"none",markerMid:"none",markerStart:"none",mask:"none",maskType:"luminance",mathDepth:"0",mathShift:"normal",mathStyle:"normal",maxBlockSize:"none",maxHeight:"none",maxInlineSize:"none",maxWidth:"none",minBlockSize:"0",minHeight:"0",minInlineSize:"0",minWidth:"0",mixBlendMode:"normal",negative:"",objectFit:"fill",objectPosition:"50% 50%",objectViewBox:"none",offset:"none 0 auto 0deg",offsetDistance:"0",offsetPath:"none",offsetRotate:"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"rgb(255, 255, 255) none 0",outlineColor:"rgb(255, 255, 255)",outlineOffset:"0",outlineStyle:"none",outlineWidth:"0",overflow:"visible",overflowAnchor:"auto",overflowClipMargin:"0",overflowWrap:"normal",overflowX:"visible",overflowY:"visible",overrideColors:"",overscrollBehavior:"auto",overscrollBehaviorBlock:"auto",overscrollBehaviorInline:"auto",overscrollBehaviorX:"auto",overscrollBehaviorY:"auto",pad:"",padding:"0",paddingBlock:"0",paddingBlockEnd:"0",paddingBlockStart:"0",paddingBottom:"0",paddingInline:"0",paddingInlineEnd:"0",paddingInlineStart:"0",paddingLeft:"0",paddingRight:"0",paddingTop:"0",page:"auto",pageBreakAfter:"auto",pageBreakBefore:"auto",pageBreakInside:"auto",pageOrientation:"",paintOrder:"normal",perspective:"none",perspectiveOrigin:"242 4033.36",placeContent:"normal",placeItems:"normal",placeSelf:"auto",pointerEvents:"auto",position:"static",prefix:"",quotes:"auto",r:"0",range:"",resize:"none",right:"auto",rotate:"none",rowGap:"normal",rubyPosition:"over",rx:"auto",ry:"auto",scale:"none",scrollBehavior:"auto",scrollMargin:"0",scrollMarginBlock:"0",scrollMarginBlockEnd:"0",scrollMarginBlockStart:"0",scrollMarginBottom:"0",scrollMarginInline:"0",scrollMarginInlineEnd:"0",scrollMarginInlineStart:"0",scrollMarginLeft:"0",scrollMarginRight:"0",scrollMarginTop:"0",scrollPadding:"auto",scrollPaddingBlock:"auto",scrollPaddingBlockEnd:"auto",scrollPaddingBlockStart:"auto",scrollPaddingBottom:"auto",scrollPaddingInline:"auto",scrollPaddingInlineEnd:"auto",scrollPaddingInlineStart:"auto",scrollPaddingLeft:"auto",scrollPaddingRight:"auto",scrollPaddingTop:"auto",scrollSnapAlign:"none",scrollSnapStop:"normal",scrollSnapType:"none",scrollbarGutter:"auto",shapeImageThreshold:"0",shapeMargin:"0",shapeOutside:"none",shapeRendering:"auto",size:"",sizeAdjust:"",speak:"normal",speakAs:"",src:"",stopColor:"rgb(0, 0, 0)",stopOpacity:"1",stroke:"none",strokeDasharray:"none",strokeDashoffset:"0",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeOpacity:"1",strokeWidth:"1",suffix:"",symbols:"",syntax:"",system:"",tabSize:"8",tableLayout:"auto",textAlign:"start",textAlignLast:"auto",textAnchor:"start",textCombineUpright:"none",textDecoration:"none solid rgb(255, 255, 255)",textDecorationColor:"rgb(255, 255, 255)",textDecorationLine:"none",textDecorationSkipInk:"auto",textDecorationStyle:"solid",textDecorationThickness:"auto",textEmphasis:"none rgb(255, 255, 255)",textEmphasisColor:"rgb(255, 255, 255)",textEmphasisPosition:"over",textEmphasisStyle:"none",textIndent:"0",textOrientation:"mixed",textOverflow:"clip",textRendering:"optimizespeed",textShadow:"none",textSizeAdjust:"auto",textTransform:"none",textUnderlineOffset:"auto",textUnderlinePosition:"auto",top:"auto",touchAction:"auto",transform:"none",transformBox:"view-box",transformOrigin:"242 4033.36",transformStyle:"flat",transition:"all 0s ease 0s",transitionDelay:"0s",transitionDuration:"0s",transitionProperty:"all",transitionTimingFunction:"ease",translate:"none",unicodeBidi:"normal",unicodeRange:"",userSelect:"auto",vectorEffect:"none",verticalAlign:"baseline",viewTransitionName:"none",visibility:"visible",whiteSpace:"normal",widows:"2",width:"100%",willChange:"auto",wordBreak:"normal",wordSpacing:"0",wordWrap:"normal",writingMode:"horizontal-tb",x:"0",y:"0",zIndex:"auto",zoom:"1",cssFloat:"none",cssText:"",length:351,parentRule:null},o={display:"block"},r={display:"inline-block"},i=["alignItems","color","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","textAlign","visivility","wordSpacing"],a=function(t){return 17===t.type},l=function(t){return 20===t.type},u={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t){return t.map((function(t){if(l(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},d={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},c=function(t){return{name:"border-".concat(t,"-color"),initialValue:"transparent",prefix:!1,type:3,format:"color"}},s=c("top"),p=c("right"),h=c("bottom"),f=c("left"),g={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},m={name:"display",initialValue:function(t){return"text"===t?"inline-block":"block"},prefix:!1,type:1,parse:function(t){return t.filter(l).reduce((function(t,e){return t|b(e.value)}),0)}},b=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},y={name:"font-size",initialValue:"12",prefix:!1,type:3,format:"length"},x={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t){return a(t)?t.number:l(t)&&"bold"===t.value?700:400}},B={name:"height",initialValue:"auto",prefix:!1,type:4},S=function(t,e,n){return[0,0]},w={name:"line-height",initialValue:"normal",prefix:!1,type:4},T=function(t){return{name:"margin-".concat(t),initialValue:"0",prefix:!1,type:4}},v=T("top"),R=T("right"),C=T("bottom"),O=T("left"),k={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t){return a(t)?t.number:1}},L=function(t){return{name:"padding-".concat(t),initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},I=L("top"),E=L("right"),P=L("bottom"),_=L("left"),M={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},N={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var e=W[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'.concat(t.name,'"'));return e(t.values)}return null}},W={matrix:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),n=e[0],o=e[1];e[2],e[3];var r=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],l=e[13];return e[14],e[15],16===e.length?[n,o,r,i,a,l]:null}},D={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}},j={name:"width",initialValue:"auto",prefix:!1,type:4},z={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t){if(20===t.type)return{auto:!0,order:0};if(a(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}};function F(t,n){console.log("CSSSSSSSS",t);var i=function(t){if("text"===t)return r;return o}(t);return e(e({},i),{backgroundClip:A(t,u,n.backgroundClip),backgroundColor:A(t,d,n.backgroundColor),borderTopColor:A(t,s,n.borderTopColor),borderRightColor:A(t,p,n.borderRightColor),borderBottomColor:A(t,h,n.borderBottomColor),borderLeftColor:A(t,f,n.borderLeftColor),borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,color:A(t,g,n.color),display:A(t,m,n.display),fontSize:Number(A(t,y,n.fontSize)),fontWeight:A(t,x,n.fontWeight),height:A(t,B,n.height),lineHeight:A(t,w,n.lineHeight),marginTop:Number(A(t,v,n.marginTop)),marginRight:Number(A(t,R,n.marginRight)),marginBottom:Number(A(t,C,n.marginBottom)),marginLeft:Number(A(t,O,n.marginLeft)),opacity:A(t,k,n.opacity),paddingTop:Number(A(t,I,n.paddingTop)),paddingRight:Number(A(t,E,n.paddingRight)),paddingBottom:Number(A(t,P,n.paddingBottom)),paddingLeft:Number(A(t,_,n.paddingLeft)),textAlign:A(t,M,n.textAlign),transform:A(t,N,n.transform),visibility:A(t,D,n.visibility),width:A(t,j,n.width),zIndex:A(t,z,n.zIndex)})}var A=function(t,e,n){return null!=n?n.toString():"string"==typeof e.initialValue?e.initialValue:e.initialValue(t)};function H(t){return!!t&&!0===t.__v_isTreeNode}function V(t){var e={__v_isTreeNode:!0,_children:t.children||[],parent:null,prev:null,next:null,instance:t.instance||null,set children(t){e._children=t},get children(){return e._children||[]},get root(){return n(this)},hasChildren:function(){return!(!Array.isArray(e._children)||!e._children.length)},appendChild:function(t){if(!H(t))throw Error("Unknown treeNode type");var n=e._children[e._children.length-1]||null;n&&H(n)&&G(n,n.prev,t);Array.isArray(e._children)&&e._children.push(t),function(t,e){t.parent=e}(t,e),G(t,n,null)},prependChild:function(t){if(!H(t))throw Error("Unknown treeNode type")},removeChild:function(t){if(!H(t))throw Error("Unknown treeNode type")},append:function(){},prepend:function(){},remove:function(){}};function n(t){return t.parent?n(t.parent):t}return e.instance&&(e.instance.node=e),e}function G(t,e,n){t.prev=e,t.next=n}var U,Y=function(){},X=function(t){return"auto"===t},K=function(t){return"string"==typeof t};(U={})[1]="TEXT",U[2]="CLASS",U[4]="STYLE",U[8]="PROPS",U[16]="FULL_PROPS",U[32]="HYDRATE_EVENTS",U[64]="STABLE_FRAGMENT",U[128]="KEYED_FRAGMENT",U[256]="UNKEYED_FRAGMENT",U[512]="NEED_PATCH",U[1024]="DYNAMIC_SLOTS",U[2048]="DEV_ROOT_FRAGMENT",U[-1]="HOISTED",U[-2]="BAIL";var q,J=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Q=function(t,e,n){return new J(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Z=function(){function t(t,e,n,o){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=o}return t.prototype.subdivide=function(e,n){var o=Q(this.start,this.startControl,e),r=Q(this.startControl,this.endControl,e),i=Q(this.endControl,this.end,e),a=Q(o,r,e),l=Q(r,i,e),u=Q(a,l,e);return n?new t(this.start,o,a,u):new t(u,l,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),$=function(t){return 1===t.type};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(q||(q={}));var tt=function(t,e,n,o,r){var i=(Math.sqrt(2)-1)/3*4,a=n*i,l=o*i,u=t+n,d=e+o;switch(r){case q.TOP_LEFT:return new Z(new J(t,d),new J(t,d-l),new J(u-a,e),new J(u,e));case q.TOP_RIGHT:return new Z(new J(t,e),new J(t+a,e),new J(u,d-l),new J(u,d));case q.BOTTOM_RIGHT:return new Z(new J(u,e),new J(u,e+l),new J(t+a,d),new J(t,d));case q.BOTTOM_LEFT:default:return new Z(new J(u,d),new J(u-a,d),new J(t,e+l),new J(t,e))}};function et(t,e,n,o,r){var i={__v_isLayoutBox:!0,node:null,parent:null,top:e,left:n,width:o,height:r,appendChild:function(t){a.appendChild(t.node)},setTop:function(t){i.top=t},setLeft:function(t){i.left=t},setWidth:function(t){i.width=t},setHeight:function(t){i.height=t}},a=V({instance:i});return t&&t.appendChild(i),Object.defineProperty(i,"parent",{get:function(){return a.parent?a.parent.instance:null}}),Object.defineProperty(i,"bottom",{get:function(){return i.top+i.height}}),Object.defineProperty(i,"right",{get:function(){return i.left+i.width}}),i}function nt(t,o){void 0===o&&(o={});var r={__v_isRenderObject:!0,type:"block",options:o,root:null,parent:null,nextSibling:null,prevSibling:null,children:[],element:t,node:null,renderStyles:{},computedStyles:{},viewport:null,layoutBox:null,curves:null,createRenderStyles:l,updateRenderStyles:function(){},computeStyles:function(){r.measureBoxSize(),r.parent&&i.forEach((function(t){var e=u(r,t);e&&(r.computedStyles[t]=e)}));r.hasChildren()&&r.children.forEach((function(t){"text"!==t.type&&t.computeStyles()}));console.log("4444-computeStyles",r.element,r.computedStyles)},measureBoxSize:Y,layout:Y,flow:function(){r.layout(),r.curves=function(t){var e=t.computedStyles,n=t.layoutBox,o=S(e.borderTopLeftRadius,n.width,n.height),r=o[0],i=o[1],a=S(e.borderTopRightRadius,n.width,n.height),l=a[0],u=a[1],d=S(e.borderBottomRightRadius,n.width,n.height),c=d[0],s=d[1],p=S(e.borderBottomLeftRadius,n.width,n.height),h=p[0],f=p[1],g=[];g.push((r+l)/n.width),g.push((h+c)/n.width),g.push((i+f)/n.height),g.push((u+s)/n.height);var m=Math.max.apply(Math,g);m>1&&(r/=m,i/=m,l/=m,u/=m,c/=m,s/=m,h/=m,f/=m);var b=n.width-l,y=n.height-s,x=n.width-c,B=n.height-f,w=e.paddingTop,T=e.paddingRight,v=e.paddingBottom,R=e.paddingLeft;console.log("4444-createBoundCurves",e,n,w);var C={topWidth:b,rightHeight:y,bottomWidth:x,leftHeight:B,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,paddingTop:w,paddingRight:T,paddingBottom:v,paddingLeft:R,topLeftBorderDoubleOuterBox:null,topRightBorderDoubleOuterBox:null,bottomRightBorderDoubleOuterBox:null,bottomLeftBorderDoubleOuterBox:null,topLeftBorderDoubleInnerBox:null,topRightBorderDoubleInnerBox:null,bottomRightBorderDoubleInnerBox:null,bottomLeftBorderDoubleInnerBox:null,topLeftBorderStroke:null,topRightBorderStroke:null,bottomRightBorderStroke:null,bottomLeftBorderStroke:null,topLeftBorderBox:null,topRightBorderBox:null,bottomRightBorderBox:null,bottomLeftBorderBox:null,topLeftPaddingBox:null,topRightPaddingBox:null,bottomRightPaddingBox:null,bottomLeftPaddingBox:null,topLeftContentBox:null,topRightContentBox:null,bottomRightContentBox:null,bottomLeftContentBox:null};return C.topLeftBorderDoubleOuterBox=r>0||i>0?tt(n.left+0,n.top+0,r-0,i-0,q.TOP_LEFT):new J(n.left+0,n.top+0),C.topRightBorderDoubleOuterBox=r>0||i>0?tt(n.left+b,n.top+0,l-0,u-0,q.TOP_RIGHT):new J(n.left+n.width-0,n.top+0),C.bottomRightBorderDoubleOuterBox=c>0||s>0?tt(n.left+x,n.top+y,c-0,s-0,q.BOTTOM_RIGHT):new J(n.left+n.width-0,n.top+n.height-0),C.bottomLeftBorderDoubleOuterBox=h>0||f>0?tt(n.left+0,n.top+B,h-0,f-0,q.BOTTOM_LEFT):new J(n.left+0,n.top+n.height-0),C.topLeftBorderDoubleInnerBox=r>0||i>0?tt(n.left+0,n.top+0,r-0,i-0,q.TOP_LEFT):new J(n.left+0,n.top+0),C.topRightBorderDoubleInnerBox=r>0||i>0?tt(n.left+b,n.top+0,l-0,u-0,q.TOP_RIGHT):new J(n.left+n.width-0,n.top+0),C.bottomRightBorderDoubleInnerBox=c>0||s>0?tt(n.left+x,n.top+y,c-0,s-0,q.BOTTOM_RIGHT):new J(n.left+n.width-0,n.top+n.height-0),C.bottomLeftBorderDoubleInnerBox=h>0||f>0?tt(n.left+0,n.top+B,h-0,f-0,q.BOTTOM_LEFT):new J(n.left+0,n.top+n.height-0),C.topLeftBorderStroke=r>0||i>0?tt(n.left+0,n.top+0,r-0,i-0,q.TOP_LEFT):new J(n.left+0,n.top+0),C.topRightBorderStroke=r>0||i>0?tt(n.left+b,n.top+0,l-0,u-0,q.TOP_RIGHT):new J(n.left+n.width-0,n.top+0),C.bottomRightBorderStroke=c>0||s>0?tt(n.left+x,n.top+y,c-0,s-0,q.BOTTOM_RIGHT):new J(n.left+n.width-0,n.top+n.height-0),C.bottomLeftBorderStroke=h>0||f>0?tt(n.left+0,n.top+B,h-0,f-0,q.BOTTOM_LEFT):new J(n.left+0,n.top+n.height-0),C.topLeftBorderBox=r>0||i>0?tt(n.left,n.top,r,i,q.TOP_LEFT):new J(n.left,n.top),C.topRightBorderBox=l>0||u>0?tt(n.left+b,n.top,l,u,q.TOP_RIGHT):new J(n.left+n.width,n.top),C.bottomRightBorderBox=c>0||s>0?tt(n.left+x,n.top+y,c,s,q.BOTTOM_RIGHT):new J(n.left+n.width,n.top+n.height),C.bottomLeftBorderBox=h>0||f>0?tt(n.left,n.top+B,h,f,q.BOTTOM_LEFT):new J(n.left,n.top+n.height),C.topLeftPaddingBox=r>0||i>0?tt(n.left+0,n.top+0,Math.max(0,r-0),Math.max(0,i-0),q.TOP_LEFT):new J(n.left+0,n.top+0),C.topRightPaddingBox=l>0||u>0?tt(n.left+Math.min(b,n.width-0),n.top+0,b>n.width+0?0:Math.max(0,l-0),Math.max(0,u-0),q.TOP_RIGHT):new J(n.left+n.width-0,n.top+0),C.bottomRightPaddingBox=c>0||s>0?tt(n.left+Math.min(x,n.width-0),n.top+Math.min(y,n.height-0),Math.max(0,c-0),Math.max(0,s-0),q.BOTTOM_RIGHT):new J(n.left+n.width-0,n.top+n.height-0),C.bottomLeftPaddingBox=h>0||f>0?tt(n.left+0,n.top+Math.min(B,n.height-0),Math.max(0,h-0),Math.max(0,f-0),q.BOTTOM_LEFT):new J(n.left+0,n.top+n.height-0),C.topLeftContentBox=r>0||i>0?tt(n.left+0+R,n.top+0+w,Math.max(0,r-(0+R)),Math.max(0,i-(0+w)),q.TOP_LEFT):new J(n.left+0+R,n.top+0+w),C.topRightContentBox=l>0||u>0?tt(n.left+Math.min(b,n.width+0+R),n.top+0+w,b>n.width+0+R?0:l-0+R,u-(0+w),q.TOP_RIGHT):new J(n.left+n.width-(0+T),n.top+0+w),C.bottomRightContentBox=c>0||s>0?tt(n.left+Math.min(x,n.width-(0+R)),n.top+Math.min(y,n.height+0+w),Math.max(0,c-(0+T)),s-(0+v),q.BOTTOM_RIGHT):new J(n.left+n.width-(0+T),n.top+n.height-(0+v)),C.bottomLeftContentBox=h>0||f>0?tt(n.left+0+R,n.top+B,Math.max(0,h-(0+R)),f-(0+v),q.BOTTOM_LEFT):new J(n.left+0+R,n.top+n.height-(0+v)),console.log("boundCurves",C),C}(r),console.log("4444-flow",r,r.curves,r.children),r.children.forEach((function(t){return t.flow()}))},reflow:function(){},appendChild:function(t){a.appendChild(t.node)},isRoot:function(){return null===r.parent},hasChildren:function(){return console.log("4444",r.node.hasChildren()),r.node.hasChildren()}},a=V({instance:r});function l(t){return"body"===t.type?F(t.type,n):F(t.type,t.styles)}function u(t,e){if(t.parent)return"transparent"===t.computedStyles[e]?t.parent.computedStyles[e]:u(t.parent,e)}if(r.node=a,Object.defineProperty(r,"root",{get:function(){return a.root.instance}}),Object.defineProperty(r,"parent",{get:function(){return a.parent?a.parent.instance:null}}),Object.defineProperty(r,"prevSibling",{get:function(){return a.prev?a.prev.instance:null}}),Object.defineProperty(r,"nextSibling",{get:function(){return a.next?a.next.instance:null}}),Object.defineProperty(r,"children",{get:function(){return a.children.map((function(t){return t.instance}))}}),K(t))return function(t){return t.type="text",t.layout=function(){var e=t.computedStyles,n=e.width,o=e.height,r=t.parent.layoutBox;if(t.layoutBox){var i=r.top,a=r.left;t.layoutBox.setTop(i),t.layoutBox.setLeft(a),t.layoutBox.setWidth(n),t.layoutBox.setHeight(o)}else t.layoutBox=et(r,0,0,100,18);console.log("3333layout-text",t.element,t.layoutBox,r.width)},t.measureBoxSize=function(){console.log("measureBoxSize-text");var e=t.parent.layoutBox,n=t.parent.element.context.renderer.ctx;n.save(),n.font="300 ".concat(t.getTextStyles().fontSize,"px PingFang SC");var o=function(t,e,n,o,r,i){for(var a=e.split(" "),l="",u="",d=[],c=0,s=0;s<a.length;s++){u+="".concat(a[s].trim()," ");var p=c=t.measureText(u).width;p>r&&s>0?(p>c&&(c=p),d.push([l,n,o]),o+=i,l="".concat(a[s]," "),u="".concat(a[s]," ")):l+="".concat(a[s]," "),s===a.length-1&&d.push([l,n,o])}return{lines:d,maxLineWidth:c,outerHeight:d[d.length-1][2]}}(n,t.element,0,16,e.width,t.getTextStyles().lineHeight||23);n.restore(),t.textLines=o,console.log("textLines",o),t.computedStyles.width=o.maxLineWidth,t.computedStyles.height=o.outerHeight},t.getTextStyles=function(){var e=t.parent.computedStyles;return{color:e.color,fontSize:e.fontSize,fontWeight:e.fontWeight}},t.textLines=[],console.log("3333toRenderText",t),t}(r);r.renderStyles=l(t),r.computedStyles=e({},r.renderStyles);var d=r.renderStyles.display;return t.renderObject=r,"inline-block"===d?function(t){return t.type="inline",t.layout=function(){var e=t.computedStyles,n=e.borderTopWidth,o=e.borderBottomWidth,r=e.borderLeftWidth,i=e.borderRightWidth,a=e.paddingTop,l=e.paddingBottom,u=e.paddingLeft,d=e.paddingRight,c=e.width,s=e.height,p=t.parent.layoutBox;if(t.layoutBox){t.prevSibling&&t.prevSibling.layoutBox;var h=p.top,f=p.left,g=Number(r)+Number(u)+Number(c)+Number(d)+Number(i),m=Number(n)+Number(a)+Number(s)+Number(l)+Number(o);t.layoutBox.setTop(h),t.layoutBox.setLeft(f),t.layoutBox.setWidth(g),t.layoutBox.setHeight(m)}else t.layoutBox=et(p,0,0,200,18);console.log("3333layout-inline",t.element.type,t.layoutBox)},t.measureBoxSize=function(){var e=t.parent.layoutBox;t.layoutBox||(t.layoutBox=et(e,0,0,200,18)),t.children[0].measureBoxSize(),console.log("3333-measureBoxSize-line",t,t.children),t.hasChildren()&&(t.computedStyles.width=t.children.reduce((function(t,e){return t+Number(e.computedStyles.width)}),0),t.computedStyles.height=t.children.reduce((function(t,e){return t+Number(e.computedStyles.height)}),0)),t.parent.measureBoxSize()},t}(r):function(t){return t.type="block",t.layout=function(){var e=t.computedStyles,n=e.borderTopWidth,o=e.borderBottomWidth,r=e.borderLeftWidth,i=e.borderRightWidth,a=e.paddingTop,l=e.paddingBottom,u=e.paddingLeft,d=e.paddingRight,c=e.width,s=e.height;if(t.isRoot())t.layoutBox||(t.layoutBox=et(null,0,0,t.viewport.width,t.viewport.height));else{var p=t.parent.layoutBox,h=t.prevSibling?t.prevSibling.layoutBox:null,f=p.top+(h?h.bottom:0),g=p.left,m=Number(r)+Number(u)+Number(c)+Number(d)+Number(i),b=Number(n)+Number(a)+Number(s)+Number(l)+Number(o);t.layoutBox?(t.layoutBox.setTop(f),t.layoutBox.setLeft(g),t.layoutBox.setWidth(m),t.layoutBox.setHeight(b)):t.layoutBox=et(p,f,g,m,b)}},t.measureBoxSize=function(){var e=t.renderStyles,n=e.width,o=e.height;t.isRoot()&&(t.computedStyles.width=t.viewport.width,t.computedStyles.height=t.viewport.height),t.hasChildren()?(X(n)&&(t.children.length>1?t.computedStyles.width=t.children.reduce((function(t,e){return t+Number(e.computedStyles.width)}),0):t.computedStyles.width=Number(t.children[0].computedStyles.width)),X(o)&&(t.children.length>1?t.computedStyles.height=t.children.reduce((function(t,e){return Number(e.computedStyles.height),0})):t.computedStyles.height=Number(t.children[0].computedStyles.height))):(X(n)&&(t.computedStyles.width=0),X(o)&&(t.computedStyles.height=0))},t}(r)}var ot=function(t){var e=[];return function t(n){0!==n.children.length&&n.children.forEach((function(e){t(e)})),e.push(n)}(t),e};var rt=function(t,e){return 0};function it(t){var e={canvas:t.canvas,ctx:t.ctx,dpr:t.dpr||1,root:null,paint:function t(n){switch(n.type){case"block":!function(t){console.log("4444-renderBlock",t),o(t)}(n);break;case"inline":!function(t){console.log("4444-renderInline",t),o(t)}(n);break;case"text":!function(t){var n=e.ctx,o=t.getTextStyles();console.log("4444-renderText",t,o),n.font="300 ".concat(o.fontSize,"px PingFang SC"),n.fillStyle=o.color,t.textLines.lines.forEach((function(t){return n.fillText(t[0],t[1],t[2])}))}(n)}n.hasChildren()&&(console.log("4444-paint",n.children),n.children.forEach((function(e){return t(e)})))},render:function(t){e.paint(t.renderObject)},mask:function(t){e.ctx.beginPath(),e.ctx.moveTo(0,0),e.ctx.lineTo(e.canvas.width,0),e.ctx.lineTo(e.canvas.width,e.canvas.height),e.ctx.lineTo(0,e.canvas.height),e.ctx.lineTo(0,0),e.formatPath(t.slice(0).reverse()),e.ctx.closePath()},path:n,formatPath:function(t){t.forEach((function(t,n){var o=$(t)?t.start:t;0===n?e.ctx.moveTo(o.x,o.y):e.ctx.lineTo(o.x,o.y),$(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))}};function n(t){e.ctx.beginPath(),e.formatPath(t),e.ctx.closePath()}function o(t){var o=e.ctx,r=t.computedStyles,i=at(rt(r.backgroundClip),t.curves);console.log("4444-backgroundPaintingArea",i),o.save(),n(i),o.clip(),console.log("6666666",r.backgroundColor),r.backgroundColor&&"transparent"!==r.backgroundColor&&(o.fillStyle=r.backgroundColor,o.fill()),o.restore()}return e}var at=function(t,e){switch(t){case 0:return function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]}(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]}(e)}},lt=function(t){return function(e,n,o){return void 0===n&&(n={}),function(t,e,n,o){void 0===n&&(n={});var r={__v_isCanvasElement:!0,type:e,options:n,styles:n.style||{},context:t,root:null,container:null,nextSibling:null,prevSibling:null,children:[],node:null,renderObject:null,debugColor:null,appendChild:function(t){i.appendChild(t.node),r.hasRootElement()&&(console.log("11111appendChild"),t.attach(r),r.context.flow(r))},hasChildren:function(){return r.node.hasChildren()||K(r.children)},attach:function(t){t.renderObject.appendChild(r.renderObject),r.hasChildren()&&(K(r.children)?r.renderObject.appendChild(nt(r.children)):r.children.forEach((function(t){t.attach(r)})))},hasRootElement:function(){return i.root&&i.root.instance&&"body"===i.root.instance.type},getRootElement:function(){return r.hasRootElement()?i.root.instance:null},isVisible:function(){return!0}},i=V({instance:r});return Object.defineProperty(r,"root",{get:function(){return i.root.instance}}),Object.defineProperty(r,"container",{get:function(){return i.parent?i.parent.instance:null}}),Object.defineProperty(r,"prevSibling",{get:function(){return i.prev?i.prev.instance:null}}),Object.defineProperty(r,"nextSibling",{get:function(){return i.next?i.next.instance:null}}),Object.defineProperty(r,"children",{get:function(){return K(o)?o:i.children.map((function(t){return t.instance}))}}),"body"===r.type&&(r.styles={width:"100%",height:"100%"}),nt(r),r}(t,e,n,o)}};t.createDoCanvas=function(t){var e={},n=it(t),o=function(t,e){var n={renderer:t,viewport:{width:e.width,height:e.height},rootRenderObject:null,DFSRenderArray:[],createRoot:function(t){n.createRenderTree(t),n.createLayoutTree(),n.measureLayout(t)},createRenderTree:function(t){n.rootRenderObject=nt(t),n.rootRenderObject.viewport=n.viewport},createLayoutTree:function(){n.rootRenderObject.flow()},updateDFSRenderArray:function(t){n.DFSRenderArray=ot(t)},measureLayout:function(t){n.updateDFSRenderArray(t.renderObject),n.DFSRenderArray.forEach((function(t){t.measureBoxSize()}))},flow:function(t){t.renderObject.computeStyles(),t.renderObject.flow(),t.hasRootElement()&&o(t)},reflow:function(t){t.renderObject.computeStyles(),t.renderObject.flow(),t.hasRootElement()&&o(t)},paint:function(e){console.log("paint",e),e?t.paint(e.renderObject):t.paint(n.rootRenderObject)},repaint:o};function o(e){console.log("paint",e),e?t.paint(e.renderObject):t.paint(n.rootRenderObject)}return t.engine=n,n}(n,t),r=lt(o);return(e={body:null,engine:o,renderer:n,createElement:r}).body=r("body"),o.createRoot(e.body),e}}));
//# sourceMappingURL=x-canvas.js.map
