{"version":3,"file":"x-canvas.js","sources":["../../src/utils/device.ts","../../src/utils/general.ts","../../src/utils/normalizeProp.ts","../../src/utils/patchFlags.ts","../../src/core/vnode.ts","../../src/core/createApp.ts","../../src/core/scheduler.ts","../../node_modules/tslib/tslib.es6.js","../../src/canvas/css/property-descriptors/background-color.ts","../../src/canvas/css/property-descriptors/border-color.ts","../../src/canvas/css/syntax/parser.ts","../../src/canvas/css/property-descriptors/border-width.ts","../../src/canvas/css/property-descriptors/color.ts","../../src/canvas/css/property-descriptors/display.ts","../../src/canvas/css/property-descriptors/font-size.ts","../../src/canvas/css/property-descriptors/font-weight.ts","../../src/canvas/css/property-descriptors/line-height.ts","../../src/canvas/css/property-descriptors/margin.ts","../../src/canvas/css/property-descriptors/opacity.ts","../../src/canvas/css/property-descriptors/padding.ts","../../src/canvas/css/property-descriptors/text-align.ts","../../src/canvas/css/property-descriptors/transform.ts","../../src/canvas/css/property-descriptors/visibility.ts","../../src/canvas/css/property-descriptors/z-index.ts","../../src/canvas/css/index.ts","../../src/canvas/tree-node/index.ts","../../src/canvas/render/renderObject.ts","../../src/canvas/render/index.ts","../../src/canvas/element/view.ts","../../src/canvas/element/text.ts","../../src/utils/fp.ts","../../src/canvas/element/index.ts","../../src/index.ts","../../src/core/nodeOps.ts","../../src/core/renderer.ts","../../src/core/h.ts","../../src/canvas/index.ts","../../src/canvas/engine.ts"],"sourcesContent":["export const isWX = (function () {\n  try {\n    return Boolean(wx.getSystemInfoSync)\n  } catch (err) {\n    return false\n  }\n})()\n","export const EMPTY_OBJ = Object.freeze({})\nexport const EMPTY_ARR = Object.freeze([])\n\nexport const NOOP = () => {}\n\n/**\n * Always return false.\n */\nexport const NO = () => false\n\nconst onRE = /^on[^a-z]/\nexport const isOn = (key: string) => onRE.test(key)\n\nexport const isModelListener = (key: string) => key.startsWith('onUpdate:')\n\nexport const extend = Object.assign\n\nexport const remove = <T>(arr: T[], el: T) => {\n  const i = arr.indexOf(el)\n  if (i > -1) {\n    arr.splice(i, 1)\n  }\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (\n  val: object,\n  key: string | symbol\n): key is keyof typeof val => hasOwnProperty.call(val, key)\n\nexport const isExact = (num: unknown): num is number => {\n  return isNumber.call(null, num)\n}\n\nexport const isAuto = (num: unknown): num is string => {\n  return num === 'auto'\n}\n\nexport const isOuter = (num: unknown): num is string => {\n  if (!isString(num)) return\n  return isArray(num.match('%'))\n}\n\nexport const parseOuter = (num: string): number => {\n  let _n = parseInt(num.replace('%', ''))\n  return isNaN(_n) || _n < 0 ? 0 : _n / 100\n}\n\nexport const isArray = Array.isArray\nexport const isMap = (val: unknown): val is Map<any, any> =>\n  toTypeString(val) === '[object Map]'\nexport const isSet = (val: unknown): val is Set<any> =>\n  toTypeString(val) === '[object Set]'\n\nexport const isDate = (val: unknown): val is Date =>\n  toTypeString(val) === '[object Date]'\nexport const isRegExp = (val: unknown): val is RegExp =>\n  toTypeString(val) === '[object RegExp]'\nexport const isFunction = (val: unknown): val is Function =>\n  typeof val === 'function'\nexport const isString = (val: unknown): val is string => typeof val === 'string'\nexport const isNumber = (val: unknown): val is number => typeof val === 'number'\nexport const isSymbol = (val: unknown): val is symbol => typeof val === 'symbol'\nexport const isObject = (val: unknown): val is Record<any, any> =>\n  val !== null && typeof val === 'object'\n\nexport const isPromise = <T = any>(val: unknown): val is Promise<T> => {\n  return isObject(val) && isFunction(val.then) && isFunction(val.catch)\n}\n\nexport const objectToString = Object.prototype.toString\nexport const toTypeString = (value: unknown): string =>\n  objectToString.call(value)\n\nexport const toRawType = (value: unknown): string => {\n  // extract \"RawType\" from strings like \"[object RawType]\"\n  return toTypeString(value).slice(8, -1)\n}\n\nexport const isPlainObject = (val: unknown): val is object =>\n  toTypeString(val) === '[object Object]'\n\nexport const isIntegerKey = (key: unknown) =>\n  isString(key) &&\n  key !== 'NaN' &&\n  key[0] !== '-' &&\n  '' + parseInt(key, 10) === key\n\nexport const mergeDeep = (target: unknown, ...sources) => {\n  if (!sources.length) return target\n  const source = sources.shift()\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} })\n        mergeDeep(target[key], source[key])\n      } else {\n        Object.assign(target, { [key]: source[key] })\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources)\n}\n","import { isString, isArray, isObject } from './general'\n\nexport type NormalizedStyle = Record<string, string | number>\n\nexport function normalizeStyle(\n  value: unknown\n): NormalizedStyle | string | undefined {\n  if (isArray(value)) {\n    const res: NormalizedStyle = {}\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i]\n      const normalized = isString(item)\n        ? parseStringStyle(item)\n        : (normalizeStyle(item) as NormalizedStyle)\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key]\n        }\n      }\n    }\n    return res\n  } else if (isString(value)) {\n    return value\n  } else if (isObject(value)) {\n    return value\n  }\n}\n\nconst listDelimiterRE = /;(?![^(]*\\))/g\nconst propertyDelimiterRE = /:([^]+)/\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs\n\nexport function parseStringStyle(cssText: string): NormalizedStyle {\n  const ret: NormalizedStyle = {}\n  cssText\n    .replace(styleCommentRE, '')\n    .split(listDelimiterRE)\n    .forEach((item) => {\n      if (item) {\n        const tmp = item.split(propertyDelimiterRE)\n        tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim())\n      }\n    })\n  return ret\n}\n\nexport function normalizeClass(value: unknown): string {\n  let res = ''\n  if (isString(value)) {\n    res = value\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i])\n      if (normalized) {\n        res += normalized + ' '\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + ' '\n      }\n    }\n  }\n  return res.trim()\n}\n","/**\n * Patch flags are optimization hints generated by the compiler.\n * when a block with dynamicChildren is encountered during diff, the algorithm\n * enters \"optimized mode\". In this mode, we know that the vdom is produced by\n * a render function generated by the compiler, so the algorithm only needs to\n * handle updates explicitly marked by these patch flags.\n *\n * Patch flags can be combined using the | bitwise operator and can be checked\n * using the & operator, e.g.\n *\n * ```js\n * const flag = TEXT | CLASS\n * if (flag & TEXT) { ... }\n * ```\n *\n * Check the `patchElement` function in '../../runtime-core/src/renderer.ts' to see how the\n * flags are handled during diff.\n */\nexport const enum PatchFlags {\n  /**\n   * Indicates an element with dynamic textContent (children fast path)\n   */\n  TEXT = 1,\n\n  /**\n   * Indicates an element with dynamic class binding.\n   */\n  CLASS = 1 << 1,\n\n  /**\n   * Indicates an element with dynamic style\n   * The compiler pre-compiles static string styles into static objects\n   * + detects and hoists inline static objects\n   * e.g. `style=\"color: red\"` and `:style=\"{ color: 'red' }\"` both get hoisted\n   * as:\n   * ```js\n   * const style = { color: 'red' }\n   * render() { return e('div', { style }) }\n   * ```\n   */\n  STYLE = 1 << 2,\n\n  /**\n   * Indicates an element that has non-class/style dynamic props.\n   * Can also be on a component that has any dynamic props (includes\n   * class/style). when this flag is present, the vnode also has a dynamicProps\n   * array that contains the keys of the props that may change so the runtime\n   * can diff them faster (without having to worry about removed props)\n   */\n  PROPS = 1 << 3,\n\n  /**\n   * Indicates an element with props with dynamic keys. When keys change, a full\n   * diff is always needed to remove the old key. This flag is mutually\n   * exclusive with CLASS, STYLE and PROPS.\n   */\n  FULL_PROPS = 1 << 4,\n\n  /**\n   * Indicates an element with event listeners (which need to be attached\n   * during hydration)\n   */\n  HYDRATE_EVENTS = 1 << 5,\n\n  /**\n   * Indicates a fragment whose children order doesn't change.\n   */\n  STABLE_FRAGMENT = 1 << 6,\n\n  /**\n   * Indicates a fragment with keyed or partially keyed children\n   */\n  KEYED_FRAGMENT = 1 << 7,\n\n  /**\n   * Indicates a fragment with unkeyed children.\n   */\n  UNKEYED_FRAGMENT = 1 << 8,\n\n  /**\n   * Indicates an element that only needs non-props patching, e.g. ref or\n   * directives (onVnodeXXX hooks). since every patched vnode checks for refs\n   * and onVnodeXXX hooks, it simply marks the vnode so that a parent block\n   * will track it.\n   */\n  NEED_PATCH = 1 << 9,\n\n  /**\n   * Indicates a component with dynamic slots (e.g. slot that references a v-for\n   * iterated value, or dynamic slot names).\n   * Components with this flag are always force updated.\n   */\n  DYNAMIC_SLOTS = 1 << 10,\n\n  /**\n   * Indicates a fragment that was created only because the user has placed\n   * comments at the root level of a template. This is a dev-only flag since\n   * comments are stripped in production.\n   */\n  DEV_ROOT_FRAGMENT = 1 << 11,\n\n  /**\n   * SPECIAL FLAGS -------------------------------------------------------------\n   * Special flags are negative integers. They are never matched against using\n   * bitwise operators (bitwise matching should only happen in branches where\n   * patchFlag > 0), and are mutually exclusive. When checking for a special\n   * flag, simply check patchFlag === FLAG.\n   */\n\n  /**\n   * Indicates a hoisted static vnode. This is a hint for hydration to skip\n   * the entire sub tree since static content never needs to be updated.\n   */\n  HOISTED = -1,\n  /**\n   * A special flag that indicates that the diffing algorithm should bail out\n   * of optimized mode. For example, on block fragments created by renderSlot()\n   * when encountering non-compiler generated slots (i.e. manually written\n   * render functions, which should always be fully diffed)\n   * OR manually cloneVNodes\n   */\n  BAIL = -2\n}\n\n/**\n * dev only flag -> name mapping\n */\nexport const PatchFlagNames: Record<PatchFlags, string> = {\n  [PatchFlags.TEXT]: `TEXT`,\n  [PatchFlags.CLASS]: `CLASS`,\n  [PatchFlags.STYLE]: `STYLE`,\n  [PatchFlags.PROPS]: `PROPS`,\n  [PatchFlags.FULL_PROPS]: `FULL_PROPS`,\n  [PatchFlags.HYDRATE_EVENTS]: `HYDRATE_EVENTS`,\n  [PatchFlags.STABLE_FRAGMENT]: `STABLE_FRAGMENT`,\n  [PatchFlags.KEYED_FRAGMENT]: `KEYED_FRAGMENT`,\n  [PatchFlags.UNKEYED_FRAGMENT]: `UNKEYED_FRAGMENT`,\n  [PatchFlags.NEED_PATCH]: `NEED_PATCH`,\n  [PatchFlags.DYNAMIC_SLOTS]: `DYNAMIC_SLOTS`,\n  [PatchFlags.DEV_ROOT_FRAGMENT]: `DEV_ROOT_FRAGMENT`,\n  [PatchFlags.HOISTED]: `HOISTED`,\n  [PatchFlags.BAIL]: `BAIL`\n}\n","import {\n  isOn,\n  isString,\n  isObject,\n  isArray,\n  isFunction,\n  normalizeClass,\n  normalizeStyle\n} from '../utils'\nimport { RendererNode } from './renderer'\nimport { ComponentInternalInstance, Data } from './components'\nimport { AppContext } from './createApp'\n\nexport const Fragment = Symbol.for('v-fgt') as any as {\n  __isFragment: true\n  new (): {\n    $props: VNodeProps\n  }\n}\nexport const Text = Symbol.for('v-txt')\nexport const Comment = Symbol.for('v-cmt')\n\nexport type VNodeTypes =\n  | string\n  | VNode\n  | typeof Text\n  | typeof Comment\n  | typeof Fragment\n\nexport type VNodeProps = {\n  key?: string | number | symbol\n  ref_for?: boolean\n  ref_key?: string\n}\n\ntype VNodeChildAtom =\n  | VNode\n  | string\n  | number\n  | boolean\n  | null\n  | undefined\n  | void\n\nexport type VNodeArrayChildren = Array<VNodeArrayChildren | VNodeChildAtom>\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null\n\nexport interface VNode<\n  HostNode = RendererNode,\n  ExtraProps = { [key: string]: any }\n> {\n  /**\n   * @internal\n   */\n  __v_isVNode: true\n\n  type: VNodeTypes\n  props: (VNodeProps & ExtraProps) | null\n  children: VNodeNormalizedChildren\n  component: ComponentInternalInstance | null\n\n  el: HostNode | null\n  /**\n   * number of elements contained in a static vnode\n   * @internal\n   */\n  staticCount: number\n\n  // application root node only\n  appContext: AppContext | null\n\n  /**\n   * @internal lexical scope owner instance\n   */\n  ctx: ComponentInternalInstance | null\n}\n\nexport function isVNode(value: any): value is VNode {\n  return value ? value.__v_isVNode === true : false\n}\n\nexport function isSameVNodeType(n1: VNode, n2: VNode): boolean {\n  return n1.type === n2.type\n}\n\nfunction createBaseVNode(\n  type: VNodeTypes,\n  props: (Data & VNodeProps) | null = null,\n  children: unknown = null,\n  patchFlag = 0\n) {\n  const vnode = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type,\n    props,\n    children,\n    component: null,\n    el: null,\n    staticCount: 0,\n    appContext: null,\n    ctx: null\n  } as VNode\n\n  // if (type !== 'Text') {\n  //   normalizeChildren(vnode, children)\n  // }\n  return vnode\n}\n\nexport function createVNode(\n  type: VNodeTypes,\n  props: (Data & VNodeProps) | null = null,\n  children: unknown = null,\n  patchFlag: number = 0\n) {\n  if (isVNode(type)) {\n    const cloned = cloneVNode(type, props, true /* mergeRef: true */)\n    if (children) {\n      normalizeChildren(cloned, children)\n    }\n\n    return cloned\n  }\n\n  // class & style normalization.\n  if (props) {\n    // for reactive or proxy objects, we need to clone it to enable mutation.\n    // props = guardReactiveProps(props)!\n    let { class: klass, style } = props\n    if (klass && !isString(klass)) {\n      props.class = normalizeClass(klass)\n    }\n    if (isObject(style)) {\n      props.style = normalizeStyle(style)\n    }\n  }\n\n  return createBaseVNode(type, props, children, patchFlag)\n}\n\nexport function cloneVNode(\n  vnode: VNode,\n  extraProps?: (Data & VNodeProps) | null,\n  mergeRef = false\n): VNode {\n  if (vnode && typeof vnode !== 'object') {\n    return vnode\n  }\n  // This is intentionally NOT using spread or extend to avoid the runtime\n  // key enumeration cost.\n  const { props, children } = vnode\n  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props\n  const cloned: VNode = {\n    __v_isVNode: true,\n    type: vnode.type,\n    props: mergedProps,\n    children: isArray(children)\n      ? (children as VNode[]).map(deepCloneVNode)\n      : children,\n    staticCount: vnode.staticCount,\n    appContext: vnode.appContext,\n    component: vnode.component,\n    el: vnode.el,\n    ctx: vnode.ctx\n  }\n  return cloned as any\n}\n\n/**\n * Dev only, for HMR of hoisted vnodes reused in v-for\n * https://github.com/vitejs/vite/issues/2022\n */\nfunction deepCloneVNode(vnode: VNode): VNode {\n  const cloned = cloneVNode(vnode)\n  if (isArray(vnode.children)) {\n    cloned.children = (vnode.children as VNode[]).map(deepCloneVNode)\n  }\n  return cloned\n}\n\n/**\n * @private\n */\nexport function createTextVNode(text: string = ' ', flag: number = 0): VNode {\n  return createVNode('Text', null, text)\n}\n\nexport function normalizeVNode(child: VNodeChild): VNode {\n  if (child == null || typeof child === 'boolean') {\n    // empty placeholder\n    return createVNode(Comment)\n  } else if (isArray(child)) {\n    // fragment\n    return createVNode(\n      Fragment,\n      null,\n      // #3666, avoid reference pollution when reusing vnode\n      child.slice()\n    )\n  } else if (typeof child === 'object') {\n    // already vnode, this should be the most common since compiled templates\n    // always produce all-vnode children arrays\n    return cloneIfMounted(child)\n  } else {\n    // strings and numbers\n    return createTextVNode(String(child))\n  }\n}\n\nexport function cloneIfMounted(child: VNode): VNode {\n  return cloneVNode(child)\n}\n\nexport function normalizeChildren(vnode: VNode, children: unknown) {\n  if (children == null) {\n    children = null\n  } else if (isArray(children)) {\n  } else if (typeof children === 'object') {\n  } else if (isFunction(children)) {\n  } else {\n    children = [createTextVNode(children as string)]\n  }\n  vnode.children = children as VNodeNormalizedChildren\n}\n\nexport function mergeProps(...args: (Data & VNodeProps)[]) {\n  const ret: Data = {}\n  for (let i = 0; i < args.length; i++) {\n    const toMerge = args[i]\n    for (const key in toMerge) {\n      if (key === 'class') {\n        if (ret.class !== toMerge.class) {\n          ret.class = normalizeClass([ret.class, toMerge.class])\n        }\n      } else if (key === 'style') {\n        ret.style = normalizeStyle([ret.style, toMerge.style])\n      } else if (isOn(key)) {\n        const existing = ret[key]\n        const incoming = toMerge[key]\n        if (\n          incoming &&\n          existing !== incoming &&\n          !(isArray(existing) && existing.includes(incoming))\n        ) {\n          ret[key] = existing\n            ? [].concat(existing as any, incoming as any)\n            : incoming\n        }\n      } else if (key !== '') {\n        ret[key] = toMerge[key]\n      }\n    }\n  }\n  return ret\n}\n","import { Component, ComponentInternalInstance, Data } from './components'\nimport { createVNode } from './vnode'\n\nexport interface App<HostElement = any> {\n  _uid: number\n  _component: Component\n  _props: Data | null\n  _container: HostElement | null\n  _instance: ComponentInternalInstance | null\n\n  mount(rootContainer: HostElement | string): any\n}\n\nexport interface AppContext {\n  app: App // for devtools\n}\n\nexport type createApp<HostElement> = (\n  rootComponent: Component,\n  rootProps?: Data | null\n) => App<HostElement>\n\nlet uid = 0\n\nexport function createAppAPI(render) {\n  return function createApp(rootComponent, rootProps = null) {\n    const app: App = {\n      _uid: uid++,\n      _component: rootComponent as Component,\n      _props: rootProps,\n      _container: null,\n      _instance: null,\n\n      mount(rootContainer): any {\n        const vnode = createVNode(rootComponent, rootProps)\n\n        app._container = rootContainer\n\n        render(vnode, rootContainer)\n      }\n    }\n\n    return app\n  }\n}\n","import { ComponentInternalInstance } from './components'\n\nexport interface SchedulerJob extends Function {\n  id?: number\n  pre?: boolean\n  active?: boolean\n  computed?: boolean\n  /**\n   * Indicates whether the effect is allowed to recursively trigger itself\n   * when managed by the scheduler.\n   *\n   * By default, a job cannot trigger itself because some built-in method calls,\n   * e.g. Array.prototype.push actually performs reads as well (#1740) which\n   * can lead to confusing infinite loops.\n   * The allowed cases are component update functions and watch callbacks.\n   * Component update functions may update child component props, which in turn\n   * trigger flush: \"pre\" watch callbacks that mutates state that the parent\n   * relies on (#1801). Watch callbacks doesn't track its dependencies so if it\n   * triggers itself again, it's likely intentional and it is the user's\n   * responsibility to perform recursive state mutation that eventually\n   * stabilizes (#1727).\n   */\n  allowRecurse?: boolean\n  /**\n   * Attached by renderer.ts when setting up a component's render effect\n   * Used to obtain component information when reporting max recursive updates.\n   * dev only.\n   */\n  ownerInstance?: ComponentInternalInstance\n}\n\nexport type SchedulerJobs = SchedulerJob | SchedulerJob[]\n\nlet isFlushing = false\nlet isFlushPending = false\n\nconst queue: SchedulerJob[] = []\nlet flushIndex = 0\n\nconst pendingPostFlushCbs: SchedulerJob[] = []\nlet activePostFlushCbs: SchedulerJob[] | null = null\nlet postFlushIndex = 0\n\nconst resolvedPromise = /*#__PURE__*/ Promise.resolve() as Promise<any>\nlet currentFlushPromise: Promise<void> | null = null\n\nconst RECURSION_LIMIT = 100\ntype CountMap = Map<SchedulerJob, number>\n\nexport function flushPreFlushCbs(\n  seen?: CountMap,\n  // if currently flushing, skip the current job itself\n  i = isFlushing ? flushIndex + 1 : 0\n) {\n  seen = seen || new Map()\n  for (; i < queue.length; i++) {\n    const cb = queue[i]\n    if (cb && cb.pre) {\n      if (checkRecursiveUpdates(seen!, cb)) {\n        continue\n      }\n      queue.splice(i, 1)\n      i--\n      cb()\n    }\n  }\n}\n\nexport function flushPostFlushCbs(seen?: CountMap) {\n  if (pendingPostFlushCbs.length) {\n    const deduped = [...new Set(pendingPostFlushCbs)]\n    pendingPostFlushCbs.length = 0\n\n    // #1947 already has active queue, nested flushPostFlushCbs call\n    if (activePostFlushCbs) {\n      activePostFlushCbs.push(...deduped)\n      return\n    }\n\n    activePostFlushCbs = deduped\n\n    seen = seen || new Map()\n\n    activePostFlushCbs.sort((a, b) => getId(a) - getId(b))\n\n    for (\n      postFlushIndex = 0;\n      postFlushIndex < activePostFlushCbs.length;\n      postFlushIndex++\n    ) {\n      if (checkRecursiveUpdates(seen!, activePostFlushCbs[postFlushIndex])) {\n        continue\n      }\n      activePostFlushCbs[postFlushIndex]()\n    }\n    activePostFlushCbs = null\n    postFlushIndex = 0\n  }\n}\n\nconst getId = (job: SchedulerJob): number =>\n  job.id == null ? Infinity : job.id\n\nfunction checkRecursiveUpdates(seen: CountMap, fn: SchedulerJob) {\n  if (!seen.has(fn)) {\n    seen.set(fn, 1)\n  } else {\n    const count = seen.get(fn)!\n    if (count > RECURSION_LIMIT) {\n      return true\n    } else {\n      seen.set(fn, count + 1)\n    }\n  }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","import {\n  IPropertyTypeValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nexport const backgroundColor: IPropertyTypeValueDescriptor = {\n  name: `background-color`,\n  initialValue: 'transparent',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TYPE_VALUE,\n  format: 'color'\n}\n","import {\n  IPropertyTypeValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nconst borderColorForSide = (side: string): IPropertyTypeValueDescriptor => ({\n  name: `border-${side}-color`,\n  initialValue: 'transparent',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TYPE_VALUE,\n  format: 'color'\n})\n\nexport const borderTopColor: IPropertyTypeValueDescriptor =\n  borderColorForSide('top')\nexport const borderRightColor: IPropertyTypeValueDescriptor =\n  borderColorForSide('right')\nexport const borderBottomColor: IPropertyTypeValueDescriptor =\n  borderColorForSide('bottom')\nexport const borderLeftColor: IPropertyTypeValueDescriptor =\n  borderColorForSide('left')\n","import {\n  CSSToken,\n  DimensionToken,\n  NumberValueToken,\n  StringValueToken,\n  TokenType\n} from './tokenizer'\n\nexport type CSSBlockType =\n  | TokenType.LEFT_PARENTHESIS_TOKEN\n  | TokenType.LEFT_SQUARE_BRACKET_TOKEN\n  | TokenType.LEFT_CURLY_BRACKET_TOKEN\n\nexport interface CSSBlock {\n  type: CSSBlockType\n  values: CSSValue[]\n}\n\nexport interface CSSFunction {\n  type: TokenType.FUNCTION\n  name: string\n  values: CSSValue[]\n}\n\nexport type CSSValue = CSSFunction | CSSToken | CSSBlock\n\n// export class Parser {\n//   private _tokens: CSSToken[]\n\n//   constructor(tokens: CSSToken[]) {\n//     this._tokens = tokens\n//   }\n\n//   static create(value: string): Parser {\n//     const tokenizer = new Tokenizer()\n//     tokenizer.write(value)\n//     return new Parser(tokenizer.read())\n//   }\n\n//   static parseValue(value: string): CSSValue {\n//     return Parser.create(value).parseComponentValue()\n//   }\n\n//   static parseValues(value: string): CSSValue[] {\n//     return Parser.create(value).parseComponentValues()\n//   }\n\n//   parseComponentValue(): CSSValue {\n//     let token = this.consumeToken()\n//     while (token.type === TokenType.WHITESPACE_TOKEN) {\n//       token = this.consumeToken()\n//     }\n\n//     if (token.type === TokenType.EOF_TOKEN) {\n//       throw new SyntaxError(`Error parsing CSS component value, unexpected EOF`)\n//     }\n\n//     this.reconsumeToken(token)\n//     const value = this.consumeComponentValue()\n\n//     do {\n//       token = this.consumeToken()\n//     } while (token.type === TokenType.WHITESPACE_TOKEN)\n\n//     if (token.type === TokenType.EOF_TOKEN) {\n//       return value\n//     }\n\n//     throw new SyntaxError(\n//       `Error parsing CSS component value, multiple values found when expecting only one`\n//     )\n//   }\n\n//   parseComponentValues(): CSSValue[] {\n//     const values = []\n//     while (true) {\n//       const value = this.consumeComponentValue()\n//       if (value.type === TokenType.EOF_TOKEN) {\n//         return values\n//       }\n//       values.push(value)\n//       values.push()\n//     }\n//   }\n\n//   private consumeComponentValue(): CSSValue {\n//     const token = this.consumeToken()\n\n//     switch (token.type) {\n//       case TokenType.LEFT_CURLY_BRACKET_TOKEN:\n//       case TokenType.LEFT_SQUARE_BRACKET_TOKEN:\n//       case TokenType.LEFT_PARENTHESIS_TOKEN:\n//         return this.consumeSimpleBlock(token.type)\n//       case TokenType.FUNCTION_TOKEN:\n//         return this.consumeFunction(token)\n//     }\n\n//     return token\n//   }\n\n//   private consumeSimpleBlock(type: CSSBlockType): CSSBlock {\n//     const block: CSSBlock = { type, values: [] }\n\n//     let token = this.consumeToken()\n//     while (true) {\n//       if (token.type === TokenType.EOF_TOKEN || isEndingTokenFor(token, type)) {\n//         return block\n//       }\n\n//       this.reconsumeToken(token)\n//       block.values.push(this.consumeComponentValue())\n//       token = this.consumeToken()\n//     }\n//   }\n\n//   private consumeFunction(functionToken: StringValueToken): CSSFunction {\n//     const cssFunction: CSSFunction = {\n//       name: functionToken.value,\n//       values: [],\n//       type: TokenType.FUNCTION\n//     }\n\n//     while (true) {\n//       const token = this.consumeToken()\n//       if (\n//         token.type === TokenType.EOF_TOKEN ||\n//         token.type === TokenType.RIGHT_PARENTHESIS_TOKEN\n//       ) {\n//         return cssFunction\n//       }\n\n//       this.reconsumeToken(token)\n//       cssFunction.values.push(this.consumeComponentValue())\n//     }\n//   }\n\n//   private consumeToken(): CSSToken {\n//     const token = this._tokens.shift()\n//     return typeof token === 'undefined' ? EOF_TOKEN : token\n//   }\n\n//   private reconsumeToken(token: CSSToken): void {\n//     this._tokens.unshift(token)\n//   }\n// }\n\nexport const isDimensionToken = (token: CSSValue): token is DimensionToken =>\n  token.type === TokenType.DIMENSION_TOKEN\nexport const isNumberToken = (token: CSSValue): token is NumberValueToken =>\n  token.type === TokenType.NUMBER_TOKEN\nexport const isIdentToken = (token: CSSValue): token is StringValueToken =>\n  token.type === TokenType.IDENT_TOKEN\nexport const isStringToken = (token: CSSValue): token is StringValueToken =>\n  token.type === TokenType.STRING_TOKEN\nexport const isIdentWithValue = (token: CSSValue, value: string): boolean =>\n  isIdentToken(token) && token.value === value\n\nexport const nonWhiteSpace = (token: CSSValue): boolean =>\n  token.type !== TokenType.WHITESPACE_TOKEN\nexport const nonFunctionArgSeparator = (token: CSSValue): boolean =>\n  token.type !== TokenType.WHITESPACE_TOKEN &&\n  token.type !== TokenType.COMMA_TOKEN\n\nexport const parseFunctionArgs = (tokens: CSSValue[]): CSSValue[][] => {\n  const args: CSSValue[][] = []\n  let arg: CSSValue[] = []\n  tokens.forEach((token) => {\n    if (token.type === TokenType.COMMA_TOKEN) {\n      if (arg.length === 0) {\n        throw new Error(`Error parsing function args, zero tokens for arg`)\n      }\n      args.push(arg)\n      arg = []\n      return\n    }\n\n    if (token.type !== TokenType.WHITESPACE_TOKEN) {\n      arg.push(token)\n    }\n  })\n  if (arg.length) {\n    args.push(arg)\n  }\n\n  return args\n}\n\nconst isEndingTokenFor = (token: CSSToken, type: CSSBlockType): boolean => {\n  if (\n    type === TokenType.LEFT_CURLY_BRACKET_TOKEN &&\n    token.type === TokenType.RIGHT_CURLY_BRACKET_TOKEN\n  ) {\n    return true\n  }\n  if (\n    type === TokenType.LEFT_SQUARE_BRACKET_TOKEN &&\n    token.type === TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n  ) {\n    return true\n  }\n\n  return (\n    type === TokenType.LEFT_PARENTHESIS_TOKEN &&\n    token.type === TokenType.RIGHT_PARENTHESIS_TOKEN\n  )\n}\n","import {\n  IPropertyValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isDimensionToken } from '../syntax/parser'\nconst borderWidthForSide = (\n  side: string\n): IPropertyValueDescriptor<number> => ({\n  name: `border-${side}-width`,\n  initialValue: '0',\n  type: PropertyDescriptorParsingType.VALUE,\n  prefix: false,\n  parse: (token: CSSValue): number => {\n    if (isDimensionToken(token)) {\n      return token.number\n    }\n    return 0\n  }\n})\n\nexport const borderTopWidth: IPropertyValueDescriptor<number> =\n  borderWidthForSide('top')\nexport const borderRightWidth: IPropertyValueDescriptor<number> =\n  borderWidthForSide('right')\nexport const borderBottomWidth: IPropertyValueDescriptor<number> =\n  borderWidthForSide('bottom')\nexport const borderLeftWidth: IPropertyValueDescriptor<number> =\n  borderWidthForSide('left')\n","import {\n  IPropertyTypeValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nexport const color: IPropertyTypeValueDescriptor = {\n  name: `color`,\n  initialValue: 'transparent',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TYPE_VALUE,\n  format: 'color'\n}\n","import {\n  IPropertyListDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isIdentToken } from '../syntax/parser'\nexport const enum DISPLAY {\n  NONE = 0,\n  BLOCK = 1 << 1,\n  INLINE = 1 << 2,\n  RUN_IN = 1 << 3,\n  FLOW = 1 << 4,\n  FLOW_ROOT = 1 << 5,\n  TABLE = 1 << 6,\n  FLEX = 1 << 7,\n  GRID = 1 << 8,\n  RUBY = 1 << 9,\n  SUBGRID = 1 << 10,\n  LIST_ITEM = 1 << 11,\n  TABLE_ROW_GROUP = 1 << 12,\n  TABLE_HEADER_GROUP = 1 << 13,\n  TABLE_FOOTER_GROUP = 1 << 14,\n  TABLE_ROW = 1 << 15,\n  TABLE_CELL = 1 << 16,\n  TABLE_COLUMN_GROUP = 1 << 17,\n  TABLE_COLUMN = 1 << 18,\n  TABLE_CAPTION = 1 << 19,\n  RUBY_BASE = 1 << 20,\n  RUBY_TEXT = 1 << 21,\n  RUBY_BASE_CONTAINER = 1 << 22,\n  RUBY_TEXT_CONTAINER = 1 << 23,\n  CONTENTS = 1 << 24,\n  INLINE_BLOCK = 1 << 25,\n  INLINE_LIST_ITEM = 1 << 26,\n  INLINE_TABLE = 1 << 27,\n  INLINE_FLEX = 1 << 28,\n  INLINE_GRID = 1 << 29\n}\n\nexport type Display = number\n\nexport const display: IPropertyListDescriptor<Display> = {\n  name: 'display',\n  initialValue: 'inline-block',\n  prefix: false,\n  type: PropertyDescriptorParsingType.LIST,\n  parse: (tokens: CSSValue[]): Display => {\n    return tokens.filter(isIdentToken).reduce((bit, token) => {\n      return bit | parseDisplayValue(token.value)\n    }, DISPLAY.NONE)\n  }\n}\n\nconst parseDisplayValue = (display: string): Display => {\n  switch (display) {\n    case 'block':\n    case '-webkit-box':\n      return DISPLAY.BLOCK\n    case 'inline':\n      return DISPLAY.INLINE\n    case 'run-in':\n      return DISPLAY.RUN_IN\n    case 'flow':\n      return DISPLAY.FLOW\n    case 'flow-root':\n      return DISPLAY.FLOW_ROOT\n    case 'table':\n      return DISPLAY.TABLE\n    case 'flex':\n    case '-webkit-flex':\n      return DISPLAY.FLEX\n    case 'grid':\n    case '-ms-grid':\n      return DISPLAY.GRID\n    case 'ruby':\n      return DISPLAY.RUBY\n    case 'subgrid':\n      return DISPLAY.SUBGRID\n    case 'list-item':\n      return DISPLAY.LIST_ITEM\n    case 'table-row-group':\n      return DISPLAY.TABLE_ROW_GROUP\n    case 'table-header-group':\n      return DISPLAY.TABLE_HEADER_GROUP\n    case 'table-footer-group':\n      return DISPLAY.TABLE_FOOTER_GROUP\n    case 'table-row':\n      return DISPLAY.TABLE_ROW\n    case 'table-cell':\n      return DISPLAY.TABLE_CELL\n    case 'table-column-group':\n      return DISPLAY.TABLE_COLUMN_GROUP\n    case 'table-column':\n      return DISPLAY.TABLE_COLUMN\n    case 'table-caption':\n      return DISPLAY.TABLE_CAPTION\n    case 'ruby-base':\n      return DISPLAY.RUBY_BASE\n    case 'ruby-text':\n      return DISPLAY.RUBY_TEXT\n    case 'ruby-base-container':\n      return DISPLAY.RUBY_BASE_CONTAINER\n    case 'ruby-text-container':\n      return DISPLAY.RUBY_TEXT_CONTAINER\n    case 'contents':\n      return DISPLAY.CONTENTS\n    case 'inline-block':\n      return DISPLAY.INLINE_BLOCK\n    case 'inline-list-item':\n      return DISPLAY.INLINE_LIST_ITEM\n    case 'inline-table':\n      return DISPLAY.INLINE_TABLE\n    case 'inline-flex':\n      return DISPLAY.INLINE_FLEX\n    case 'inline-grid':\n      return DISPLAY.INLINE_GRID\n  }\n\n  return DISPLAY.NONE\n}\n","import {\n  IPropertyTypeValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nexport const fontSize: IPropertyTypeValueDescriptor = {\n  name: `font-size`,\n  initialValue: '0',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TYPE_VALUE,\n  format: 'length'\n}\n","import {\n  IPropertyValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isIdentToken, isNumberToken } from '../syntax/parser'\nexport const fontWeight: IPropertyValueDescriptor<number> = {\n  name: 'font-weight',\n  initialValue: 'normal',\n  type: PropertyDescriptorParsingType.VALUE,\n  prefix: false,\n  parse: (token: CSSValue): number => {\n    if (isNumberToken(token)) {\n      return token.number\n    }\n\n    if (isIdentToken(token)) {\n      switch (token.value) {\n        case 'bold':\n          return 700\n        case 'normal':\n        default:\n          return 400\n      }\n    }\n\n    return 400\n  }\n}\n","import {\n  IPropertyTokenValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isIdentToken } from '../syntax/parser'\nimport { TokenType } from '../syntax/tokenizer'\nimport {\n  getAbsoluteValue,\n  isLengthPercentage\n} from '../types/length-percentage'\nexport const lineHeight: IPropertyTokenValueDescriptor = {\n  name: 'line-height',\n  initialValue: 'normal',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TOKEN_VALUE\n}\n\nexport const computeLineHeight = (\n  token: CSSValue,\n  fontSize: number\n): number => {\n  if (isIdentToken(token) && token.value === 'normal') {\n    return 1.2 * fontSize\n  } else if (token.type === TokenType.NUMBER_TOKEN) {\n    return fontSize * token.number\n  } else if (isLengthPercentage(token)) {\n    return getAbsoluteValue(token, fontSize)\n  }\n\n  return fontSize\n}\n","import {\n  IPropertyTokenValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nconst marginForSide = (side: string): IPropertyTokenValueDescriptor => ({\n  name: `margin-${side}`,\n  initialValue: '0',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TOKEN_VALUE\n})\n\nexport const marginTop: IPropertyTokenValueDescriptor = marginForSide('top')\nexport const marginRight: IPropertyTokenValueDescriptor = marginForSide('right')\nexport const marginBottom: IPropertyTokenValueDescriptor =\n  marginForSide('bottom')\nexport const marginLeft: IPropertyTokenValueDescriptor = marginForSide('left')\n","import {\n  IPropertyValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isNumberToken } from '../syntax/parser'\nexport const opacity: IPropertyValueDescriptor<number> = {\n  name: 'opacity',\n  initialValue: '1',\n  type: PropertyDescriptorParsingType.VALUE,\n  prefix: false,\n  parse: (token: CSSValue): number => {\n    if (isNumberToken(token)) {\n      return token.number\n    }\n    return 1\n  }\n}\n","import {\n  IPropertyTypeValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nconst paddingForSide = (side: string): IPropertyTypeValueDescriptor => ({\n  name: `padding-${side}`,\n  initialValue: '0',\n  prefix: false,\n  type: PropertyDescriptorParsingType.TYPE_VALUE,\n  format: 'length-percentage'\n})\n\nexport const paddingTop: IPropertyTypeValueDescriptor = paddingForSide('top')\nexport const paddingRight: IPropertyTypeValueDescriptor =\n  paddingForSide('right')\nexport const paddingBottom: IPropertyTypeValueDescriptor =\n  paddingForSide('bottom')\nexport const paddingLeft: IPropertyTypeValueDescriptor = paddingForSide('left')\n","import {\n  IPropertyIdentValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nexport const enum TEXT_ALIGN {\n  LEFT = 0,\n  CENTER = 1,\n  RIGHT = 2\n}\n\nexport const textAlign: IPropertyIdentValueDescriptor<TEXT_ALIGN> = {\n  name: 'text-align',\n  initialValue: 'left',\n  prefix: false,\n  type: PropertyDescriptorParsingType.IDENT_VALUE,\n  parse: (textAlign: string) => {\n    switch (textAlign) {\n      case 'right':\n        return TEXT_ALIGN.RIGHT\n      case 'center':\n      case 'justify':\n        return TEXT_ALIGN.CENTER\n      case 'left':\n      default:\n        return TEXT_ALIGN.LEFT\n    }\n  }\n}\n","import {\n  IPropertyValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue } from '../syntax/parser'\nimport { NumberValueToken, TokenType } from '../syntax/tokenizer'\nexport type Matrix = [number, number, number, number, number, number]\nexport type Transform = Matrix | null\n\nexport const transform: IPropertyValueDescriptor<Transform> = {\n  name: 'transform',\n  initialValue: 'none',\n  prefix: true,\n  type: PropertyDescriptorParsingType.VALUE,\n  parse: (token: CSSValue) => {\n    if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n      return null\n    }\n\n    if (token.type === TokenType.FUNCTION) {\n      const transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name]\n      if (typeof transformFunction === 'undefined') {\n        throw new Error(\n          `Attempting to parse an unsupported transform function \"${token.name}\"`\n        )\n      }\n      return transformFunction(token.values)\n    }\n\n    return null\n  }\n}\n\nconst matrix = (args: CSSValue[]): Transform => {\n  const values = args\n    .filter((arg) => arg.type === TokenType.NUMBER_TOKEN)\n    .map((arg: NumberValueToken) => arg.number)\n\n  return values.length === 6 ? (values as Matrix) : null\n}\n\n// doesn't support 3D transforms at the moment\nconst matrix3d = (args: CSSValue[]): Transform => {\n  const values = args\n    .filter((arg) => arg.type === TokenType.NUMBER_TOKEN)\n    .map((arg: NumberValueToken) => arg.number)\n\n  const [a1, b1, {}, {}, a2, b2, {}, {}, {}, {}, {}, {}, a4, b4, {}, {}] =\n    values\n\n  return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null\n}\n\nconst SUPPORTED_TRANSFORM_FUNCTIONS: {\n  [key: string]: (args: CSSValue[]) => Transform\n} = {\n  matrix: matrix,\n  matrix3d: matrix3d\n}\n","import {\n  IPropertyIdentValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\n\nexport const enum VISIBILITY {\n  VISIBLE = 0,\n  HIDDEN = 1,\n  COLLAPSE = 2\n}\n\nexport const visibility: IPropertyIdentValueDescriptor<VISIBILITY> = {\n  name: 'visible',\n  initialValue: 'none',\n  prefix: false,\n  type: PropertyDescriptorParsingType.IDENT_VALUE,\n  parse: (visibility: string) => {\n    switch (visibility) {\n      case 'hidden':\n        return VISIBILITY.HIDDEN\n      case 'collapse':\n        return VISIBILITY.COLLAPSE\n      case 'visible':\n      default:\n        return VISIBILITY.VISIBLE\n    }\n  }\n}\n","import {\n  IPropertyValueDescriptor,\n  PropertyDescriptorParsingType\n} from '../IPropertyDescriptor'\nimport { CSSValue, isNumberToken } from '../syntax/parser'\nimport { TokenType } from '../syntax/tokenizer'\n\ninterface zIndex {\n  order: number\n  auto: boolean\n}\n\nexport const zIndex: IPropertyValueDescriptor<zIndex> = {\n  name: 'z-index',\n  initialValue: 'auto',\n  prefix: false,\n  type: PropertyDescriptorParsingType.VALUE,\n  parse: (token: CSSValue): zIndex => {\n    if (token.type === TokenType.IDENT_TOKEN) {\n      return { auto: true, order: 0 }\n    }\n\n    if (isNumberToken(token)) {\n      return { auto: false, order: token.number }\n    }\n\n    throw new Error(`Invalid z-index number parsed`)\n  }\n}\n","import { CSSPropertyDescriptor } from './IPropertyDescriptor'\nimport { backgroundColor } from './property-descriptors/background-color'\nimport {\n  borderBottomColor,\n  borderLeftColor,\n  borderRightColor,\n  borderTopColor\n} from './property-descriptors/border-color'\nimport {\n  borderBottomWidth,\n  borderLeftWidth,\n  borderRightWidth,\n  borderTopWidth\n} from './property-descriptors/border-width'\nimport { color } from './property-descriptors/color'\nimport { display } from './property-descriptors/display'\nimport { fontSize } from './property-descriptors/font-size'\nimport { fontWeight } from './property-descriptors/font-weight'\nimport { lineHeight } from './property-descriptors/line-height'\nimport {\n  marginBottom,\n  marginLeft,\n  marginRight,\n  marginTop\n} from './property-descriptors/margin'\nimport { opacity } from './property-descriptors/opacity'\nimport {\n  paddingBottom,\n  paddingLeft,\n  paddingRight,\n  paddingTop\n} from './property-descriptors/padding'\nimport { textAlign } from './property-descriptors/text-align'\nimport { transform } from './property-descriptors/transform'\nimport { visibility } from './property-descriptors/visibility'\nimport { zIndex } from './property-descriptors/z-index'\n\nexport function createCSSDeclaration(styles) {\n  console.log('CSSSSSSSS', styles)\n  return {\n    backgroundColor: parse(backgroundColor, styles.backgroundColor),\n    borderTopColor: parse(borderTopColor, styles.borderTopColor),\n    borderRightColor: parse(borderRightColor, styles.borderRightColor),\n    borderBottomColor: parse(borderBottomColor, styles.borderBottomColor),\n    borderLeftColor: parse(borderLeftColor, styles.borderLeftColor),\n    // borderTopLeftRadius: parse(borderTopLeftRadius, styles.borderTopLeftRadius),\n    // borderTopRightRadius: parse(borderTopRightRadius, styles.borderTopRightRadius),\n    // borderBottomRightRadius: parse(borderBottomRightRadius, styles.borderBottomRightRadius),\n    // borderBottomLeftRadius: parse(borderBottomLeftRadius, styles.borderBottomLeftRadius),\n    // borderTopStyle: parse(borderTopStyle, styles.borderTopStyle),\n    // borderRightStyle: parse(borderRightStyle, styles.borderRightStyle),\n    // borderBottomStyle: parse(borderBottomStyle, styles.borderBottomStyle),\n    // borderLeftStyle: parse(borderLeftStyle, styles.borderLeftStyle),\n    borderTopWidth: parse(borderTopWidth, styles.borderTopWidth),\n    borderRightWidth: parse(borderRightWidth, styles.borderRightWidth),\n    borderBottomWidth: parse(borderBottomWidth, styles.borderBottomWidth),\n    borderLeftWidth: parse(borderLeftWidth, styles.borderLeftWidth),\n    // boxShadow: parse(boxShadow, styles.boxShadow),\n    color: parse(color, styles.color),\n    // direction: parse(direction, styles.direction),\n    display: parse(display, styles.display),\n    // float: parse(float, styles.cssFloat),\n    // fontFamily: parse(fontFamily, styles.fontFamily),\n    fontSize: parse(fontSize, styles.fontSize),\n    // fontStyle: parse(fontStyle, styles.fontStyle),\n    // fontVariant: parse(fontVariant, styles.fontVariant),\n    fontWeight: parse(fontWeight, styles.fontWeight),\n    // letterSpacing: parse(letterSpacing, styles.letterSpacing),\n    // lineBreak: parse(lineBreak, styles.lineBreak),\n    lineHeight: parse(lineHeight, styles.lineHeight),\n    // listStyleImage: parse(listStyleImage, styles.listStyleImage),\n    // listStylePosition: parse(listStylePosition, styles.listStylePosition),\n    // listStyleType: parse(listStyleType, styles.listStyleType),\n    marginTop: parse(marginTop, styles.marginTop),\n    marginRight: parse(marginRight, styles.marginRight),\n    marginBottom: parse(marginBottom, styles.marginBottom),\n    marginLeft: parse(marginLeft, styles.marginLeft),\n    opacity: parse(opacity, styles.opacity),\n    // const overflowTuple: parse(overflow, styles.overflow),\n    // overflowX: overflowTuple[0],\n    // overflowY: overflowTuple[overflowTuple.length > 1 ? 1 : 0],\n    // overflowWrap: parse(overflowWrap, styles.overflowWrap),\n    paddingTop: parse(paddingTop, styles.paddingTop),\n    paddingRight: parse(paddingRight, styles.paddingRight),\n    paddingBottom: parse(paddingBottom, styles.paddingBottom),\n    paddingLeft: parse(paddingLeft, styles.paddingLeft),\n    // paintOrder: parse(paintOrder, styles.paintOrder),\n    // position: parse(position, styles.position),\n    textAlign: parse(textAlign, styles.textAlign),\n    // textDecorationColor: parse(\n    //     context,\n    //     textDecorationColor,\n    //     styles.textDecorationColor ?? styles.color\n    // ),\n    // textDecorationLine: parse(\n    //     context,\n    //     textDecorationLine,\n    //     styles.textDecorationLine ?? styles.textDecoration\n    // ),\n    // textShadow: parse(textShadow, styles.textShadow),\n    // textTransform: parse(textTransform, styles.textTransform),\n    transform: parse(transform, styles.transform),\n    // transformOrigin: parse(transformOrigin, styles.transformOrigin),\n    visibility: parse(visibility, styles.visibility),\n    // webkitTextStrokeColor: parse(webkitTextStrokeColor, styles.webkitTextStrokeColor),\n    // webkitTextStrokeWidth: parse(webkitTextStrokeWidth, styles.webkitTextStrokeWidth),\n    // wordBreak: parse(wordBreak, styles.wordBreak),\n    zIndex: parse(zIndex, styles.zIndex)\n  }\n}\n\nconst parse = (\n  descriptor: CSSPropertyDescriptor<any>,\n  style?: string | null\n) => {\n  const value =\n    style !== null && typeof style !== 'undefined'\n      ? style.toString()\n      : descriptor.initialValue\n\n  // TODO: finish tokenizer\n  return value\n}\n","export type TreeNodeChildren = Array<TreeNode>\n\nexport interface TreeNode {\n  __v_isTreeNode: boolean\n  _children: TreeNodeChildren\n  children: TreeNodeChildren\n  parent: TreeNode | null\n  root: TreeNode | null\n  prev: TreeNode | null\n  next: TreeNode | null\n  instance: any\n  hasChildren(): boolean\n  appendChild(child: TreeNode): void\n  prependChild(child: TreeNode): void\n  removeChild(child: TreeNode): void\n  append(): void\n  prepend(): void\n  remove(): void\n}\n\nexport function isTreeNode(value: any): value is TreeNode {\n  return value ? value.__v_isTreeNode === true : false\n}\n\nexport function isEndNode(node) {\n  return node.parent && !node.next && !node.hasChildren()\n}\n\nexport function createTreeNode(options?) {\n  const treeNode: TreeNode = {\n    __v_isTreeNode: true,\n    _children: options.children || [],\n    parent: null,\n    prev: null,\n    next: null,\n    instance: options.instance || null,\n    set children(value) {\n      treeNode._children = value\n    },\n    get children() {\n      return treeNode._children || []\n    },\n    get root() {\n      return getRoot(this)\n    },\n    hasChildren,\n    appendChild,\n    prependChild,\n    removeChild,\n    append,\n    prepend,\n    remove\n  }\n\n  function getRoot(node) {\n    if (node.parent) {\n      return getRoot(node.parent)\n    } else {\n      return node\n    }\n  }\n\n  function hasChildren() {\n    return Array.isArray(treeNode._children) && treeNode._children.length\n      ? true\n      : false\n  }\n\n  function appendChild(child) {\n    if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n\n    const prev = treeNode._children[treeNode._children.length - 1] || null\n    if (prev && isTreeNode(prev)) {\n      _setSibling(prev, prev.prev, child)\n    }\n\n    Array.isArray(treeNode._children) && treeNode._children.push(child)\n\n    _setParent(child, treeNode)\n    _setSibling(child, prev, null)\n  }\n\n  function prependChild(child) {\n    if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n  }\n\n  function removeChild(child) {\n    if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n  }\n\n  function append() {}\n\n  function prepend() {}\n\n  function remove() {}\n\n  return treeNode\n}\n\nfunction _setParent(child: TreeNode, parent): void {\n  child.parent = parent\n}\n\nfunction _setSibling(\n  node: TreeNode,\n  prev: TreeNode | null,\n  next: TreeNode | null\n): void {\n  node.prev = prev\n  node.next = next\n}\n\nexport function connectChildren(node) {\n  console.log('connectChildren', node)\n  if (node.hasChildren()) {\n    node._children.map((child, index) => {\n      _setParent(child, node)\n      _setSibling(child, node._children[index - 1], node._children[index + 1])\n      connectChildren(child)\n    })\n  }\n}\n","import { createCSSDeclaration } from '../css'\nimport { CanvasElement } from '../element'\nimport { TreeNode, createTreeNode } from '../tree-node'\n\nexport type RenderStyle = {\n  backgroundColor: string\n  color: string\n  // width: number\n  // height: number\n  // paddingWidth: number\n  // paddingHeight: number\n  // paddingTop: number\n  // paddingBottom: number\n  // paddingLeft: number\n  // paddingRight: number\n  // marginLeft: number\n  // marginRight: number\n  // marginTop: number\n  // marginBottom: number\n  // contentWidth: number\n  // contentHeight: number\n  // fullBoxWidth: number\n  // fullBoxHeight: number\n  // lineCap: string // butt round square\n  // visible: boolean\n}\n\nexport interface RenderObject {\n  root: RenderObject | null\n  container: RenderObject | null\n  nextSibling: RenderObject | null\n  prevSibling: RenderObject | null\n  children: RenderObject[]\n  element: CanvasElement\n  node: TreeNode\n  renderStyle: RenderStyle\n  createRenderStyle(elm: CanvasElement): void\n  updateRenderStyle(): void\n  layout(): void\n  appendChild(child: RenderObject): void\n}\n\nexport function createRenderObject(element, options = {}): RenderObject {\n  let renderObject = {\n    __v_isRenderObject: true,\n    options,\n    root: null,\n    container: null,\n    nextSibling: null,\n    prevSibling: null,\n    children: [],\n    element,\n    node: null,\n    renderStyle: createRenderStyle(element),\n    createRenderStyle,\n    updateRenderStyle,\n    layout,\n    reflow,\n    appendChild\n  }\n\n  let treeNode = createTreeNode({ instance: renderObject })\n  renderObject.node = treeNode\n\n  Object.defineProperty(renderObject, 'root', {\n    get() {\n      return treeNode.root.instance\n    }\n  })\n\n  Object.defineProperty(renderObject, 'container', {\n    get() {\n      return treeNode.parent ? treeNode.parent.instance : null\n    }\n  })\n\n  Object.defineProperty(renderObject, 'prevSibling', {\n    get() {\n      return treeNode.prev ? treeNode.prev.instance : null\n    }\n  })\n\n  Object.defineProperty(renderObject, 'nextSibling', {\n    get() {\n      return treeNode.next ? treeNode.next.instance : null\n    }\n  })\n\n  Object.defineProperty(renderObject, 'children', {\n    get() {\n      return treeNode.children.map((item) => item.instance)\n    }\n  })\n\n  function createRenderStyle(elm) {\n    let renderStyle = createCSSDeclaration(elm.styles)\n    console.log('renderStyle', elm, elm.styles, renderStyle)\n    return renderStyle\n  }\n\n  function updateRenderStyle() {}\n\n  function layout() {}\n\n  function reflow() {}\n\n  function appendChild(child) {\n    treeNode.appendChild(child.node)\n  }\n\n  return renderObject\n}\n","import { Color } from '../css/types/color'\nimport { CanvasElement } from '../element'\n\nexport type RenderConfigurations = RenderOptions & {\n  backgroundColor: Color | null\n}\n\nexport interface RenderOptions {\n  canvas?: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  dpr?: number\n  width: number\n  height: number\n}\n\nexport interface CanvasRenderer {\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  dpr?: number\n  render(): void\n}\n\nexport function createRenderer(options: RenderConfigurations): CanvasRenderer {\n  let renderer: CanvasRenderer = {\n    canvas: options.canvas,\n    ctx: options.ctx,\n    dpr: options.dpr || 1,\n    render() {}\n  }\n\n  return renderer\n}\n","import { CanvasElement } from '.'\n\ninterface ViewElement extends CanvasElement {\n  paint(): void\n}\n\nexport function toViewElement(element: CanvasElement): ViewElement {\n  function paint() {\n    const renderer = this.getRenderer()\n\n    if (this.options.render) {\n      this.options.render(renderer.getCtx(), renderer.getCanvas(), this)\n    } else {\n      renderer._drawBackground(this)\n      renderer._drawBox(this)\n    }\n  }\n\n  element.paint = paint\n\n  return element\n}\n","import { isAuto, isExact } from '../../utils'\nimport { CanvasElement } from '.'\nimport { CanvasRenderer } from '../render'\nimport STYLE_CONSTANT, { ElementStyleType } from '../styleConstant'\n\ntype TextOptions = {}\n\ntype Layout = {}\n\ntype TextLine = {\n  text: string\n  layout: Layout\n}\n\nexport interface TextElement extends CanvasElement {\n  // layout: any\n  // lines: TextLine[]\n  // debugColor: string\n  paint(): void\n}\n\nexport function toTextElement(element: CanvasElement): TextElement {\n  function paint() {\n    // const renderer = this.getRenderer()\n    // renderer._drawBackground(this)\n    // renderer._drawText(tetxt)\n    // renderer._drawBox(text)\n  }\n\n  element.debugColor = 'blue'\n  element.paint = paint\n\n  return element\n}\n","export const curry = (fn) => {\n  return function curried(...args) {\n    if (args.length >= fn.length) {\n      return fn.apply(this, args)\n    } else {\n      return function (...args2) {\n        return curried.apply(this, args.concat(args2))\n      }\n    }\n  }\n}\n\nexport const pipe = function (funcs) {\n  let len = funcs.length\n  let index = 0\n  let result\n  return function f1(...args) {\n    // 第一次args是传进来的参数，之后args==result\n    result = funcs[index].apply(this, args)\n    if (index >= len - 1) {\n      // 重置下标为0\n      index = 0\n      return result\n    }\n    index++\n    return f1.call(null, result)\n  }\n}\n// compose的实现\nexport const compose = function (args) {\n  return pipe(args.reverse())\n}\n","import STYLE_CONSTANT, { ElementStyleType } from '../styleConstant'\nimport { TreeNode, createTreeNode } from '../tree-node'\nimport {\n  isAuto,\n  isOuter,\n  isExact,\n  parseOuter,\n  findRelativeTo,\n  floor,\n  isArray,\n  mergeDeep,\n  isString,\n  isNumber,\n  extend\n} from '../../utils'\nimport { toViewElement } from './view'\nimport { toTextElement } from './text'\nimport { compose, curry, pipe } from '../../utils/fp'\nimport { VISIBILITY } from '../css/property-descriptors/visibility'\nimport { RenderableElement, createRenderableElement } from './renderableElement'\nimport { CanvasRenderer } from '../render'\nimport { Context } from '../context'\nimport { RenderObject, createRenderObject } from '../render/renderObject'\n\nexport const DEFAULT_CONTAINER = {\n  styles: {},\n  renderStyles: {\n    width: 0,\n    height: 0,\n    paddingWidth: 0,\n    paddingHeight: 0,\n    paddingTop: 0,\n    paddingBottom: 0,\n    paddingLeft: 0,\n    paddingRight: 0,\n    marginLeft: 0,\n    marginRight: 0,\n    marginTop: 0,\n    marginBottom: 0,\n    borderTopWidth: 0,\n    borderBottomWidth: 0,\n    borderLeftWidth: 0,\n    borderRightWidth: 0,\n    contentWidth: 0,\n    contentHeight: 0,\n    fullBoxWidth: 0,\n    fullBoxHeight: 0,\n    lineCap: 'butt',\n    visible: true\n  },\n  layout: {\n    x: 0,\n    y: 0,\n    contentX: 0,\n    contentY: 0\n  }\n}\n\n// export enum ElementTypes {\n//   root = 'root',\n//   view = 'view',\n//   text = 'text',\n//   img = 'img'\n// }\n\ntype ExtendStyles = {\n  textAlign?: string\n  lineHeight?: number\n  fontSize?: number\n  color?: string\n  fontFamily?: string\n  alignItems?: string\n  alignSelf?: string\n  visible?: boolean\n}\n\nexport type Layout = {\n  x: number\n  y: number\n  contentX?: number\n  contentY?: number\n}\n\n// type DefaultContainer = {\n//   styles: ElementStyleType\n//   renderStyles: RenderStyle\n//   layout: Layout\n// }\n\n// type CanvasElementContainer = CanvasElement | DefaultContainer\n\nexport type ElementOptions = {\n  style?: ElementStyleType\n  text?: string\n}\n\nexport function isCanvasElement(value: any): value is CanvasElement {\n  return value ? value.__v_isCanvasElement === true : false\n}\n\nexport interface CanvasElement {\n  __v_isCanvasElement: boolean\n  type: string\n  options: ElementOptions\n  styles: ElementStyleType\n  debugColor: string | null\n  context: Context\n  root: CanvasElement | null\n  container: CanvasElement | null\n  nextSibling: CanvasElement | null\n  prevSibling: CanvasElement | null\n  children: CanvasElement[]\n  node: TreeNode\n  renderObject: RenderObject\n  appendChild(child: CanvasElement): void\n  hasChildren(): boolean\n  attach(parent: CanvasElement): void\n  hasRootElement(): boolean\n  getRootElement(): CanvasElement\n  isVisible(): boolean\n}\n\nexport function createBaseElement(\n  context: Context,\n  type: string,\n  options: ElementOptions = {},\n  children?: CanvasElement[] | string\n): CanvasElement {\n  let element: CanvasElement = {\n    __v_isCanvasElement: true,\n    type,\n    options,\n    styles: options.style || {},\n    context,\n    root: null,\n    container: null,\n    nextSibling: null,\n    prevSibling: null,\n    children: [],\n    node: null,\n    renderObject: null,\n    debugColor: null,\n    appendChild,\n    hasChildren,\n    attach,\n    hasRootElement,\n    getRootElement,\n    isVisible\n  }\n\n  let treeNode = createTreeNode({ instance: element })\n  element.node = treeNode\n\n  let renderObject = createRenderObject(element)\n  element.renderObject = renderObject\n\n  Object.defineProperty(element, 'root', {\n    get() {\n      return treeNode.root.instance\n    }\n  })\n\n  Object.defineProperty(element, 'container', {\n    get() {\n      return treeNode.parent ? treeNode.parent.instance : null\n    }\n  })\n\n  Object.defineProperty(element, 'prevSibling', {\n    get() {\n      return treeNode.prev ? treeNode.prev.instance : null\n    }\n  })\n\n  Object.defineProperty(element, 'nextSibling', {\n    get() {\n      return treeNode.next ? treeNode.next.instance : null\n    }\n  })\n\n  Object.defineProperty(element, 'children', {\n    get() {\n      if (isString(children)) return children\n      return treeNode.children.map((item) => item.instance)\n    }\n  })\n\n  function appendChild(child) {\n    treeNode.appendChild(child.node)\n\n    // attach to renderTree\n    if (element.hasRootElement()) {\n      child.attach(element)\n    }\n  }\n\n  function attach(parent) {\n    parent.renderObject.appendChild(element.renderObject)\n    if (element.hasChildren()) {\n      element.children.forEach((child) => {\n        child.attach(element)\n      })\n    }\n  }\n\n  function hasChildren() {\n    return element.node.hasChildren()\n  }\n\n  function hasRootElement() {\n    return (\n      treeNode.root &&\n      treeNode.root.instance &&\n      treeNode.root.instance.type === 'body'\n    )\n  }\n\n  function getRootElement() {\n    if (element.hasRootElement()) {\n      return treeNode.root.instance\n    }\n\n    return null\n  }\n\n  function isVisible(): boolean {\n    return true\n    // return (\n    //   this.styles.display > 0 &&\n    //   this.styles.opacity > 0 &&\n    //   this.style.visibility === VISIBILITY.VISIBLE\n    // )\n  }\n\n  if (element.type === 'body') {\n    element.styles = {\n      width: '100%',\n      height: '100%'\n    } as ElementStyleType\n  }\n\n  return element\n}\n\nexport function createElementAPI(context): Function {\n  return function createElement(\n    type: string,\n    options: ElementOptions = {},\n    children?: CanvasElement[] | string\n  ): CanvasElement {\n    switch (type) {\n      case 'text':\n        return compose([toTextElement, createBaseElement])(\n          context,\n          type,\n          options,\n          children\n        )\n      default:\n        return compose([toViewElement, createBaseElement])(\n          context,\n          type,\n          options,\n          children\n        )\n    }\n  }\n}\n\n// function _initStyles(elm: CanvasElement): ElementStyleType {\n//   let styles = mergeDeep(\n//     {},\n//     _getDefaultStyles(),\n//     _getExtendStyles(elm),\n//     elm.options.style || {}\n//   )\n\n//   if (elm.type === 'root') {\n//     styles.width = '100%'\n//     styles.height = '100%'\n//   }\n\n//   completeStyles(styles, elm.container.styles, true)\n//   return styles\n// }\n\n// function _getDefaultStyles() {\n//   return STYLE_CONSTANT.DEFAULT_STYLES\n// }\n\n// function _getExtendStyles(elm) {\n//   let extendStyles = {} as ExtendStyles\n//   const extendKeys = [\n//     'textAlign',\n//     'fontFamily',\n//     'fontWeight',\n//     'fontSize',\n//     'lineHeight',\n//     'wordSpacing',\n//     'letterSpacing',\n//     'color',\n//     'alignItems',\n//     'visibility'\n//   ]\n\n//   extendKeys.map((key) => {\n//     const value = elm.container.styles[key]\n//     if (value) extendStyles[key] = value\n//   })\n\n//   return extendStyles\n// }\n\n// function parsePaddingBox(rawBoxValue, parentBoxValue, margin): number {\n//   let result = 0\n\n//   if (isAuto(rawBoxValue)) {\n//   } else if (isOuter(rawBoxValue)) {\n//     result = parseOuter(rawBoxValue) * parentBoxValue - margin\n//   } else {\n//     result = rawBoxValue\n//   }\n\n//   return result\n// }\n\n// function _getRenderStyles(elm: CanvasElement): RenderStyle {\n//   let renderStyles = {} as RenderStyle\n//   extend(renderStyles, elm.styles)\n//   const parentWidth = elm.container.renderStyles.contentWidth\n//   const parentHeight = elm.container.renderStyles.contentHeight\n\n//   renderStyles.paddingWidth = parsePaddingBox(\n//     elm.styles.width,\n//     parentWidth,\n//     renderStyles.marginLeft + renderStyles.marginRight\n//   )\n\n//   renderStyles.paddingHeight = parsePaddingBox(\n//     elm.styles.height,\n//     parentHeight,\n//     renderStyles.marginTop + renderStyles.marginBottom\n//   )\n\n//   // 初始化contentWidth\n//   // https://www.w3schools.com/css/css_boxmodel.asp\n\n//   renderStyles.contentWidth = calcContentBox(renderStyles, [\n//     'paddingWidth',\n//     'paddingLeft',\n//     'paddingRight'\n//   ])\n\n//   renderStyles.contentHeight = calcContentBox(renderStyles, [\n//     'paddingHeight',\n//     'paddingTop',\n//     'paddingBottom'\n//   ])\n\n//   renderStyles.fullBoxWidth = calcFullBox(renderStyles, [\n//     'contentWidth',\n//     'paddingLeft',\n//     'paddingRight',\n//     'borderLeftWidth',\n//     'borderRightWidth',\n//     'marginLeft',\n//     'marginRight'\n//   ])\n\n//   renderStyles.fullBoxHeight = calcFullBox(renderStyles, [\n//     'contentHeight',\n//     'paddingTop',\n//     'paddingBottom',\n//     'borderTopWidth',\n//     'borderBottomWidth',\n//     'marginTop',\n//     'marginBottom'\n//   ])\n\n//   renderStyles.width =\n//     renderStyles.paddingWidth +\n//     renderStyles.marginLeft +\n//     renderStyles.marginRight +\n//     getTotalBorderWidth(renderStyles)\n//   renderStyles.height =\n//     renderStyles.paddingHeight +\n//     renderStyles.marginTop +\n//     renderStyles.marginBottom +\n//     getTotalBorderHeight(renderStyles)\n\n//   console.log('renderStyles', renderStyles)\n\n//   return renderStyles\n// }\n\n// function getContainerLayout(elm: CanvasElement): Layout {\n//   const container = elm.container\n\n//   return {\n//     width: container.renderStyles.width,\n//     height: container.renderStyles.height,\n//     paddingTop: container.renderStyles.paddingTop,\n//     paddingBottom: container.renderStyles.paddingBottom,\n//     paddingLeft: container.renderStyles.paddingLeft,\n//     paddingRight: container.renderStyles.paddingRight,\n//     marginLeft: container.renderStyles.marginLeft,\n//     marginRight: container.renderStyles.marginRight,\n//     marginTop: container.renderStyles.marginTop,\n//     marginBottom: container.renderStyles.marginBottom,\n//     x: container.layout.x,\n//     y: container.layout.y,\n//     contentX: container.layout.contentX,\n//     contentY: container.layout.contentY,\n//     contentWidth: container.layout.contentWidth,\n//     contentHeight: container.layout.contentHeight\n//   }\n// }\n\n// function getTotalBorderWidth(renderStyles) {\n//   return renderStyles.borderLeftWidth + renderStyles.borderRightWidth\n// }\n\n// function getTotalBorderHeight(renderStyles) {\n//   return renderStyles.borderTopWidth + renderStyles.borderBottomWidth\n// }\n\n// const mapValues = (target, props) => {\n//   let arr = []\n//   props.map((prop) => arr.push(target[prop]))\n//   return arr\n// }\n\n// const calcContentBox = (\n//   renderStyles: RenderStyle,\n//   props: [string, string, string]\n// ) => curry((a, b, c) => a - b - c)(...mapValues(renderStyles, props))\n\n// const calcFullBox = (\n//   renderStyles: RenderStyle,\n//   props: [string, string, string, string, string, string, string]\n// ) =>\n//   curry((a, b, c, d, e, f, g) => a + b + c + d + e + f + g)(\n//     ...mapValues(renderStyles, props)\n//   )\n","import { createAppAPI } from './core/createApp'\nimport { createRenderer } from './core/renderer'\nimport { createNodeOps } from './core/nodeOps'\nimport { h } from './core/h'\nimport { createDoCanvas } from './canvas'\n\nconst XCanvas = {\n  createAppAPI,\n  createNodeOps,\n  createRenderer,\n  h,\n  createDoCanvas\n}\n\nexport default XCanvas\n","import { RendererOptions } from './renderer'\n\nexport function createNodeOps(createElement): RendererOptions {\n  return {\n    insert: (child, parent, anchor) => {\n      if (!child) {\n        return\n      }\n\n      parent.appendChild(child)\n    },\n\n    remove: (child) => {},\n\n    createElement: (tag, props) => {\n      props = props || {}\n      const { style } = props\n\n      switch (tag) {\n        default:\n          return createElement('view', { style })\n      }\n    },\n\n    createText: (text) => {\n      // console.log('createText', text)\n      return createElement('text', {}, text)\n    },\n\n    createComment: (text) => {},\n\n    setText: (node, text) => {},\n\n    setElementText: (el, text) => {},\n\n    parentNode: (node) => node.parentNode as Element | null,\n\n    nextSibling: (node) => node.nextSibling\n\n    //   querySelector: (selector) => {},\n  }\n}\n","import {\n  VNode,\n  VNodeProps,\n  VNodeArrayChildren,\n  isSameVNodeType,\n  normalizeVNode\n} from './vnode'\nimport { createAppAPI } from './createApp'\nimport { ComponentInternalInstance, Data } from './components'\nimport { flushPreFlushCbs, flushPostFlushCbs } from './scheduler'\nimport { EMPTY_OBJ, EMPTY_ARR, PatchFlags, ShapeFlags } from '../utils'\n\nexport type RootRenderFunction<HostElement = RendererElement> = (\n  vnode: VNode | null,\n  container: HostElement,\n  isSVG?: boolean\n) => void\n\ntype MountChildrenFn = (\n  children: VNodeArrayChildren,\n  container: RendererElement,\n  anchor: RendererNode | null,\n  parentComponent: ComponentInternalInstance | null,\n  start?: number\n) => void\n\ntype NextFn = (vnode: VNode) => RendererNode | null\n\ntype RemoveFn = (vnode: VNode) => void\n\ntype UnmountChildrenFn = (\n  children: VNode[],\n  parentComponent: ComponentInternalInstance | null,\n  // parentSuspense: SuspenseBoundary | null,\n  doRemove?: boolean,\n  optimized?: boolean,\n  start?: number\n) => void\n\ntype ProcessTextOrCommentFn = (\n  n1: VNode | null,\n  n2: VNode,\n  container: RendererElement,\n  anchor: RendererNode | null\n) => void\n\nexport interface RendererOptions<\n  HostNode = RendererNode,\n  HostElement = RendererElement\n> {\n  patchProp(\n    el: HostElement,\n    key: string,\n    prevValue: any,\n    nextValue: any,\n    prevChildren?: VNode<HostNode, HostElement>[],\n    parentComponent?: ComponentInternalInstance | null,\n    unmountChildren?: UnmountChildrenFn\n  ): void\n  insert(el: HostNode, parent: HostElement, anchor?: HostNode | null): void\n  remove(el: HostNode): void\n  createElement(\n    type: string,\n    vnodeProps?: (VNodeProps & { [key: string]: any }) | null\n  ): HostElement\n  createText(text: string): HostNode\n  createComment(text: string): HostNode\n  setText(node: HostNode, text: string): void\n  setElementText(node: HostElement, text: string): void\n  parentNode(node: HostNode): HostElement | null\n  nextSibling(node: HostNode): HostNode | null\n  // querySelector?(selector: string): HostElement | null\n}\n\nexport interface RendererNode {\n  [key: string]: any\n}\n\nexport interface RendererElement extends RendererNode {}\n\ntype PatchFn = (\n  n1: VNode | null, // null means this is a mount\n  n2: VNode,\n  container: RendererElement,\n  anchor?: RendererNode | null,\n  parentComponent?: ComponentInternalInstance | null\n) => void\n\ntype PatchChildrenFn = (\n  n1: VNode | null,\n  n2: VNode,\n  container: RendererElement,\n  anchor: RendererNode | null,\n  parentComponent: ComponentInternalInstance | null\n) => void\n\ntype UnmountFn = (\n  vnode: VNode,\n  parentComponent: ComponentInternalInstance | null,\n  doRemove?: boolean,\n  optimized?: boolean\n) => void\n\nexport function createRenderer(options: RendererOptions): any {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling\n  } = options\n\n  const patch: PatchFn = (\n    n1,\n    n2,\n    container,\n    anchor = null,\n    parentComponent = null\n  ) => {\n    // console.log('patch', n1, n2, container)\n    if (n1 === n2) {\n      return\n    }\n\n    // patching & not same type, unmount old tree\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      anchor = getNextHostNode(n1)\n      unmount(n1, parentComponent, true)\n      n1 = null\n    }\n\n    const { type } = n2\n    switch (type) {\n      case 'Text':\n        processText(n1, n2, container, anchor)\n        break\n      // case 'Comment':\n      //   processCommentNode(n1, n2, container, anchor)\n      //   break\n      default:\n        processElement(n1, n2, container, anchor, parentComponent)\n    }\n  }\n\n  const processText: ProcessTextOrCommentFn = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(hostCreateText(n2.children as string), container, anchor)\n    } else {\n      if (n2.children !== n1.children) {\n        hostSetText(n2, n2.children as string)\n      }\n    }\n  }\n\n  const processElement = (\n    n1: VNode | null,\n    n2: VNode,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    if (n1 == null) {\n      mountElement(n2, container, anchor, parentComponent)\n    } else {\n      patchElement(n1, n2, parentComponent)\n    }\n  }\n\n  const mountElement = (\n    vnode: VNode,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    let el: RendererElement\n    const { type, props } = vnode\n    // console.log('mountElement', vnode, container, anchor, parentComponent)\n\n    el = vnode.el = hostCreateElement(vnode.type as string, props)\n\n    // mount children first, since some props may rely on child content\n    // being already rendered, e.g. `<select value>`\n\n    mountChildren(\n      vnode.children as VNodeArrayChildren,\n      el,\n      null,\n      parentComponent\n    )\n\n    // props\n    if (props) {\n      // for (const key in props) {\n      //   if (key !== 'value' && !isReservedProp(key)) {\n      //     hostPatchProp(\n      //       el,\n      //       key,\n      //       null,\n      //       props[key],\n      //       isSVG,\n      //       vnode.children as VNode[],\n      //       parentComponent,\n      //       parentSuspense,\n      //       unmountChildren\n      //     )\n      //   }\n      // }\n\n      if ('value' in props) {\n        // hostPatchProp(el, 'value', null, props.value)\n      }\n    }\n\n    hostInsert(el, container, anchor)\n  }\n\n  const mountChildren: MountChildrenFn = (\n    children,\n    container,\n    anchor,\n    parentComponent,\n    start = 0\n  ) => {\n    // console.log('mountChildren', children, container, anchor, parentComponent)\n    if (typeof children === 'string') {\n      patch(null, normalizeVNode(children), container, anchor, parentComponent)\n    } else {\n      for (let i = start; i < children.length; i++) {\n        const child = normalizeVNode(children[i])\n        patch(null, child, container, anchor, parentComponent)\n      }\n    }\n  }\n\n  const patchElement = (\n    n1: VNode,\n    n2: VNode,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    const el = (n2.el = n1.el!)\n\n    const oldProps = n1.props || EMPTY_OBJ\n    const newProps = n2.props || EMPTY_OBJ\n\n    patchChildren(n1, n2, el, null, parentComponent)\n\n    // text\n    if (n1.children !== n2.children) {\n      hostSetElementText(el, n2.children as string)\n    }\n\n    patchProps(el, n2, oldProps, newProps, parentComponent)\n  }\n\n  const patchChildren: PatchChildrenFn = (\n    n1,\n    n2,\n    container,\n    anchor,\n    parentComponent\n  ) => {\n    const c1 = n1 && n1.children\n    const c2 = n2.children\n\n    patchUnkeyedChildren(\n      c1 as VNode[],\n      c2 as VNodeArrayChildren,\n      container,\n      anchor,\n      parentComponent\n    )\n  }\n\n  const patchUnkeyedChildren = (\n    c1: VNode[],\n    c2: VNodeArrayChildren,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    c1 = c1 || EMPTY_ARR\n    c2 = c2 || EMPTY_ARR\n    const oldLength = c1.length\n    const newLength = c2.length\n    const commonLength = Math.min(oldLength, newLength)\n    let i\n    for (i = 0; i < commonLength; i++) {\n      const nextChild = normalizeVNode(c2[i])\n      patch(c1[i], nextChild, container, null, parentComponent)\n    }\n    if (oldLength > newLength) {\n      // remove old\n      unmountChildren(c1, parentComponent, true, false, commonLength)\n    } else {\n      // mount new\n      mountChildren(c2, container, anchor, parentComponent, commonLength)\n    }\n  }\n\n  const patchProps = (\n    el: RendererElement,\n    vnode: VNode,\n    oldProps: Data,\n    newProps: Data,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    if (oldProps !== newProps) {\n      if (oldProps !== EMPTY_OBJ) {\n        for (const key in oldProps) {\n          hostPatchProp(\n            el,\n            key,\n            oldProps[key],\n            null,\n            vnode.children as VNode[],\n            parentComponent,\n            unmountChildren\n          )\n        }\n      }\n      for (const key in newProps) {\n        const next = newProps[key]\n        const prev = oldProps[key]\n        // defer patching value\n        if (next !== prev && key !== 'value') {\n          hostPatchProp(\n            el,\n            key,\n            prev,\n            next,\n            vnode.children as VNode[],\n            parentComponent,\n            unmountChildren\n          )\n        }\n      }\n      if ('value' in newProps) {\n        hostPatchProp(el, 'value', oldProps.value, newProps.value)\n      }\n    }\n  }\n\n  const unmount: UnmountFn = (\n    vnode,\n    parentComponent,\n    doRemove = false,\n    optimized = false\n  ) => {\n    const { type, props, children } = vnode\n\n    unmountChildren(children as VNode[], parentComponent)\n\n    if (doRemove) {\n      remove(vnode)\n    }\n  }\n\n  const remove: RemoveFn = (vnode) => {\n    const performRemove = () => {\n      hostRemove(vnode)\n    }\n\n    performRemove()\n  }\n\n  const unmountChildren: UnmountChildrenFn = (\n    children,\n    parentComponent,\n    doRemove = false,\n    optimized = false,\n    start = 0\n  ) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, doRemove)\n    }\n  }\n\n  const getNextHostNode: NextFn = (vnode) => {\n    return hostNextSibling(vnode!)\n  }\n\n  const render: RootRenderFunction = (vnode, container) => {\n    // console.log('render:', vnode, container, container._vnode)\n\n    if (vnode == null) {\n      if (container._vnode) {\n        unmount(container._vnode, null, true)\n      }\n    } else {\n      patch(container._vnode || null, vnode, container, null, null)\n    }\n    flushPreFlushCbs()\n    flushPostFlushCbs()\n    container._vnode = vnode\n  }\n\n  return {\n    render,\n    createApp: createAppAPI(render)\n  }\n}\n","import { VNode, createVNode, VNodeArrayChildren, isVNode } from './vnode'\nimport { isObject, isArray } from '../utils'\n\nexport function h(type: any, propsOrChildren?: any, children?: any): VNode {\n  const l = arguments.length\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      // single vnode without props\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren])\n      }\n      // props without children\n      return createVNode(type, propsOrChildren)\n    } else {\n      // omit props\n      return createVNode(type, null, propsOrChildren)\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2)\n    } else if (l === 3 && isVNode(children)) {\n      children = [children]\n    }\n    return createVNode(type, propsOrChildren, children)\n  }\n}\n","import { createEngine } from './engine'\nimport { createRenderer } from './render'\nimport { createElementAPI } from './element'\n\nexport function createDoCanvas(options) {\n  const engine = createEngine()\n  const createElement = createElementAPI(engine)\n\n  let doCanvas = {\n    body: null,\n    engine,\n    renderer: createRenderer(options),\n    createElement: createElement\n  }\n\n  doCanvas.body = createElement('body')\n  engine.createRoot(doCanvas.body)\n  doCanvas.renderer.render()\n\n  return doCanvas\n}\n","import { CanvasElement } from './element'\nimport { RenderObject, createRenderObject } from './render/renderObject'\n\ninterface Engine {\n  rootRenderObject: RenderObject\n  createRoot(rootElm: CanvasElement): void\n  createRenderTree(rootElm: CanvasElement): void\n}\n\nexport function createEngine(): Engine {\n  let engine = {\n    rootRenderObject: null,\n    createRoot,\n    createRenderTree\n  }\n\n  function createRoot(rootElm) {\n    engine.createRenderTree(rootElm)\n  }\n\n  function createRenderTree(rootElm) {\n    engine.rootRenderObject = createRenderObject(rootElm)\n  }\n\n  return engine\n}\n"],"names":["Boolean","wx","getSystemInfoSync","err","EMPTY_OBJ","Object","freeze","EMPTY_ARR","onRE","isOn","key","test","isArray","Array","isFunction","val","isString","isObject","normalizeStyle","value","res","i","length","item","normalized","parseStringStyle","listDelimiterRE","propertyDelimiterRE","styleCommentRE","cssText","ret","replace","split","forEach","tmp","trim","normalizeClass","name_1","_a","Fragment","Symbol","for","Comment","isVNode","__v_isVNode","createVNode","type","props","children","patchFlag","cloned","cloneVNode","vnode","createTextVNode","normalizeChildren","klass","class","style","__v_skip","component","el","staticCount","appContext","ctx","createBaseVNode","extraProps","mergeRef","mergedProps","args","_i","arguments","toMerge","existing","incoming","includes","concat","mergeProps","map","deepCloneVNode","text","flag","normalizeVNode","child","slice","cloneIfMounted","String","uid","createAppAPI","render","rootComponent","rootProps","app","_uid","_component","_props","_container","_instance","mount","rootContainer","queue","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","RECURSION_LIMIT","flushPostFlushCbs","seen","deduped","to","from","pack","ar","l","prototype","call","Set","push","apply","Map","sort","a","b","getId","checkRecursiveUpdates","job","id","Infinity","fn","has","count","get","set","backgroundColor","name","initialValue","prefix","format","borderColorForSide","side","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","isNumberToken","token","isIdentToken","borderWidthForSide","parse","isDimensionToken","number","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","color","display","tokens","filter","reduce","bit","parseDisplayValue","fontSize","fontWeight","lineHeight","marginForSide","marginTop","marginRight","marginBottom","marginLeft","opacity","paddingForSide","paddingTop","paddingRight","paddingBottom","paddingLeft","textAlign","transform","transformFunction","SUPPORTED_TRANSFORM_FUNCTIONS","Error","values","matrix","arg","matrix3d","a1","b1","a2","b2","a4","b4","visibility","zIndex","auto","order","descriptor","toString","isTreeNode","__v_isTreeNode","createTreeNode","options","treeNode","_children","parent","prev","next","instance","root","getRoot","this","hasChildren","appendChild","_setSibling","_setParent","prependChild","removeChild","append","prepend","remove","node","createRenderObject","element","renderObject","__v_isRenderObject","container","nextSibling","prevSibling","renderStyle","createRenderStyle","updateRenderStyle","layout","reflow","elm","styles","console","log","defineProperty","createRenderer","canvas","dpr","toViewElement","paint","renderer","getRenderer","getCtx","getCanvas","_drawBackground","_drawBox","toTextElement","debugColor","compose","funcs","reverse","len","index","f1","result","createBaseElement","context","__v_isCanvasElement","hasRootElement","attach","getRootElement","isVisible","width","height","XCanvas","createNodeOps","createElement","insert","anchor","tag","createText","createComment","setText","setElementText","parentNode","hostInsert","hostRemove","hostPatchProp","patchProp","hostCreateElement","hostCreateText","hostSetText","hostSetElementText","hostNextSibling","patch","n1","n2","parentComponent","isSameVNodeType","getNextHostNode","unmount","processText","processElement","mountElement","patchElement","mountChildren","start","oldProps","newProps","patchChildren","patchProps","c1","c2","patchUnkeyedChildren","oldLength","newLength","commonLength","Math","min","nextChild","unmountChildren","doRemove","optimized","_vnode","cb","pre","splice","flushPreFlushCbs","createApp","h","propsOrChildren","createDoCanvas","engine","rootRenderObject","createRoot","rootElm","createRenderTree","createEngine","doCanvas","body"],"mappings":"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","x_google_ignoreList":[7]}