{"version":3,"file":"x-canvas.js","sources":["../../src/utils/general.ts","../../src/utils/boxModel.ts","../../src/utils/device.ts","../../src/utils/normalizeProp.ts","../../src/vnode.ts","../../src/createApp.ts","../../node_modules/tslib/tslib.es6.js","../../src/scheduler.ts","../../src/canvas/styleConstant.ts","../../src/canvas/treeNode.ts","../../src/canvas/completeStyles.ts","../../src/canvas/line.ts","../../src/canvas/flexBox.ts","../../src/canvas/element.ts","../../src/canvas/text.ts","../../src/canvas/view.ts","../../src/utils/traversal.ts","../../src/canvas/renderer.ts","../../src/utils/throttle.ts","../../src/canvas/weapp-adapter.ts","../../src/index.ts","../../src/nodeOps.ts","../../src/renderer.ts","../../src/h.ts","../../src/canvas/layer.ts"],"sourcesContent":["export const EMPTY_OBJ = Object.freeze({})\nexport const EMPTY_ARR = Object.freeze([])\n\nexport const NOOP = () => {}\n\n/**\n * Always return false.\n */\nexport const NO = () => false\n\nconst onRE = /^on[^a-z]/\nexport const isOn = (key: string) => onRE.test(key)\n\nexport const isModelListener = (key: string) => key.startsWith('onUpdate:')\n\nexport const extend = Object.assign\n\nexport const remove = <T>(arr: T[], el: T) => {\n  const i = arr.indexOf(el)\n  if (i > -1) {\n    arr.splice(i, 1)\n  }\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (\n  val: object,\n  key: string | symbol\n): key is keyof typeof val => hasOwnProperty.call(val, key)\n\nexport const isExact = (num: unknown) => {\n  return typeof num === 'number'\n}\n\nexport const isAuto = (num: unknown) => {\n  return num === 'auto'\n}\n\nexport const isOuter = (num: unknown) => {\n  if (typeof num !== 'string') return\n  return num.match('%')\n}\n\nexport const parseOuter = (num: string) => {\n  let _n = parseInt(num.replace('%', ''))\n  return isNaN(_n) || _n < 0 ? 0 : _n / 100\n}\n\nexport const isArray = Array.isArray\nexport const isMap = (val: unknown): val is Map<any, any> =>\n  toTypeString(val) === '[object Map]'\nexport const isSet = (val: unknown): val is Set<any> =>\n  toTypeString(val) === '[object Set]'\n\nexport const isDate = (val: unknown): val is Date =>\n  toTypeString(val) === '[object Date]'\nexport const isRegExp = (val: unknown): val is RegExp =>\n  toTypeString(val) === '[object RegExp]'\nexport const isFunction = (val: unknown): val is Function =>\n  typeof val === 'function'\nexport const isString = (val: unknown): val is string => typeof val === 'string'\nexport const isSymbol = (val: unknown): val is symbol => typeof val === 'symbol'\nexport const isObject = (val: unknown): val is Record<any, any> =>\n  val !== null && typeof val === 'object'\n\nexport const isPromise = <T = any>(val: unknown): val is Promise<T> => {\n  return isObject(val) && isFunction(val.then) && isFunction(val.catch)\n}\n\nexport const objectToString = Object.prototype.toString\nexport const toTypeString = (value: unknown): string =>\n  objectToString.call(value)\n\nexport const toRawType = (value: unknown): string => {\n  // extract \"RawType\" from strings like \"[object RawType]\"\n  return toTypeString(value).slice(8, -1)\n}\n\nexport const isPlainObject = (val: unknown): val is object =>\n  toTypeString(val) === '[object Object]'\n\nexport const isIntegerKey = (key: unknown) =>\n  isString(key) &&\n  key !== 'NaN' &&\n  key[0] !== '-' &&\n  '' + parseInt(key, 10) === key\n","import { CanvasElement, isCanvasElement } from '../canvas/element'\nimport { TreeNodeChildren } from '../canvas/treeNode'\nimport { isArray } from './general'\n\nexport function floor(val) {\n  return (0.5 + val) << 0\n}\n\nexport function walk(element, callback) {\n  let _continue = false // 是否跳过当前节点以及后面的节点\n  let _next = false // 是否跳过当前节点数，子元素都不会遍历\n  const _callContinue = () => (_continue = true)\n  const _callNext = () => (_next = true)\n  if (element != null) {\n    const stack: CanvasElement[] = []\n    let item: CanvasElement | undefined | null = null\n    let children: TreeNodeChildren = []\n    stack.push(element)\n    while (stack.length !== 0) {\n      console.log('stack', stack)\n      item = stack.pop()\n      console.log('item', item)\n      if (!item) break\n      callback(item, _callContinue, _callNext)\n      if (!_next && item) {\n        children = item.children\n        console.log('children', children)\n        if (!isArray(children)) break\n        for (let i = children.length - 1; i >= 0; i--) {\n          if (!_continue) {\n            stack.push(children[i])\n          } else {\n            // 复位\n            _continue = false\n          }\n        }\n      } else {\n        // 复位\n        _next = false\n      }\n    }\n  }\n}\n\nexport function walkParent(element, callback) {\n  if (!element) return\n  let cur = element\n  let stop = false\n  const callbreak = () => {\n    stop = true\n  }\n  while (cur.parent) {\n    callback(cur.parent, callbreak)\n    if (stop) {\n      break\n    }\n    cur = cur.parent\n  }\n}\n\nexport function findRelativeTo(element) {\n  if (element.isInFlow()) return element.parent\n  if (element.renderStyles.position === 'fixed') return element.root\n  let relativeTo = null\n  walkParent(element, (parent) => {\n    if (parent.renderStyles.position !== 'static' && !relativeTo) {\n      relativeTo = parent\n    }\n  })\n  if (!relativeTo) {\n    relativeTo = element.root\n  }\n  return relativeTo\n}\n","export const isWX = (function () {\n  try {\n    return Boolean(wx.getSystemInfoSync)\n  } catch (err) {\n    return false\n  }\n})()\n","import { isString, isArray, isObject } from './general'\n\nexport type NormalizedStyle = Record<string, string | number>\n\nexport function normalizeStyle(\n  value: unknown\n): NormalizedStyle | string | undefined {\n  if (isArray(value)) {\n    const res: NormalizedStyle = {}\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i]\n      const normalized = isString(item)\n        ? parseStringStyle(item)\n        : (normalizeStyle(item) as NormalizedStyle)\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key]\n        }\n      }\n    }\n    return res\n  } else if (isString(value)) {\n    return value\n  } else if (isObject(value)) {\n    return value\n  }\n}\n\nconst listDelimiterRE = /;(?![^(]*\\))/g\nconst propertyDelimiterRE = /:([^]+)/\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs\n\nexport function parseStringStyle(cssText: string): NormalizedStyle {\n  const ret: NormalizedStyle = {}\n  cssText\n    .replace(styleCommentRE, '')\n    .split(listDelimiterRE)\n    .forEach((item) => {\n      if (item) {\n        const tmp = item.split(propertyDelimiterRE)\n        tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim())\n      }\n    })\n  return ret\n}\n\nexport function normalizeClass(value: unknown): string {\n  let res = ''\n  if (isString(value)) {\n    res = value\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i])\n      if (normalized) {\n        res += normalized + ' '\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + ' '\n      }\n    }\n  }\n  return res.trim()\n}\n","import {\n  isOn,\n  isString,\n  isObject,\n  isArray,\n  isFunction,\n  normalizeClass,\n  normalizeStyle\n} from './utils'\nimport { RendererNode } from './renderer'\nimport { ComponentInternalInstance, Data } from './components'\nimport { AppContext } from './createApp'\n\nexport const Fragment = Symbol.for('v-fgt') as any as {\n  __isFragment: true\n  new (): {\n    $props: VNodeProps\n  }\n}\nexport const Text = Symbol.for('v-txt')\nexport const Comment = Symbol.for('v-cmt')\n\nexport type VNodeTypes =\n  | string\n  | VNode\n  | typeof Text\n  | typeof Comment\n  | typeof Fragment\n\nexport type VNodeProps = {\n  key?: string | number | symbol\n  ref_for?: boolean\n  ref_key?: string\n}\n\ntype VNodeChildAtom =\n  | VNode\n  | string\n  | number\n  | boolean\n  | null\n  | undefined\n  | void\n\nexport type VNodeArrayChildren = Array<VNodeArrayChildren | VNodeChildAtom>\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null\n\nexport interface VNode<\n  HostNode = RendererNode,\n  ExtraProps = { [key: string]: any }\n> {\n  /**\n   * @internal\n   */\n  __v_isVNode: true\n\n  type: VNodeTypes\n  props: (VNodeProps & ExtraProps) | null\n  children: VNodeNormalizedChildren\n  component: ComponentInternalInstance | null\n\n  el: HostNode | null\n  /**\n   * number of elements contained in a static vnode\n   * @internal\n   */\n  staticCount: number\n\n  // application root node only\n  appContext: AppContext | null\n\n  /**\n   * @internal lexical scope owner instance\n   */\n  ctx: ComponentInternalInstance | null\n}\n\nexport function isVNode(value: any): value is VNode {\n  return value ? value.__v_isVNode === true : false\n}\n\nexport function isSameVNodeType(n1: VNode, n2: VNode): boolean {\n  return n1.type === n2.type\n}\n\nfunction createBaseVNode(\n  type: VNodeTypes,\n  props: (Data & VNodeProps) | null = null,\n  children: unknown = null,\n  patchFlag = 0\n) {\n  console.log('createBaseVNode', type, props, children)\n  const vnode = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type,\n    props,\n    children,\n    component: null,\n    el: null,\n    staticCount: 0,\n    appContext: null,\n    ctx: null\n  } as VNode\n\n  // if (type !== 'Text') {\n  //   normalizeChildren(vnode, children)\n  // }\n  return vnode\n}\n\nexport function createVNode(\n  type: VNodeTypes,\n  props: (Data & VNodeProps) | null = null,\n  children: unknown = null,\n  patchFlag: number = 0\n) {\n  console.log('createVNode', type, props, children)\n  if (isVNode(type)) {\n    const cloned = cloneVNode(type, props, true /* mergeRef: true */)\n    console.log('cloned', cloned)\n    if (children) {\n      normalizeChildren(cloned, children)\n    }\n    console.log('children', children)\n\n    return cloned\n  }\n\n  // class & style normalization.\n  if (props) {\n    // for reactive or proxy objects, we need to clone it to enable mutation.\n    // props = guardReactiveProps(props)!\n    let { class: klass, style } = props\n    if (klass && !isString(klass)) {\n      props.class = normalizeClass(klass)\n    }\n    if (isObject(style)) {\n      props.style = normalizeStyle(style)\n    }\n  }\n\n  return createBaseVNode(type, props, children, patchFlag)\n}\n\nexport function cloneVNode(\n  vnode: VNode,\n  extraProps?: (Data & VNodeProps) | null,\n  mergeRef = false\n): VNode {\n  if (vnode && typeof vnode !== 'object') {\n    console.log('cloneVNode', vnode)\n    return vnode\n  }\n  // This is intentionally NOT using spread or extend to avoid the runtime\n  // key enumeration cost.\n  const { props, children } = vnode\n  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props\n  const cloned: VNode = {\n    __v_isVNode: true,\n    type: vnode.type,\n    props: mergedProps,\n    children: isArray(children)\n      ? (children as VNode[]).map(deepCloneVNode)\n      : children,\n    staticCount: vnode.staticCount,\n    appContext: vnode.appContext,\n    component: vnode.component,\n    el: vnode.el,\n    ctx: vnode.ctx\n  }\n  return cloned as any\n}\n\n/**\n * Dev only, for HMR of hoisted vnodes reused in v-for\n * https://github.com/vitejs/vite/issues/2022\n */\nfunction deepCloneVNode(vnode: VNode): VNode {\n  console.log('deepCloneVNode', vnode)\n  const cloned = cloneVNode(vnode)\n  if (isArray(vnode.children)) {\n    cloned.children = (vnode.children as VNode[]).map(deepCloneVNode)\n  }\n  return cloned\n}\n\n/**\n * @private\n */\nexport function createTextVNode(text: string = ' ', flag: number = 0): VNode {\n  return createVNode('Text', null, text)\n}\n\nexport function normalizeVNode(child: VNodeChild): VNode {\n  console.log('normalizeVNode', child)\n  if (child == null || typeof child === 'boolean') {\n    // empty placeholder\n    return createVNode(Comment)\n  } else if (isArray(child)) {\n    // fragment\n    return createVNode(\n      Fragment,\n      null,\n      // #3666, avoid reference pollution when reusing vnode\n      child.slice()\n    )\n  } else if (typeof child === 'object') {\n    // already vnode, this should be the most common since compiled templates\n    // always produce all-vnode children arrays\n    return cloneIfMounted(child)\n  } else {\n    // strings and numbers\n    return createTextVNode(String(child))\n  }\n}\n\nexport function cloneIfMounted(child: VNode): VNode {\n  return cloneVNode(child)\n}\n\nexport function normalizeChildren(vnode: VNode, children: unknown) {\n  console.log('normalizeChildren', vnode, children)\n\n  if (children == null) {\n    children = null\n  } else if (isArray(children)) {\n  } else if (typeof children === 'object') {\n  } else if (isFunction(children)) {\n  } else {\n    children = [createTextVNode(children as string)]\n  }\n  vnode.children = children as VNodeNormalizedChildren\n}\n\nexport function mergeProps(...args: (Data & VNodeProps)[]) {\n  const ret: Data = {}\n  for (let i = 0; i < args.length; i++) {\n    const toMerge = args[i]\n    for (const key in toMerge) {\n      if (key === 'class') {\n        if (ret.class !== toMerge.class) {\n          ret.class = normalizeClass([ret.class, toMerge.class])\n        }\n      } else if (key === 'style') {\n        ret.style = normalizeStyle([ret.style, toMerge.style])\n      } else if (isOn(key)) {\n        const existing = ret[key]\n        const incoming = toMerge[key]\n        if (\n          incoming &&\n          existing !== incoming &&\n          !(isArray(existing) && existing.includes(incoming))\n        ) {\n          ret[key] = existing\n            ? [].concat(existing as any, incoming as any)\n            : incoming\n        }\n      } else if (key !== '') {\n        ret[key] = toMerge[key]\n      }\n    }\n  }\n  return ret\n}\n","import { Component, ComponentInternalInstance, Data } from './components'\nimport { createVNode } from './vnode'\n\nexport interface App<HostElement = any> {\n  _uid: number\n  _component: Component\n  _props: Data | null\n  _container: HostElement | null\n  _instance: ComponentInternalInstance | null\n\n  mount(rootContainer: HostElement | string): any\n}\n\nexport interface AppContext {\n  app: App // for devtools\n}\n\nexport type createApp<HostElement> = (\n  rootComponent: Component,\n  rootProps?: Data | null\n) => App<HostElement>\n\nlet uid = 0\n\nexport function createAppAPI(render) {\n  return function createApp(rootComponent, rootProps = null) {\n    const app: App = {\n      _uid: uid++,\n      _component: rootComponent as Component,\n      _props: rootProps,\n      _container: null,\n      _instance: null,\n\n      mount(rootContainer): any {\n        const vnode = createVNode(rootComponent, rootProps)\n\n        app._container = rootContainer\n\n        render(vnode, rootContainer)\n      }\n    }\n\n    return app\n  }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","import { ComponentInternalInstance } from './components'\n\nexport interface SchedulerJob extends Function {\n  id?: number\n  pre?: boolean\n  active?: boolean\n  computed?: boolean\n  /**\n   * Indicates whether the effect is allowed to recursively trigger itself\n   * when managed by the scheduler.\n   *\n   * By default, a job cannot trigger itself because some built-in method calls,\n   * e.g. Array.prototype.push actually performs reads as well (#1740) which\n   * can lead to confusing infinite loops.\n   * The allowed cases are component update functions and watch callbacks.\n   * Component update functions may update child component props, which in turn\n   * trigger flush: \"pre\" watch callbacks that mutates state that the parent\n   * relies on (#1801). Watch callbacks doesn't track its dependencies so if it\n   * triggers itself again, it's likely intentional and it is the user's\n   * responsibility to perform recursive state mutation that eventually\n   * stabilizes (#1727).\n   */\n  allowRecurse?: boolean\n  /**\n   * Attached by renderer.ts when setting up a component's render effect\n   * Used to obtain component information when reporting max recursive updates.\n   * dev only.\n   */\n  ownerInstance?: ComponentInternalInstance\n}\n\nexport type SchedulerJobs = SchedulerJob | SchedulerJob[]\n\nlet isFlushing = false\nlet isFlushPending = false\n\nconst queue: SchedulerJob[] = []\nlet flushIndex = 0\n\nconst pendingPostFlushCbs: SchedulerJob[] = []\nlet activePostFlushCbs: SchedulerJob[] | null = null\nlet postFlushIndex = 0\n\nconst resolvedPromise = /*#__PURE__*/ Promise.resolve() as Promise<any>\nlet currentFlushPromise: Promise<void> | null = null\n\nconst RECURSION_LIMIT = 100\ntype CountMap = Map<SchedulerJob, number>\n\nexport function flushPreFlushCbs(\n  seen?: CountMap,\n  // if currently flushing, skip the current job itself\n  i = isFlushing ? flushIndex + 1 : 0\n) {\n  seen = seen || new Map()\n  for (; i < queue.length; i++) {\n    const cb = queue[i]\n    if (cb && cb.pre) {\n      if (checkRecursiveUpdates(seen!, cb)) {\n        continue\n      }\n      queue.splice(i, 1)\n      i--\n      cb()\n    }\n  }\n}\n\nexport function flushPostFlushCbs(seen?: CountMap) {\n  if (pendingPostFlushCbs.length) {\n    const deduped = [...new Set(pendingPostFlushCbs)]\n    pendingPostFlushCbs.length = 0\n\n    // #1947 already has active queue, nested flushPostFlushCbs call\n    if (activePostFlushCbs) {\n      activePostFlushCbs.push(...deduped)\n      return\n    }\n\n    activePostFlushCbs = deduped\n\n    seen = seen || new Map()\n\n    activePostFlushCbs.sort((a, b) => getId(a) - getId(b))\n\n    for (\n      postFlushIndex = 0;\n      postFlushIndex < activePostFlushCbs.length;\n      postFlushIndex++\n    ) {\n      if (checkRecursiveUpdates(seen!, activePostFlushCbs[postFlushIndex])) {\n        continue\n      }\n      activePostFlushCbs[postFlushIndex]()\n    }\n    activePostFlushCbs = null\n    postFlushIndex = 0\n  }\n}\n\nconst getId = (job: SchedulerJob): number =>\n  job.id == null ? Infinity : job.id\n\nfunction checkRecursiveUpdates(seen: CountMap, fn: SchedulerJob) {\n  if (!seen.has(fn)) {\n    seen.set(fn, 1)\n  } else {\n    const count = seen.get(fn)!\n    if (count > RECURSION_LIMIT) {\n      return true\n    } else {\n      seen.set(fn, count + 1)\n    }\n  }\n}\n","type GlobalValue = 'inherit' | 'initial' | 'revert' | 'revert-layer' | 'unset'\n\nexport type TextAlign =\n  | 'start'\n  | 'end'\n  | 'left'\n  | 'right'\n  | 'center'\n  | 'justify'\n  | 'justify-all'\n  | 'match-parent'\n  | GlobalValue\n\nexport type VerticalAlign =\n  | 'middle'\n  | 'baseline'\n  | 'sub'\n  | 'super'\n  | 'text-top'\n  | 'text-bottom'\n  | 'top'\n  | 'bottom'\n  | 'inherit'\n  | 'initial'\n  | 'revert'\n  | 'revert-layer'\n  | 'unset'\n  | number\n  | GlobalValue\n\nexport type JustifyContent =\n  | 'center' /* Pack items around the center */\n  | 'start' /* Pack items from the start */\n  | 'end' /* Pack items from the end */\n  | 'flex-start' /* Pack flex items from the start */\n  | 'flex-end' /* Pack flex items from the end */\n  | 'left' /* Pack items from the left */\n  | 'right' /* Pack items from the right */\n  | 'normal'\n  /* Distributed alignment */\n  | 'space-between' /* Distribute items evenly\n                                   The first item is flush with the start,\n                                   the last is flush with the end */\n  | 'space-around' /* Distribute items evenly\n                                   Items have a half-size space\n                                   on either end */\n  | 'space-evenly' /* Distribute items evenly\n                                   Items have equal space around them */\n  | 'stretch' /* Distribute items evenly\n                                   Stretch 'auto'-sized items to fit\n                                   the container */\n  /* Overflow alignment */\n  | 'safe center'\n  | 'unsafe center'\n  | GlobalValue\n\nexport type AlignItems =\n  /* Basic keywords */\n  | 'normal'\n  | 'stretch'\n  /* Positional alignment */\n  /* align-items does not take left and right values */\n  | 'center' /* Pack items around the center */\n  | 'start' /* Pack items from the start */\n  | 'end' /* Pack items from the end */\n  | 'flex-start' /* Pack flex items from the start */\n  | 'flex-end' /* Pack flex items from the end */\n  | 'self-start' /* Pack flex items from the start */\n  | 'self-end' /* Pack flex items from the end */\n  /* Baseline alignment */\n  | 'baseline'\n  | 'first baseline'\n  | 'last baseline' /* Overflow alignment (for positional alignment only) */\n  | 'safe center'\n  | 'unsafe center'\n  | GlobalValue\n\nexport type AlignSelf =\n  /* Keyword values */\n  | 'auto'\n  | 'normal'\n  /* Positional alignment */\n  /* align-self does not take left and right values */\n  | 'center' /* Put the item around the center */\n  | 'start' /* Put the item at the start */\n  | 'end' /* Put the item at the end */\n  | 'self-start' /* Align the item flush at the start */\n  | 'self-end' /* Align the item flush at the end */\n  | 'flex-start' /* Put the flex item at the start */\n  | 'flex-end' /* Put the flex item at the end */\n  /* Baseline alignment */\n  | 'baseline'\n  | 'first baseline'\n  | 'last baseline'\n  | 'stretch' /* Stretch 'auto'-sized items to fit the container */\n  /* Overflow alignment */\n  | 'safe center'\n  | 'unsafe center'\n  | GlobalValue\n\nexport type WhiteSpace =\n  /* Keyword values */\n  | 'normal'\n  | 'nowrap'\n  | 'pre'\n  | 'pre-wrap'\n  | 'pre-line'\n  | 'break-spaces'\n  | GlobalValue\n\nexport type Position =\n  | 'static'\n  | 'relative'\n  | 'absolute'\n  | 'fixed'\n  | 'sticky'\n  | GlobalValue\n\nexport interface ElementStyleType {\n  display: string\n  fontSize: number\n  fontWeight: number\n  fontFamily: string\n  color: string\n  paddingTop: number\n  paddingBottom: number\n  paddingLeft: number\n  paddingRight: number\n  marginTop: number\n  marginBottom: number\n  marginLeft: number\n  marginRight: number\n  height: number | string\n  borderRadius: number\n  borderColor: string\n  lineCap: string\n  flex?: string | number\n  flexDirection: string\n  verticalAlign: VerticalAlign\n  textAlign: TextAlign\n  justifyContent: JustifyContent\n  alignItems: AlignItems\n  alignSelf: AlignSelf\n  whiteSpace: WhiteSpace\n  zIndex: number\n  visible: boolean\n  position: Position\n}\n\nconst DISPLAY = {\n  BLOCK: 'block',\n  INLINE_BLOCK: 'inline-block',\n  INLINE: 'inline', // 用户不能设置inline，text默认为inline\n  FLEX: 'flex',\n  NONE: 'none'\n}\n\nconst WIDTH = {\n  AUTO: 'auto',\n  OUTER: '100%'\n}\n\nconst POSITION = {\n  ABSOLUTE: 'absolute',\n  FIXED: 'fixed',\n  RELATIVE: 'relative',\n  STATIC: 'static'\n}\n\nconst TEXT_ALIGN = {\n  LEFT: 'left',\n  RIGHT: 'right',\n  CENTER: 'center'\n}\n\nconst FLEX_DIRECTION = {\n  ROW: 'row',\n  COLUMN: 'column'\n}\n\nconst DEFAULT_STYLES: ElementStyleType = {\n  display: DISPLAY.BLOCK,\n  fontSize: 14,\n  fontWeight: 400,\n  fontFamily: 'sans-serif',\n  color: '#000',\n  paddingTop: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  paddingRight: 0,\n  marginTop: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  marginRight: 0,\n  height: WIDTH.AUTO,\n  borderRadius: 0,\n  borderColor: '#000',\n  lineCap: 'square',\n  flexDirection: FLEX_DIRECTION.ROW,\n  verticalAlign: 'middle',\n  textAlign: 'left',\n  justifyContent: 'flex-start',\n  alignItems: 'flex-start',\n  alignSelf: 'auto',\n  whiteSpace: 'normal',\n  zIndex: 1,\n  visible: true,\n  position: 'static'\n}\n\nconst STYLE_CONSTANT = {\n  DISPLAY,\n  WIDTH,\n  POSITION,\n  TEXT_ALIGN,\n  FLEX_DIRECTION,\n  DEFAULT_STYLES\n} as const\n\nexport default STYLE_CONSTANT\n","export type TreeNodeChildren = Array<TreeNode> | string\n\nexport interface TreeNode {\n  __v_isTreeNode: boolean\n  _children: TreeNodeChildren\n  parent: TreeNode | null\n  root: TreeNode | null\n  prev: TreeNode | string | null\n  next: TreeNode | string | null\n  children: TreeNodeChildren\n  // parent: TreeNode | null\n  _setParent(node: TreeNode): void\n  _setSibling(prev: TreeNode | string | null, next: TreeNode | null): void\n  hasChildren(): boolean\n  appendChild(child: TreeNode): void\n  prependChild(child: TreeNode): void\n  removeChild(child: TreeNode): void\n  append(): void\n  prepend(): void\n  remove(): void\n}\n\nexport function isTreeNode(value: any): value is TreeNode {\n  return value ? value.__v_isTreeNode === true : false\n}\n\nexport function isEndNode(node) {\n  return node.parent && !node.next && !node.hasChildren()\n}\n\nexport function createTreeNode(children = []) {\n  const treeNode: TreeNode = {\n    __v_isTreeNode: true,\n    _children: children,\n    parent: null,\n    root: null,\n    prev: null,\n    next: null,\n\n    get children() {\n      return this._children\n    },\n\n    // get parent() {\n    //   return this._parent\n    // },\n\n    _setParent(node) {\n      console.log('_setParent', this, node)\n      this.parent = node\n    },\n\n    _setSibling(prev, next) {\n      console.log('_setSibling', prev, next)\n      this.prev = prev\n      this.next = next\n    },\n\n    hasChildren() {\n      return Array.isArray(this._children) && this._children.length\n        ? true\n        : false\n    },\n\n    appendChild(child) {\n      console.log('TreeNode-Append-Child---------------')\n      if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n\n      const prev = this._children[this._children.length - 1] || null\n      if (prev && isTreeNode(prev)) {\n        prev._setSibling(prev.prev, child)\n      }\n\n      Array.isArray(this._children) && this._children.push(child)\n\n      child._setParent(this)\n      child._setSibling(prev, null)\n    },\n\n    prependChild(child) {\n      if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n    },\n\n    removeChild(child) {\n      if (!isTreeNode(child)) throw Error('Unknown treeNode type')\n    },\n\n    append() {},\n\n    prepend() {},\n\n    remove() {}\n  }\n\n  return treeNode\n}\n\nexport function connectChildren(el) {\n  console.warn('connectChildren', el)\n  if (el.hasChildren()) {\n    el.children = el.children.filter((item) => {\n      isTreeNode(item)\n    })\n    el._getChildren().map((child, index) => {\n      child._setParent(el)\n      child._setSibling(\n        el._getChildren()[index - 1],\n        el._getChildren()[index + 1]\n      )\n      connectChildren(child)\n    })\n  }\n}\n","import { isExact, isAuto, isOuter } from '../utils'\nimport CONSTANT from './styleConstant'\n\nexport default function (element) {\n  _completeFlex(element)\n\n  _completeWidth(element)\n\n  _completeBorder(element)\n\n  _completeFont(element)\n\n  _completePaddingMargin(element)\n}\n\nfunction _completePaddingMargin(element) {\n  if (element.styles.padding) {\n    if (isExact(element.styles.padding)) {\n      element.styles.paddingLeft = element.styles.padding\n      element.styles.paddingBottom = element.styles.padding\n      element.styles.paddingRight = element.styles.padding\n      element.styles.paddingTop = element.styles.padding\n    } else if (Array.isArray(element.styles.padding)) {\n      // 支持数组[10,20]相当于padding:10px 20px;\n      if (element.styles.padding.length === 2) {\n        element.styles.paddingLeft = element.styles.paddingRight =\n          element.styles.padding[1]\n        element.styles.paddingBottom = element.styles.paddingTop =\n          element.styles.padding[0]\n      } else if (element.styles.padding.length === 4) {\n        element.styles.paddingLeft = element.styles.padding[3]\n        element.styles.paddingBottom = element.styles.padding[2]\n        element.styles.paddingRight = element.styles.padding[1]\n        element.styles.paddingTop = element.styles.padding[0]\n      }\n    }\n  }\n\n  if (isExact(element.styles.margin)) {\n    element.styles.marginLeft = element.styles.margin\n    element.styles.marginBottom = element.styles.margin\n    element.styles.marginRight = element.styles.margin\n    element.styles.marginTop = element.styles.margin\n  } else if (Array.isArray(element.styles.margin)) {\n    // 支持数组[10,20]相当于padding:10px 20px;\n    if (element.styles.margin.length === 2) {\n      element.styles.marginLeft = element.styles.marginRight =\n        element.styles.margin[1]\n      element.styles.marginBottom = element.styles.marginTop =\n        element.styles.margin[0]\n    } else if (element.styles.margin.length === 4) {\n      element.styles.marginLeft = element.styles.margin[3]\n      element.styles.marginBottom = element.styles.margin[2]\n      element.styles.marginRight = element.styles.margin[1]\n      element.styles.marginTop = element.styles.margin[0]\n    }\n  }\n}\n\n/**\n * borderwidth到各个边\n */\nfunction _completeBorder(element) {\n  let {\n    borderWidth,\n    borderLeftWidth,\n    borderRightWidth,\n    borderBottomWidth,\n    borderTopWidth,\n    borderRadius\n  } = element.styles\n  if (!borderWidth) {\n    element.styles.borderWidth = 0\n    borderWidth = 0\n  }\n  if (Array.isArray(borderWidth)) {\n    element.styles.borderTopWidth = borderWidth[0]\n    element.styles.borderRightWidth = borderWidth[1]\n    element.styles.borderBottomWidth = borderWidth[2]\n    element.styles.borderLeftWidth = borderWidth[3]\n  } else {\n    if (!borderLeftWidth) {\n      element.styles.borderLeftWidth = borderWidth\n    }\n    if (!borderRightWidth) {\n      element.styles.borderRightWidth = borderWidth\n    }\n    if (!borderBottomWidth) {\n      element.styles.borderBottomWidth = borderWidth\n    }\n    if (!borderTopWidth) {\n      element.styles.borderTopWidth = borderWidth\n    }\n  }\n  if (borderRadius) {\n    element.styles.overflow = 'hidden'\n  }\n}\n\nfunction _completeWidth(element) {\n  if (!element.styles.width) {\n    if (\n      element.styles.display === CONSTANT.DISPLAY.INLINE_BLOCK ||\n      element.styles.display === CONSTANT.DISPLAY.INLINE ||\n      !element.isInFlow()\n    ) {\n      element.styles.width = CONSTANT.WIDTH.AUTO\n    } else if (\n      element.styles.display === CONSTANT.DISPLAY.BLOCK ||\n      element.styles.display === CONSTANT.DISPLAY.FLEX\n    ) {\n      element.styles.width = CONSTANT.WIDTH.OUTER\n    } else {\n      element.styles.width = 0\n    }\n  }\n\n  if (isOuter(element.styles.width)) {\n    if (element.parent && isAuto(element.parent.styles.width)) {\n      element.styles.width = CONSTANT.WIDTH.AUTO\n    }\n  }\n\n  if (isOuter(element.styles.height)) {\n    if (element.parent && isAuto(element.parent.styles.height)) {\n      element.styles.height = CONSTANT.WIDTH.AUTO\n    }\n  }\n}\n\nfunction _completeFont(element) {\n  if (element.styles.fontSize && !element.styles.lineHeight) {\n    element.styles.lineHeight = element.styles.fontSize * 1.4\n  }\n}\n\nfunction _completeFlex(element) {\n  if (\n    element.parent &&\n    element.parent.styles.display === CONSTANT.DISPLAY.FLEX\n  ) {\n    // flex布局内 width 和flex需要有一个\n    if (!element.styles.flex) {\n      if (!isExact(element.styles.height) && !isExact(element.styles.width)) {\n        element.styles.flex = 1\n      }\n    } else {\n      if (\n        element.parent.styles.flexDirection === 'column' &&\n        isExact(element.styles.flex)\n      ) {\n        element.styles.height = 0\n      } else if (\n        element.parent.styles.flexDirection === 'row' &&\n        isExact(element.styles.flex)\n      ) {\n        element.styles.width = 0\n      }\n    }\n  }\n}\n","import { isAuto } from '../utils'\nimport { CanvasElement } from './element'\n\nexport interface Line {\n  width: number\n  height: number\n  contentWidth: number // 右边界\n  x: number\n  y: number // 上\n  right: number\n  doorClosed: boolean // 是否允许加入\n  outerWidth: number\n  container: CanvasElement | null\n  elements: CanvasElement[]\n  start: CanvasElement | null // 起点，行最左边第一个\n  end: CanvasElement | null // 结束\n  offsetX: number\n  id: number\n  _initHeight(el: CanvasElement): void\n  _initLayout(el: CanvasElement): void\n  _getOffsetY(el: CanvasElement): number\n  _refreshWidthHeight(el: CanvasElement): void\n  _closeLine(): void\n  _getPrevLine(el: CanvasElement): { x: number; y: number }\n  _refreshXAlign(): void\n  bindElement(el: CanvasElement): void\n  refreshElementPosition(el: CanvasElement): void\n  addElement(el: CanvasElement): void\n  canIEnter(el: CanvasElement): boolean\n}\n\nlet id = 0\n\nexport function createLine() {\n  let line: Line = {\n    width: 0,\n    height: 0,\n    contentWidth: 0, // 右边界\n    x: 0,\n    y: 0, // 上\n    right: 0,\n    doorClosed: false, // 是否允许加入\n    outerWidth: 0,\n    container: null,\n    elements: [] as CanvasElement[],\n    start: null, // 起点，行最左边第一个\n    end: null, // 结束\n    offsetX: 0,\n    id: ++id,\n\n    _initHeight(el) {\n      line.height =\n        (el.parent && el.parent.context.renderStyles.lineHeight) || 0\n    },\n\n    _initLayout(el) {\n      line.right = el.getContainerLayout().contentX || 0\n      line.x = el.getContainerLayout().contentX || 0\n      line.y = line._getPrevLine(el).y\n    },\n\n    _getOffsetY(el) {\n      if (el.renderStyles.verticalAlign === 'bottom') {\n        return line.height - el.renderStyles.height\n      } else if (el.renderStyles.verticalAlign === 'middle') {\n        return (line.height - el.renderStyles.height) / 2\n      } else {\n        return 0\n      }\n    },\n\n    _refreshWidthHeight(el) {\n      if (el.renderStyles.height > line.height) {\n        line.height = el.renderStyles.height\n      }\n\n      line.width += el.renderStyles.width\n    },\n\n    _closeLine() {\n      // new line\n      line.end = line.elements[line.elements.length - 1]\n      line._refreshXAlign()\n    },\n\n    _getPrevLine(el: CanvasElement) {\n      if (el.prev) {\n        const prevLine = el.prev.context.line\n        if (prevLine) {\n          return { y: prevLine.height + prevLine.y, x: prevLine.x }\n        } else {\n          const prevLayout = el.getPrevLayout()\n          return {\n            y: prevLayout.y + prevLayout.height,\n            x: prevLayout.x\n          }\n        }\n      } else {\n        return {\n          y: el.getContainerLayout().contentY,\n          x: el.getContainerLayout().contentX\n        }\n      }\n    },\n\n    _refreshXAlign() {\n      if (line.outerWidth > 5000) return\n      if (!line.end) return\n      if (!line.end.parent) return\n      let offsetX = line.outerWidth - line.width\n      if (line.end.parent.context.renderStyles.textAlign === 'center') {\n        offsetX = offsetX / 2\n      } else if (line.end.parent.context.renderStyles.textAlign === 'left') {\n        offsetX = 0\n      }\n      line.offsetX = offsetX\n    },\n\n    bindElement(el) {\n      line.container = el.parent?.context\n      line._initHeight(el)\n\n      line.outerWidth =\n        el.parent && isAuto(el.parent.context.styles.width)\n          ? Infinity\n          : el.parent?.context.renderStyles.contentWidth\n\n      line.start = el\n      line.addElement(el)\n    },\n\n    refreshElementPosition(el) {\n      if (line.start === el) {\n        line._initLayout(el)\n      }\n      // 刷新位置，首先以左边计算\n      el.x = line.right + line.offsetX\n      el.y = line.y + line._getOffsetY(el)\n      // + (line.height - el.renderStyles.height) / 2\n      line.right += el.renderStyles.width\n    },\n\n    addElement(el: CanvasElement) {\n      line.elements.push(el)\n      el.line = line\n      line._refreshWidthHeight(el)\n\n      if (!el.next || el.next.context.renderStyles.display !== 'inline-block') {\n        line._closeLine()\n      }\n    },\n\n    canIEnter(el: CanvasElement) {\n      if (el.renderStyles.width + line.width > line.outerWidth) {\n        line._closeLine()\n        return false\n      } else {\n        return true\n      }\n    }\n  }\n\n  return line\n}\n","import { CanvasElement } from './element'\nimport { isExact, isAuto } from '../utils'\nimport STYLE_CONSTANT from './styleConstant'\n\nconst KEY = {\n  [STYLE_CONSTANT.FLEX_DIRECTION.ROW]: {\n    width: 'width',\n    contentWidth: 'contentWidth',\n    x: 'x',\n    y: 'y',\n    contentX: 'contentX',\n    height: 'height',\n    contentHeight: 'contentHeight'\n  },\n  [STYLE_CONSTANT.FLEX_DIRECTION.COLUMN]: {\n    width: 'height',\n    contentWidth: 'contentHeight',\n    x: 'y',\n    y: 'x',\n    contentX: 'contentY',\n    height: 'width',\n    contentHeight: 'contentWidth'\n  }\n}\n\nexport interface FlexBox {\n  key: null | string\n  exactValue: number\n  flexTotal: number\n  _closeLine(): void\n  _initHeight(): void\n  _refreshWidthHeight(el: CanvasElement): void\n  _initLayout(el: CanvasElement): void\n  _refreshElementPosition(el: CanvasElement): void\n  _calcFlex(): void\n  _refreshXAlign(): void\n  _getOffsetY(el: CanvasElement): number\n  bindElement(el: CanvasElement): void\n  addElement(el: CanvasElement): void\n}\n\n// 目前flex是基于inline-block的简单实现，只支持row方向width + flex混用\nexport function createFlexBox(): FlexBox {\n  let flexBox: FlexBox = {\n    key: null,\n    exactValue: 0,\n    flexTotal: 0,\n    _closeLine() {\n      super.closeLine()\n      this.calcFlex()\n    },\n\n    _initHeight() {\n      this[this.key.height] = 0\n    },\n\n    _refreshWidthHeight(el) {\n      if (el.renderStyles[this.key.height] > this[this.key.height]) {\n        this[this.key.height] = el.renderStyles[this.key.height]\n      }\n\n      this[this.key.width] += el.renderStyles[this.key.width]\n    },\n\n    _initLayout(el) {\n      this.right = el.getContainerLayout()[this.key.contentX]\n      this[this.key.x] = el.getContainerLayout()[this.key.contentX]\n      this[this.key.y] = this.getPreLine(el)[this.key.y]\n    },\n\n    _refreshElementPosition(el) {\n      if (this.start === el) {\n        this.initLayout(el)\n      }\n      // 刷新位置，首先以左边计算\n      el[this.key.x] = this.right + this.offsetX\n      el[this.key.y] = this[this.key.y] + this.getOffsetY(el)\n      // + (this.height - el.renderStyles.height) / 2\n      this.right += el.renderStyles[this.key.width]\n    },\n\n    _calcFlex() {\n      const { [this.key.contentWidth]: containerWidth } =\n        this.container.renderStyles\n      this.elements.forEach((child) => {\n        if (isExact(child.styles.flex)) {\n          child.renderStyles[this.key.width] =\n            (child.styles.flex / this.flexTotal) *\n            (containerWidth - this.exactValue)\n          child._refreshContentWithLayout()\n        }\n      })\n    },\n\n    _refreshXAlign() {\n      if (!this.end.parent) return\n      let offsetX = this.outerWidth - this[this.key.width]\n      if (this.end.parent.renderStyles.justifyContent === 'center') {\n        offsetX = offsetX / 2\n      } else if (this.end.parent.renderStyles.justifyContent === 'flex-start') {\n        offsetX = 0\n      }\n      this.offsetX = offsetX\n    },\n\n    _getOffsetY(el) {\n      if (el.renderStyles.alignSelf === 'flex-end') {\n        return (\n          this.container.renderStyles[this.key.contentHeight] -\n          el.renderStyles[this.key.height]\n        )\n      } else if (el.renderStyles.alignSelf === 'center') {\n        return (\n          (this.container.renderStyles[this.key.contentHeight] -\n            el.renderStyles[this.key.height]) /\n          2\n        )\n      } else {\n        return 0\n      }\n    },\n\n    bindElement(el) {\n      this.container = el.parent\n      if (el.parent) {\n        this.key = KEY[el.parent.context.renderStyles.flexDirection]\n      }\n      this.initHeight(el)\n      this.outerWidth =\n        el.parent && isAuto(el.parent.context.styles[this.key.width])\n          ? Infinity\n          : el.parent?.context.renderStyles[this.key.contentWidth]\n      this.start = el\n      this.add(el)\n    },\n\n    addElement(el) {\n      if (isExact(el.styles[this.key.width])) {\n        this.exactValue += el.renderStyles[this.key.width]\n      } else if (isExact(el.styles.flex)) {\n        this.flexTotal += el.renderStyles.flex\n      }\n\n      this.elements.push(el)\n      el.line = this\n      this.refreshWidthHeight(el)\n\n      if (!el.next) {\n        this.closeLine()\n      }\n    }\n  }\n\n  return flexBox\n}\n","import STYLE_CONSTANT, { ElementStyleType } from './styleConstant'\nimport { TreeNode, createTreeNode } from './treeNode'\nimport { Layer } from './layer'\nimport completeStyles from './completeStyles'\nimport {\n  isAuto,\n  isOuter,\n  isExact,\n  parseOuter,\n  findRelativeTo,\n  floor,\n  isArray\n} from '../utils'\nimport { Line, createLine } from './line'\nimport { createFlexBox } from './flexBox'\nimport { createViewElement } from './view'\nimport { createTextElement } from './text'\n\nexport enum ElementTypes {\n  root = 'root',\n  view = 'view',\n  text = 'text',\n  img = 'img'\n}\n\nexport type Layout = {\n  width: number\n  height: number\n  x: number\n  y: number\n  paddingTop?: number\n  paddingBottom?: number\n  paddingLeft?: number\n  paddingRight?: number\n  marginLeft?: number\n  marginRight?: number\n  marginTop?: number\n  marginBottom?: number\n  contentX?: number\n  contentY?: number\n  contentWidth?: number\n  contentHeight?: number\n}\n\ntype ExtendStyles = {\n  textAlign?: string\n  lineHeight?: number\n  fontSize?: number\n  color?: string\n  fontFamily?: string\n  alignItems?: string\n  alignSelf?: string\n  visible?: string\n}\n\nexport type ElementOptions = {\n  styles?: ElementStyleType\n  text?: string\n}\n\nexport function isCanvasElement(value: any): value is CanvasElement {\n  return value ? value.__v_isElement === true : false\n}\n\nexport interface CanvasElement extends TreeNode {\n  __v_isElement: boolean\n  type: ElementTypes\n  options: ElementOptions\n  styles: ElementStyleType\n  renderStyles: any\n  debugColor: string | null\n  container: CanvasElement | null\n  root: CanvasElement | null\n  layer: Layer | null\n  line: Line | null\n  x: number\n  y: number\n  contentX: number\n  contentY: number\n  left: number\n  top: number\n  height: number\n  width: number\n  visible: boolean\n  _initStyles(): void\n  _initRenderStyles(): void\n  _getParentStyles(curStyles: ElementStyleType): ElementStyleType\n  _getDefaultStyles(): ElementStyleType\n  _completeStyles(): void\n  _getChildren(): CanvasElement[]\n  _getChildrenInFlow(): CanvasElement[]\n  _reflow(): void\n  _initWidthHeight(): void\n  _initPosition(): void\n  _InFlexBox(): void\n  _refreshLayoutWithContent(): void\n  _refreshContentWithLayout(): void\n  _getTotalBorderWidth(): void\n  _getTotalBorderHeight(): void\n  _bindLine(): void\n  _bindFlexBox(): void\n  _measureLayout(): void\n  init(): void\n  appendChild(element: CanvasElement): void\n  getContainerLayout(): Layout\n  getPrevLayout(): Layout\n  isInFlow(): boolean\n  isVisible(): boolean\n  paint(lastPaintTime: number): void\n  __proto__: any\n}\n\nexport function createElementAPI(layer: Layer) {\n  return function createElement(\n    type: ElementTypes,\n    options: ElementOptions = {},\n    children?: CanvasElement[] | string\n  ): CanvasElement {\n    console.log('createElement', type, options, children)\n\n    const treeNode = createTreeNode(children)\n\n    let element: CanvasElement = {\n      __v_isElement: true,\n      type,\n      options,\n      styles: {} as ElementStyleType,\n      renderStyles: {},\n      debugColor: null,\n      x: 0,\n      y: 0,\n      contentX: 0,\n      contentY: 0,\n      left: 0,\n      top: 0,\n      height: 0,\n      width: 0,\n      visible: true,\n      container: null,\n      layer,\n      ...treeNode,\n      // __proto__: treeNode,\n\n      _initStyles() {\n        console.log('_initStyle', element)\n        element.styles = Object.assign(\n          {},\n          element._getDefaultStyles(),\n          element._getParentStyles(),\n          element.options.style || {}\n        )\n        console.log('_initStyles-00000000', element.styles)\n\n        element._completeStyles()\n\n        element._initRenderStyles()\n\n        console.log('_initStyles', element.styles, element.renderStyles)\n      },\n\n      _initRenderStyles() {\n        const renderStyles = { ...element.styles }\n        const parentWidth = element.getContainerLayout().contentWidth\n        const parentHeight = element.getContainerLayout().contentHeight\n\n        if (isAuto(renderStyles.width)) {\n          renderStyles.paddingWidth = 0\n        } else if (isOuter(renderStyles.width)) {\n          renderStyles.paddingWidth =\n            parseOuter(renderStyles.width) * parentWidth -\n            renderStyles.marginLeft -\n            renderStyles.marginRight\n        } else {\n          renderStyles.paddingWidth = renderStyles.width\n        }\n\n        if (isAuto(renderStyles.height)) {\n          renderStyles.paddingHeight = 0\n        } else if (isOuter(renderStyles.height)) {\n          renderStyles.paddingHeight =\n            parseOuter(renderStyles.height) * parentHeight -\n            renderStyles.marginTop -\n            renderStyles.marginBottom\n        } else {\n          renderStyles.paddingHeight = renderStyles.height\n        }\n\n        if (!renderStyles.paddingWidth) renderStyles.paddingWidth = 0\n        if (!renderStyles.paddingHeight) renderStyles.paddingHeight = 0\n\n        // 初始化contentWidth\n        renderStyles.contentWidth =\n          renderStyles.paddingWidth -\n          renderStyles.paddingLeft -\n          renderStyles.paddingRight\n        renderStyles.contentHeight =\n          renderStyles.paddingHeight -\n          renderStyles.paddingTop -\n          renderStyles.paddingBottom\n\n        renderStyles.width =\n          renderStyles.paddingWidth +\n          renderStyles.marginLeft +\n          renderStyles.marginRight +\n          element._getTotalBorderWidth(renderStyles)\n        renderStyles.height =\n          renderStyles.paddingHeight +\n          renderStyles.marginTop +\n          renderStyles.marginBottom +\n          element._getTotalBorderHeight(renderStyles)\n\n        element.renderStyles = renderStyles\n\n        if (element._InFlexBox()) {\n          element._bindFlexBox()\n        } else if (!element.isInFlow()) {\n          element.relativeTo = findRelativeTo(element)\n        }\n      },\n\n      _getParentStyles(curStyles = { alignSelf: 'auto' }): ExtendStyles {\n        let {\n          textAlign,\n          fontSize,\n          color,\n          fontFamily,\n          alignItems,\n          visible = true\n        } = (element.parent && element.parent.renderStyles) || {}\n\n        console.log('_getParentStyles', element.parent)\n        if (element.parent) {\n          console.log(\n            '_getParentStyles-renderStyles',\n            element.parent.renderStyles\n          )\n          let extendStyles: ExtendStyles = {}\n          if (textAlign) extendStyles.textAlign = textAlign\n          if (fontSize) extendStyles.fontSize = fontSize\n          if (color) extendStyles.color = color\n          if (fontFamily) extendStyles.fontFamily = fontFamily\n          if (alignItems && !curStyles.alignSelf)\n            extendStyles.alignSelf = alignItems\n          extendStyles.visible = visible\n          return extendStyles\n        }\n\n        return {}\n      },\n\n      _getDefaultStyles() {\n        return STYLE_CONSTANT.DEFAULT_STYLES\n      },\n\n      _completeStyles() {\n        completeStyles(element)\n      },\n\n      _getChildren() {\n        return isArray(this.children) ? this.children : []\n      },\n\n      // 获取文档流中的子节点\n      _getChildrenInFlow() {\n        return element._getChildren().filter((item) => item.isInFlow())\n      },\n\n      /**\n       * 实现文档流 需要知道上一个兄弟节点\n       */\n      _reflow() {},\n\n      _initWidthHeight() {\n        console.log('_initWidthHeight------------')\n        const {\n          width,\n          height,\n          display,\n          flex,\n          marginLeft,\n          marginRight,\n          marginTop,\n          marginBottom\n        } = element.styles\n        if (isAuto(width) || isAuto(height)) {\n          // 这一步需要遍历，判断一下\n          const layout = element._measureLayout()\n          // 初始化宽度高度\n          if (isAuto(width)) {\n            element.renderStyles.contentWidth = floor(layout.width)\n          }\n\n          if (isAuto(height)) {\n            // 不填就是auto\n            element.renderStyles.contentHeight = floor(layout.height)\n          }\n        }\n\n        element._refreshLayoutWithContent()\n\n        if (element._InFlexBox()) {\n          element.line.refreshWidthHeight(element)\n        } else if (display === STYLE_CONSTANT.DISPLAY.INLINE_BLOCK) {\n          // 如果是inline-block  这里仅计算高度\n          element._bindLine()\n        }\n      },\n\n      _initPosition() {\n        let { contentX } = element.getContainerLayout()\n        const {\n          paddingLeft,\n          paddingTop,\n          borderLeftWidth,\n          borderTopWidth,\n          marginLeft,\n          marginTop\n        } = element.renderStyles\n        // 初始化ctx位置\n        if (!element.isInFlow()) {\n          // 不在文档流中\n          let { contentX, contentY, contentWidth, contentHeight } =\n            element.getContainerLayout(element.relativeTo)\n          let { top, bottom, right, left, width, height } = element.renderStyles\n          if (isOuter(top)) top = parseOuter(top) * contentHeight\n          if (isOuter(bottom)) bottom = parseOuter(bottom) * contentHeight\n          if (isOuter(left)) left = parseOuter(left) * contentWidth\n          if (isOuter(right)) right = parseOuter(right) * contentWidth\n          if (isExact(top)) {\n            element.y = contentY + top\n          } else if (isExact(bottom)) {\n            element.y = contentY + contentHeight - bottom - height\n          }\n\n          if (isExact(left)) {\n            element.x = contentX + left\n          } else if (isExact(right)) {\n            element.x = contentX + contentWidth - right - width\n          }\n        } else if (element._InFlexBox()) {\n          element.line.refreshElementPosition(element)\n        } else if (\n          element.renderStyles.display === STYLE_CONSTANT.DISPLAY.INLINE_BLOCK\n        ) {\n          // inline-block到line里计算\n          // element._bindLine()\n          element.line.refreshElementPosition(element)\n        } else {\n          element.x = contentX\n          element.y = element.getPrevLayout().y + element.getPrevLayout().height\n        }\n        element.x = floor(element.x)\n        element.y = floor(element.y)\n        element.contentX =\n          element.x + paddingLeft + borderLeftWidth + marginLeft\n        element.contentY = element.y + paddingTop + borderTopWidth + marginTop\n      },\n\n      _InFlexBox() {\n        if (!element.isInFlow()) return false\n        if (!element.parent) return false\n        if (\n          element.parent &&\n          element.parent.renderStyles.display === STYLE_CONSTANT.DISPLAY.FLEX\n        )\n          return true\n      },\n\n      // 父元素根据子元素撑开content后，再计算width\n      _refreshLayoutWithContent() {\n        element.renderStyles.height = floor(\n          element.renderStyles.contentHeight +\n            element.renderStyles.paddingTop +\n            element.renderStyles.paddingBottom +\n            element.renderStyles.marginTop +\n            element.renderStyles.marginBottom +\n            element._getTotalBorderHeight()\n        )\n        element.renderStyles.width = floor(\n          element.renderStyles.contentWidth +\n            element.renderStyles.paddingLeft +\n            element.renderStyles.paddingRight +\n            element.renderStyles.marginLeft +\n            element.renderStyles.marginRight +\n            element._getTotalBorderWidth()\n        )\n        element.renderStyles.paddingWidth = floor(\n          element.renderStyles.contentWidth +\n            element.renderStyles.paddingLeft +\n            element.renderStyles.paddingRight\n        )\n        element.renderStyles.paddingHeight = floor(\n          element.renderStyles.contentHeight +\n            element.renderStyles.paddingTop +\n            element.renderStyles.paddingBottom\n        )\n      },\n\n      // 父元素根据子元素撑开content后，再计算width\n      _refreshContentWithLayout() {\n        element.renderStyles.contentHeight =\n          element.renderStyles.height -\n          element.renderStyles.paddingTop -\n          element.renderStyles.paddingBottom -\n          element.renderStyles.marginTop -\n          element.renderStyles.marginBottom -\n          element._getTotalBorderHeight()\n        element.renderStyles.contentWidth =\n          element.renderStyles.width -\n          element.renderStyles.paddingLeft -\n          element.renderStyles.paddingRight -\n          element.renderStyles.marginLeft -\n          element.renderStyles.marginRight -\n          element._getTotalBorderWidth()\n        element.renderStyles.paddingWidth = floor(\n          element.renderStyles.contentWidth +\n            element.renderStyles.paddingLeft +\n            element.renderStyles.paddingRight\n        )\n        element.renderStyles.paddingHeight = floor(\n          element.renderStyles.contentHeight +\n            element.renderStyles.paddingTop +\n            element.renderStyles.paddingBottom\n        )\n      },\n\n      _getTotalBorderWidth(renderStyles = element.renderStyles) {\n        return renderStyles.borderLeftWidth + renderStyles.borderRightWidth\n      },\n\n      _getTotalBorderHeight(renderStyles = element.renderStyles) {\n        return renderStyles.borderTopWidth + renderStyles.borderBottomWidth\n      },\n\n      _bindLine() {\n        if (\n          element.prev &&\n          element.prev.line &&\n          element.prev.line.canIEnter(element)\n        ) {\n          element.prev.line.add(element)\n        } else {\n          // 新行\n          createLine().bindElement(element)\n          // new Line().bind(element)\n        }\n      },\n\n      _bindFlexBox() {\n        if (element.pre && element.pre.line) {\n          element.pre.line.add(element)\n        } else {\n          // 新行\n          createFlexBox().bindElement(element)\n        }\n      },\n\n      // 计算自身的高度\n      _measureLayout() {\n        let width = 0 // 需要考虑原本的宽度\n        let height = 0\n        element._getChildrenInFlow().forEach((child) => {\n          if (child.line) {\n            if (child.line.start === child) {\n              if (child.line.width > width) {\n                width = child.line.width\n              }\n              height += child.line.height\n            }\n          } else if (child.renderStyles.width > width) {\n            width = child.renderStyles.width\n            height += child.renderStyles.height\n          } else {\n            height += child.renderStyles.height\n          }\n        })\n\n        return { width, height }\n      },\n\n      init() {\n        console.log('init', element)\n        element._initStyles()\n      },\n\n      appendChild(child) {\n        console.log('appendChild-----------', child, element)\n        treeNode.appendChild.call(this, child)\n        this.layer.onElementAdd(child)\n      },\n\n      getContainerLayout(container = element.parent) {\n        if (!container) {\n          // root\n          // if (!element.container) {\n          //   debugger\n          // }\n          container = {\n            renderStyles: {\n              width: element.container ? element.container.width : '100%',\n              height: element.container ? element.container.height : '100%',\n              paddingTop: 0,\n              paddingBottom: 0,\n              paddingLeft: 0,\n              paddingRight: 0,\n              marginLeft: 0,\n              marginRight: 0,\n              marginTop: 0,\n              marginBottom: 0,\n              contentWidth: element.container\n                ? element.container.width\n                : '100%',\n              contentHeight: element.container\n                ? element.container.height\n                : '100%'\n            },\n            x: 0,\n            y: 0,\n            contentX: 0,\n            contentY: 0\n          }\n        }\n        return {\n          width: container.renderStyles.width,\n          height: container.renderStyles.height,\n          x: container.x,\n          y: container.y,\n          paddingTop: container.renderStyles.paddingTop,\n          paddingBottom: container.renderStyles.paddingBottom,\n          paddingLeft: container.renderStyles.paddingLeft,\n          paddingRight: container.renderStyles.paddingRight,\n          marginLeft: container.renderStyles.marginLeft,\n          marginRight: container.renderStyles.marginRight,\n          marginTop: container.renderStyles.marginTop,\n          marginBottom: container.renderStyles.marginBottom,\n          contentX: container.contentX,\n          contentY: container.contentY,\n          contentWidth: container.renderStyles.contentWidth,\n          contentHeight: container.renderStyles.contentHeight\n        }\n      },\n\n      // 这里前一个节点必须在文档流中\n      getPrevLayout(): Layout {\n        let cur = element.pre\n        while (cur && !cur.isInFlow()) {\n          cur = cur.pre\n        }\n        // 如果没有前一个或者前面的都不在文档流中，获取容器的\n        if (cur) {\n          return {\n            width: cur.renderStyles.width,\n            height: cur.renderStyles.height,\n            x: cur.x,\n            y: cur.y\n          }\n        } else {\n          return {\n            width: 0,\n            height: 0,\n            x: element.getContainerLayout().contentX,\n            y: element.getContainerLayout().contentY\n          }\n        }\n      },\n\n      // 是否在文档流中\n      isInFlow() {\n        const { position, display } = element.styles\n        return (\n          position !== STYLE_CONSTANT.POSITION.ABSOLUTE &&\n          position !== STYLE_CONSTANT.POSITION.FIXED\n        )\n      },\n\n      isVisible() {\n        return element.renderStyles.visible && element.visible\n      },\n\n      getLayer() {\n        return this.layer\n      },\n\n      getRenderer() {\n        return this.layer.renderer\n      },\n\n      paint(lastPaintTime) {}\n    }\n\n    // Object.assign(element, Object.create(treeNode))\n    // Object.setPrototypeOf(element, treeNode)\n    element.root = layer.node\n\n    switch (element.type) {\n      case 'text':\n        return createTextElement(element)\n      default:\n        return createViewElement(element)\n    }\n  }\n}\n","import { isAuto, isExact } from '../utils'\nimport { CanvasElement } from './element'\nimport { CanvasRenderer } from './renderer'\nimport STYLE_CONSTANT, { ElementStyleType } from './styleConstant'\n\ntype TextOptions = {}\n\ntype Layout = {}\n\ntype TextLine = {\n  text: string\n  layout: Layout\n}\n\nexport interface TextElement extends CanvasElement {\n  layout: any\n  lines: TextLine[]\n  children: string\n  debugColor: string\n\n  _paint(): void\n  _getDefaultStyles(): ElementStyleType\n  _measureLayout(): Layout\n  _getFont(): string\n  _calcLine(): void\n}\n\nexport function createTextElement(element: CanvasElement): TextElement {\n  let text: TextElement = {\n    ...element,\n    layout: null,\n    lines: [] as TextLine[],\n    debugColor: 'blue',\n\n    _paint() {\n      text.getRender()._drawBackground(text)\n      text.getRender()._drawText(text)\n      text.getRender()._drawBox(text)\n    },\n\n    _getDefaultStyles() {\n      return {\n        ...STYLE_CONSTANT.DEFAULT_STYLES,\n        display: STYLE_CONSTANT.DISPLAY.INLINE_BLOCK,\n        width: STYLE_CONSTANT.WIDTH.AUTO,\n        textAlign: 'left'\n      }\n    },\n\n    _measureLayout() {\n      text.layout = text.getRender().measureText(text, text.children)\n      text.layout.height = text.renderStyles.lineHeight\n      text._calcLine()\n      return text.layout\n    },\n\n    _getFont() {\n      const { fontSize, fontWeight, fontFamily } = text.renderStyles\n      return `${fontWeight} ${fontSize}px ${fontFamily}`\n    },\n\n    _calcLine() {\n      if (!text.parent || !text.children) return\n      const { width: textWidth, height: textHeight } = text.layout\n      let { contentWidth: parentContentWidth } =\n        text.parent.context.renderStyles\n      const { width: parentWidth } = text.parent.context.styles\n      if (!isAuto(text.styles.width))\n        parentContentWidth = text.renderStyles.width\n      // 如果一行宽度够，或者父级宽度是auto\n      if (\n        (isExact(parentContentWidth) && parentContentWidth >= textWidth) ||\n        parentWidth === STYLE_CONSTANT.WIDTH.AUTO\n      ) {\n        text.lines = [\n          {\n            text: text.children,\n            layout: text.layout\n          }\n        ]\n      } else {\n        text.lines = []\n        let lineIndex = 1\n        let lineText = ''\n        let layout = null\n        let lastLayout = null\n        for (let i = 0; i < text.children.length; i++) {\n          layout = text\n            .getRender()\n            .measureText(text, lineText + text.children[i])\n          if (layout && layout.width > parentContentWidth) {\n            if (lineIndex >= text.renderStyles.maxLine) {\n              // 最大行数限制 以及maxline省略号实现\n              lineText = lineText.substring(0, lineText.length - 2) + '...'\n              break\n            }\n            // 超出了\n            text.lines.push({\n              text: lineText,\n              layout: lastLayout || layout\n            })\n            lineText = ''\n            lineIndex += 1\n          }\n\n          lineText += text.children[i]\n\n          lastLayout = layout\n        }\n        text.layout.width = parentContentWidth\n        text.lines.push({\n          text: lineText,\n          layout: text.getRender().measureText(text, lineText)\n        })\n        // 根据lineheihgt更新height\n        text.layout.height = text.lines.length * text.renderStyles.lineHeight\n      }\n    }\n  }\n\n  return text\n}\n","import { CanvasElement } from './element'\n\ninterface ViewElement extends CanvasElement {\n  paint(): void\n}\n\nexport function createViewElement(element: CanvasElement): ViewElement {\n  return {\n    ...element,\n    paint() {\n      console.log('paint-----')\n      const renderer = this.getRenderer()\n      if (this.options.render) {\n        this.options.render(renderer.getCtx(), renderer.getCanvas(), this)\n      } else {\n        renderer._drawBackground(this)\n        renderer._drawBox(this)\n      }\n    }\n  }\n}\n","import { TreeNode } from '../Canvas/treeNode'\nimport { CanvasElement } from '../canvas/element'\nimport { TravedElementList } from '../canvas/layer'\nimport { isArray } from './general'\n\ntype Queue<T> = T[]\n\ntype TraversalFn = (node: TreeNode | CanvasElement) => TravedElementList\n\nexport const deepTraversal: TraversalFn = (node) => {\n  const nodes = <any>[]\n\n  if (node != null) {\n    const queue: Queue<TreeNode | CanvasElement> = []\n    let item\n    let children\n    queue.unshift(node)\n\n    while (queue.length != 0) {\n      item = queue.shift()\n      nodes.push(item)\n\n      children = item.children\n      if (isArray(children)) {\n        for (let i = children.length - 1; i >= 0; i--) queue.push(children[i])\n      }\n    }\n  }\n  return nodes\n}\n\nexport const wideTraversal: TraversalFn = (node) => {\n  const nodes = <any>[]\n\n  if (node != null) {\n    const queue: Queue<TreeNode | CanvasElement> = []\n    let item\n    let children\n\n    queue.unshift(node)\n\n    while (queue.length != 0) {\n      item = queue.shift()\n      nodes.push(item)\n\n      children = item.children\n      if (isArray(children)) {\n        for (let i = 0; i < children.length; i++) queue.push(children[i])\n      }\n    }\n  }\n\n  return nodes\n}\n","import { floor, getThrottle, isExact, isWX, walk } from '../utils'\nimport { CanvasElement, isCanvasElement } from './element'\nimport { Layer } from './layer'\nimport STYLE_CONSTANT from './styleConstant'\nimport { isEndNode } from './treeNode'\nimport { getImage } from './weapp-adapter'\n\nfunction getBorderRadius(element: CanvasElement) {\n  const { paddingWidth, paddingHeight } = element.renderStyles\n  let { borderRadius } = element.renderStyles\n  if (borderRadius * 2 > paddingWidth) {\n    // 如果大于一半，则角不是90度，统一限制最大为一半\n    borderRadius = paddingWidth / 2\n  }\n  if (borderRadius * 2 > paddingHeight) {\n    borderRadius = paddingHeight / 2\n  }\n  if (borderRadius < 0) borderRadius = 0\n  return floor(borderRadius)\n}\n\nexport interface CanvasRenderer {\n  layer: Layer\n  imageBus: Object\n  isAnimate: boolean\n  lastPaintTime: number\n  lastFrameComplete: boolean\n  throttle: (fn: number) => void\n\n  _restore(fn: any): void\n  _path(fn: any): void\n  _helpParentRestoreCtx(el: CanvasElement): void\n  _drawBox(el: CanvasElement): void\n  _drawBackground(el: CanvasElement): void\n  _clip(el: CanvasElement): void\n  _parseBackground(color: string, el: CanvasElement): void\n  _drawText(el: CanvasElement): void\n  _drawImage(el: CanvasElement): void\n  _drawScroll(el: CanvasElement): void\n  _animate(): void\n  isDebug(): boolean\n  getCtx(): CanvasRenderingContext2D\n  getLayer(): Layer\n  paint(el: CanvasElement): void\n  afterPaint(el: CanvasElement): void\n  topBorder(x, y, borderRadius, w, h): void\n  rightBorder(x, y, borderRadius, w, h): void\n  bottomBorder(x, y, borderRadius, w, h): void\n  leftBorder(x, y, borderRadius, w, h): void\n  measureText(\n    el: CanvasElement,\n    text: string\n  ): { width: number; fontHeight: number }\n  getImageInstance(src: string): string[]\n  render(node: CanvasElement): void\n  renderFPS(): void\n  readyToRender(el: CanvasElement): void\n  requestRepaint(el: CanvasElement): void\n  getCanvas(): HTMLCanvasElement\n  stopAnimate(): void\n  onEffectFinished(): Promise<any[]>\n}\n\nexport function createCanvasRenderer(layer: Layer): CanvasRenderer {\n  let renderer: CanvasRenderer = {\n    layer: layer,\n    imageBus: {},\n    isAnimate: false,\n    lastPaintTime: 0,\n    lastFrameComplete: false,\n    throttle: getThrottle(16),\n\n    _restore(callback) {\n      this.getCtx().save()\n      callback()\n      this.getCtx().restore()\n    },\n\n    _path(callback) {\n      this.getCtx().beginPath()\n      callback()\n      this.getCtx().closePath()\n    },\n\n    _helpParentRestoreCtx(element) {\n      if (\n        (element.isVisible() && !isEndNode(element)) ||\n        (!element.isVisible() && element.next)\n      )\n        return\n      this.getCtx().restore()\n      let cur = element.parent\n      while (cur && !cur.next) {\n        // 如果父级也是同级最后一个，再闭合上一个\n        this.getCtx().restore()\n        cur = cur.parent\n      }\n    },\n\n    _drawBox(element) {\n      element.renderStyles = {\n        borderColor: 'red',\n        borderWidth: 4,\n        borderLeftWidth: 4,\n        borderRightWidth: 4,\n        borderTopWidth: 4,\n        borderBottomWidth: 4,\n        paddingLeft: 0,\n        paddingRight: 0,\n        paddingTop: 0,\n        paddingBottom: 0,\n        contentWidth: 100,\n        contentHeight: 100\n      }\n      console.log('_drawBox-------', element, element.renderStyles)\n\n      if (\n        !(element.renderStyles.borderColor || element.renderStyles.shadowBlur)\n      )\n        return\n\n      console.log('_drawBox-------')\n      const {\n        contentWidth,\n        contentHeight,\n        paddingLeft,\n        paddingTop,\n        borderStyle,\n        paddingRight,\n        paddingBottom,\n        borderLeftWidth,\n        borderRightWidth,\n        borderTopWidth,\n        borderBottomWidth,\n        borderWidth\n      } = element.renderStyles\n\n      let borderRadius = getBorderRadius(element)\n\n      // 这里是计算画border的位置，起点位置是在线条中间，所以要考虑线条宽度\n      let x =\n        element.contentX -\n        element.renderStyles.paddingLeft -\n        borderLeftWidth / 2\n      let y =\n        element.contentY - element.renderStyles.paddingTop - borderTopWidth / 2\n      let w =\n        contentWidth +\n        paddingLeft +\n        paddingRight +\n        (borderLeftWidth + borderRightWidth) / 2\n      let h =\n        contentHeight +\n        paddingTop +\n        paddingBottom +\n        (borderTopWidth + borderBottomWidth) / 2\n\n      this.getCtx().lineCap = element.renderStyles.lineCap\n      this.getCtx().strokeStyle = element.renderStyles.borderColor\n      this.getCtx().lineJoin = 'round'\n\n      // 实现虚线\n      if (borderStyle && borderStyle !== 'solid') {\n        if (Array.isArray(borderStyle)) {\n          this.getCtx().setLineDash(borderStyle)\n        } else {\n          this.getCtx().setLineDash([5, 5])\n        }\n      }\n\n      const stroke = (borderWidth) => {\n        // 有样式则绘制出来\n        this.getCtx().lineWidth = borderWidth\n        this.getCtx().stroke()\n      }\n      this._restore(() => {\n        this._path(() => {\n          if (element.renderStyles.borderTopWidth) {\n            console.log(x, y)\n            this.topBorder({\n              x,\n              y,\n              borderRadius: borderRadius\n                ? borderRadius + element.renderStyles.borderTopWidth / 2\n                : 0,\n              w,\n              h\n            })\n            // 判断borderwidth 如果都是一样宽，只需要最后一次性绘制，提高性能\n            !borderWidth && stroke(element.renderStyles.borderTopWidth)\n          }\n          if (element.renderStyles.borderRightWidth) {\n            this.getCtx().moveTo(\n              x +\n                w -\n                borderRadius -\n                (borderRadius ? element.renderStyles.borderTopWidth / 2 : 0),\n              y\n            )\n            this.rightBorder({\n              x,\n              y,\n              borderRadius: borderRadius\n                ? borderRadius + element.renderStyles.borderRightWidth / 2\n                : 0,\n              w,\n              h\n            })\n            !borderWidth && stroke(element.renderStyles.borderRightWidth)\n          }\n          if (element.renderStyles.borderBottomWidth) {\n            this.getCtx().moveTo(\n              x + w,\n              y +\n                h -\n                borderRadius -\n                (borderRadius ? element.renderStyles.borderRightWidth / 2 : 0)\n            )\n            this.bottomBorder({\n              x,\n              y,\n              borderRadius: borderRadius\n                ? borderRadius + element.renderStyles.borderBottomWidth / 2\n                : 0,\n              w,\n              h\n            })\n            !borderWidth && stroke(element.renderStyles.borderBottomWidth)\n          }\n          if (element.renderStyles.borderLeftWidth) {\n            this.getCtx().moveTo(\n              x +\n                borderRadius +\n                (borderRadius ? element.renderStyles.borderBottomWidth / 2 : 0),\n              y + h\n            )\n            this.leftBorder({\n              x,\n              y,\n              borderRadius: borderRadius\n                ? borderRadius + element.renderStyles.borderLeftWidth / 2\n                : 0,\n              w,\n              h\n            })\n            stroke(element.renderStyles.borderLeftWidth)\n          }\n        })\n      })\n    },\n\n    _drawBackground(element) {\n      const {\n        backgroundColor,\n        contentWidth,\n        contentHeight,\n        shadowColor,\n        shadowBlur,\n        paddingLeft,\n        paddingRight,\n        paddingTop,\n        paddingBottom,\n        opacity,\n        shadowOffsetX,\n        shadowOffsetY,\n        borderLeftWidth,\n        borderRightWidth,\n        borderTopWidth,\n        borderBottomWidth\n      } = element.renderStyles\n      const ctx = this.getCtx()\n\n      let borderRadius = getBorderRadius(element)\n\n      // 这里是计算画border的位置，起点位置是在线条中间，所以要考虑线条宽度\n      let x =\n        element.contentX - element.renderStyles.paddingLeft - borderLeftWidth\n      let y =\n        element.contentY - element.renderStyles.paddingTop - borderTopWidth\n      let w =\n        contentWidth +\n        paddingLeft +\n        paddingRight +\n        (borderLeftWidth + borderRightWidth)\n      let h =\n        contentHeight +\n        paddingTop +\n        paddingBottom +\n        (borderTopWidth + borderBottomWidth)\n\n      if (isExact(opacity)) {\n        // 绘制透明图\n        ctx.globalAlpha = opacity\n      }\n\n      // 绘制boxshadow\n      // 需要在clip之前\n      if (shadowColor && shadowBlur) {\n        this._restore(() => {\n          this._path(() => {\n            this.topBorder({ x, y, borderRadius, w, h })\n            this.rightBorder({ x, y, borderRadius, w, h })\n            this.bottomBorder({ x, y, borderRadius, w, h })\n            this.leftBorder({ x, y, borderRadius, w, h })\n          })\n          if (isExact(shadowOffsetX)) {\n            this.getCtx().shadowOffsetX = shadowOffsetX\n          }\n          if (isExact(shadowOffsetY)) {\n            this.getCtx().shadowOffsetY = shadowOffsetY\n          }\n          this.getCtx().shadowBlur = shadowBlur\n          this.getCtx().shadowColor = shadowColor\n          this.getCtx().fillStyle = shadowColor\n          this.getCtx().fill()\n        })\n      }\n\n      this._clip(element)\n\n      // draw background\n      if (backgroundColor) {\n        this.getCtx().fillStyle = this._parseBackground(\n          backgroundColor,\n          element\n        )\n        this.getCtx().fillRect(\n          element.contentX - paddingLeft,\n          element.contentY - paddingTop,\n          contentWidth + paddingLeft + paddingRight,\n          contentHeight + paddingTop + paddingBottom\n        )\n      }\n\n      // for debug\n      if (this.isDebug()) {\n        this.getCtx().strokeStyle = element.debugColor || 'green'\n        this.getCtx().strokeRect(\n          element.contentX,\n          element.contentY,\n          element.renderStyles.contentWidth,\n          element.renderStyles.contentHeight\n        )\n        // ctx.strokeStyle = '#fff'\n        // ctx.strokeText(`${parseInt(this.contentX)} ${parseInt(this.contentY)} ${contentWidth} ${contentHeight}`, this.contentX + 100, this.contentY + 10)\n\n        //\n      }\n    },\n\n    _clip(element) {\n      if (element.renderStyles.overflow !== 'hidden') return\n      const {\n        contentWidth,\n        contentHeight,\n        paddingLeft,\n        paddingTop,\n        paddingRight,\n        paddingBottom,\n        borderLeftWidth,\n        borderRightWidth,\n        borderTopWidth,\n        borderBottomWidth\n      } = element.renderStyles\n\n      let borderRadius = getBorderRadius(element)\n\n      const borderBase = 0.7\n      // 为了把border也切进去\n      let x =\n        element.contentX -\n        element.renderStyles.paddingLeft -\n        borderLeftWidth * borderBase\n      let y =\n        element.contentY -\n        element.renderStyles.paddingTop -\n        borderTopWidth * borderBase\n      let w =\n        contentWidth +\n        paddingLeft +\n        paddingRight +\n        (borderLeftWidth + borderRightWidth) * borderBase\n      let h =\n        contentHeight +\n        paddingTop +\n        paddingBottom +\n        (borderTopWidth + borderBottomWidth) * borderBase\n\n      this._path(() => {\n        this.topBorder({ x, y, borderRadius, w, h })\n        this.rightBorder({ x, y, borderRadius, w, h })\n        this.bottomBorder({ x, y, borderRadius, w, h })\n        this.leftBorder({ x, y, borderRadius, w, h })\n      })\n\n      this.getCtx().clip()\n    },\n\n    _parseBackground(color, element) {\n      if (Array.isArray(color)) {\n        const gradient = this.getCtx().createLinearGradient(\n          element.contentX,\n          element.contentY,\n          element.contentX + element.renderStyles.contentWidth,\n          element.contentY + element.renderStyles.contentHeight\n        )\n        for (let i = 0; i < color.length; i++) {\n          if (i === 0) {\n            gradient.addColorStop(0, color[0])\n          } else {\n            gradient.addColorStop(i / (color.length - 1), color[i])\n          }\n        }\n        return gradient\n      } else {\n        return color\n      }\n    },\n\n    _drawText(element) {\n      const {\n        color,\n        contentWidth,\n        lineHeight,\n        textAlign,\n        textIndent,\n        textDecoration\n      } = element.renderStyles\n      let x = element.contentX\n      this.getCtx().fillStyle = color\n      this.getCtx().textAlign = textAlign\n      this.getCtx().font = element._getFont()\n      this.getCtx().textBaseline = 'middle'\n      if (textAlign === STYLE_CONSTANT.TEXT_ALIGN.RIGHT) {\n        x = element.contentX + contentWidth\n      } else if (textAlign === STYLE_CONSTANT.TEXT_ALIGN.CENTER) {\n        x = element.contentX + contentWidth / 2\n      }\n      let _x = x\n      let _y = 0\n      let line\n      for (let index = 0; index < element._lines.length; index++) {\n        line = element._lines[index]\n        if (index === 0 && textIndent) {\n          // 第一行实现textIndent\n          _x = x + textIndent\n        } else {\n          _x = x\n        }\n        _y = element.contentY + lineHeight / 2 + lineHeight * index + 0.5\n\n        this.getCtx().fillText(line.text, _x, _y)\n\n        if (isWX && element.renderStyles.fontWeight !== 400) {\n          // 小程序 字体加粗不生效\n          const offset = element.renderStyles.fontSize * 0.001\n          this.getCtx().fillText(line.text, _x - offset, _y)\n        }\n\n        // draw decoration\n        if (textDecoration) {\n          const decorationType = textDecoration[0]\n          _y += 1\n          this._restore(() => {\n            this._path(() => {\n              let decorationY = _y\n              if (decorationType === 'underline') {\n                decorationY = _y + element._layout.fontHeight / 2\n              } else if (decorationType === 'line-through') {\n                decorationY = _y\n              }\n              this.getCtx().moveTo(_x, decorationY)\n              this.getCtx().lineTo(_x + line.layout.width, decorationY)\n            })\n            this.getCtx().strokeStyle = color\n            this.getCtx().stroke()\n          })\n        }\n      }\n    },\n\n    _drawImage(element) {\n      if (!element._image) return\n      const { contentWidth, contentHeight } = element.renderStyles\n      const { mode } = element.options.attrs\n      const {\n        sx,\n        sy,\n        swidth,\n        sheight,\n        dx,\n        dy,\n        dwidth,\n        dheight,\n        width: imageW,\n        height: imageH\n      } = element._imageInfo\n      if (mode === 'aspectFill') {\n        this.getCtx().drawImage(\n          element._image,\n          sx,\n          sy,\n          swidth,\n          sheight,\n          element.contentX,\n          element.contentY,\n          contentWidth,\n          contentHeight\n        )\n      } else if (mode === 'aspectFit') {\n        this.getCtx().drawImage(\n          element._image,\n          0,\n          0,\n          imageW,\n          imageH,\n          dx,\n          dy,\n          dwidth,\n          dheight\n        )\n      } else {\n        this.getCtx().drawImage(\n          element._image,\n          element.contentX,\n          element.contentY,\n          contentWidth,\n          contentHeight\n        )\n      }\n    },\n\n    _drawScroll(element) {\n      this.getCtx().translate(element.currentScrollX, element.currentScrollY)\n    },\n\n    _animate() {\n      const now = Date.now()\n      this.render(this.element)\n      if (!this.isAnimate) return\n      window.requestAnimationFrame(() => this._animate(now))\n    },\n\n    isDebug() {\n      return this.getLayer().options && this.getLayer().options.debug\n    },\n\n    getCtx() {\n      return this.layer.ctx\n    },\n\n    getLayer() {\n      return this.layer\n    },\n\n    paint(element) {\n      console.log('renderer-paint-----------')\n      this.getCtx().save()\n\n      element.paint(this.lastPaintTime)\n\n      this.afterPaint(element)\n    },\n\n    afterPaint(element) {\n      // 这里通过this.ctx栈实现了overflow\n      // 第一步判断没有子元素，绘制完成即restore 有子元素需要子元素全部绘制完毕再restore\n      if (!element.hasChildren() || element.type === 'text') {\n        this.getCtx().restore()\n      }\n\n      // 如果到了层级的最后一个 释放父级的stack\n      this._helpParentRestoreCtx(element)\n    },\n\n    topBorder({ x, y, borderRadius, w, h }) {\n      // 左上角开始\n      this.getCtx().moveTo(x, y + borderRadius)\n      borderRadius &&\n        this.getCtx().arc(\n          x + borderRadius,\n          y + borderRadius,\n          borderRadius,\n          2 * angle,\n          3 * angle\n        )\n      this.getCtx().lineTo(x + w - borderRadius, y)\n    },\n\n    rightBorder({ x, y, borderRadius, w, h }) {\n      // 右上角\n      // this.getCtx().moveTo(x + w - borderRadius, y)\n      borderRadius &&\n        this.getCtx().arc(\n          x + w - borderRadius,\n          y + borderRadius,\n          borderRadius,\n          3 * angle,\n          4 * angle\n        )\n      this.getCtx().lineTo(x + w, y + h - borderRadius)\n    },\n\n    bottomBorder({ x, y, borderRadius, w, h }) {\n      // 右下角\n      // this.getCtx().moveTo(x + w, y + h - borderRadius)\n      borderRadius &&\n        this.getCtx().arc(\n          x + w - borderRadius,\n          y + h - borderRadius,\n          borderRadius,\n          0,\n          angle\n        )\n      this.getCtx().lineTo(x + borderRadius, y + h)\n    },\n\n    leftBorder({ x, y, borderRadius, w, h }) {\n      // 左下角\n      borderRadius &&\n        this.getCtx().arc(\n          x + borderRadius,\n          y + h - borderRadius,\n          borderRadius,\n          angle,\n          angle * 2\n        )\n      this.getCtx().lineTo(x, y + borderRadius)\n    },\n\n    /**\n     * @param {String} text\n     * @return {Object<width,height>}\n     */\n    measureText(element, text) {\n      let w = 0\n      let h = 0\n      this._restore(() => {\n        this.getCtx().font = element._getFont()\n        const { width, actualBoundingBoxAscent } =\n          this.getCtx().measureText(text)\n        w = width\n        h = actualBoundingBoxAscent || element.renderStyles.fontSize * 0.7\n      })\n      return {\n        width: w,\n        fontHeight: h + 1\n      }\n    },\n\n    /**\n     * 这里应该保证onload src等接口\n     */\n    getImageInstance(src) {\n      let image = null\n\n      // 同样的路径返回缓存\n      if (this.imageBus[src]) {\n        image = this.imageBus[src]\n      } else {\n        if (isWX) {\n          if (this.getCanvas()) {\n            image = this.getCanvas().createImage()\n          } else {\n            console.warn('小程序请使用设置canvas参数以创建图片')\n            image = getImage(src)\n          }\n        } else {\n          image = new Image()\n          image.crossOrigin = 'anonymous'\n        }\n\n        if (src) {\n          this.imageBus[src] = new Promise((resolve, reject) => {\n            image.onload = (e) => {\n              resolve({\n                image: isWX && !this.getCanvas() ? e.image : image,\n                info: {\n                  width: isWX ? image.width : e.target.width,\n                  height: isWX ? image.height : e.target.height\n                }\n              })\n            }\n            image.onerror = (err) => {\n              reject(err)\n            }\n          })\n        }\n\n        image.src = src\n      }\n      return this.imageBus[src]\n    },\n\n    render(node) {\n      this.lastFrameComplete = false\n      this.lastPaintTime = Date.now()\n      console.log('render----------', node, this.getCtx(), this.getLayer())\n      if (!node.parent) {\n        // root\n        this.getCtx().clearRect(\n          0,\n          0,\n          this.getLayer().options.width,\n          this.getLayer().options.height\n        )\n      } else {\n        this.getCtx().clearRect(\n          node.x,\n          node.y,\n          node.renderStyles.width,\n          node.renderStyles.height\n        )\n      }\n      let element = null\n      walk(node, (renderNode, callContinue, callNext) => {\n        console.log('walk-------------', renderNode)\n        if (isCanvasElement(renderNode)) {\n          if (renderNode.isVisible && renderNode.isVisible()) {\n            // 可见的才渲染\n            this.paint(renderNode)\n          } else {\n            // 跳过整个子节点\n            callNext()\n            this._helpParentRestoreCtx(renderNode)\n          }\n        }\n      })\n      if (isWX) {\n        // 兼容小程序\n        this.getCtx().draw && this.getCtx().draw()\n      }\n\n      this.lastFrameComplete = true\n    },\n\n    renderFPS() {},\n\n    readyToRender(element) {\n      console.log('_readyToRender')\n      // this.element = generateRenderTree(element)\n      this.element = element\n\n      const options = this.getLayer().options\n\n      this.lastPaintTime = Date.now()\n\n      if (options && options.animate) {\n        this.animate()\n      } else {\n        this.render(element)\n      }\n    },\n\n    requestRepaint(element) {\n      if (this.isAnimate) return\n      // 如果已经有frame在排队等待了 忽略\n      // if(!this.lastFrameComplete) return\n      // let nextFrameTime = Date.now() - this.lastPaintTime\n      // if(nextFrameTime < 16){\n      //   setTimeout(() => this.render(this.element),nextFrameTime)\n      // }else{\n      this.render(this.element)\n      // }\n    },\n\n    // could be null\n    getCanvas() {\n      const options = this.getLayer().options\n      return (options && options.canvas) || null\n    },\n\n    stopAnimate() {\n      this.isAnimate = false\n    },\n\n    // 所有副作用完成\n    // 图片加载异步请求\n    onEffectFinished() {\n      const list = Object.keys(this.imageBus).map((key) => {\n        return this.imageBus[key]\n      })\n      return Promise.all(list)\n    }\n  }\n\n  return renderer\n}\n","export function getThrottle(threshold: number) {\n  let timer\n  return function (fn) {\n    if (!timer) {\n      timer = setTimeout(function () {\n        fn()\n        timer = null\n      }, threshold)\n    }\n  }\n}\n","// 只支持小程序最新的支持同层渲染的canvas api,\n// 不用了\nexport function getImage(url) {\n  const instance = { onload: () => {} }\n  new Promise((resolve, reject) => {\n    wx.downloadFile({\n      url: url,\n      success(res) {\n        wx.getImageInfo({\n          src: res.tempFilePath,\n          success(res1) {\n            resolve({\n              target: {\n                width: res1.width,\n                height: res1.height\n              },\n              image: res.tempFilePath\n            })\n          }\n        })\n      },\n      fail(err) {\n        reject(err)\n      }\n    })\n  })\n    .then((res) => {\n      instance.onload(res)\n    })\n    .catch((err) => {})\n  return instance\n}\n","import { createAppAPI } from './createApp'\nimport { createRenderer } from './renderer'\nimport { createNodeOps } from './nodeOps'\nimport { h } from './h'\nimport { createLayer } from './canvas'\n\nconst XCanvas = {\n  createNodeOps,\n  createRenderer,\n  h,\n  createLayer\n}\n\nexport default XCanvas\n","import { ElementTypes } from './canvas/element'\nimport { RendererOptions } from './renderer'\n\nexport function createNodeOps(createElement): RendererOptions {\n  return {\n    insert: (child, parent, anchor) => {\n      console.log('insert-------------', child, parent, anchor)\n      if (!child) {\n        return\n      }\n\n      parent.appendChild(child)\n    },\n\n    remove: (child) => {\n      console.log('remove-------------', child)\n    },\n\n    createElement: (tag, props) => {\n      console.log('createElement------------', tag, props)\n\n      props = props || {}\n      const { style } = props\n\n      switch (tag) {\n        default:\n          return createElement(ElementTypes.view, { style })\n      }\n    },\n\n    createText: (text) => {\n      // console.log('createText', text)\n      return createElement(ElementTypes.text, {}, text)\n    },\n\n    createComment: (text) => {},\n\n    setText: (node, text) => {},\n\n    setElementText: (el, text) => {},\n\n    parentNode: (node) => node.parentNode as Element | null,\n\n    nextSibling: (node) => node.nextSibling\n\n    //   querySelector: (selector) => {},\n  }\n}\n","import {\n  VNode,\n  VNodeProps,\n  VNodeArrayChildren,\n  isSameVNodeType,\n  normalizeVNode\n} from './vnode'\nimport { createAppAPI } from './createApp'\nimport { ComponentInternalInstance, Data } from './components'\nimport { flushPreFlushCbs, flushPostFlushCbs } from './scheduler'\nimport { EMPTY_OBJ, EMPTY_ARR, PatchFlags, ShapeFlags } from './utils'\n\nexport type RootRenderFunction<HostElement = RendererElement> = (\n  vnode: VNode | null,\n  container: HostElement,\n  isSVG?: boolean\n) => void\n\ntype MountChildrenFn = (\n  children: VNodeArrayChildren,\n  container: RendererElement,\n  anchor: RendererNode | null,\n  parentComponent: ComponentInternalInstance | null,\n  start?: number\n) => void\n\ntype NextFn = (vnode: VNode) => RendererNode | null\n\ntype RemoveFn = (vnode: VNode) => void\n\ntype UnmountChildrenFn = (\n  children: VNode[],\n  parentComponent: ComponentInternalInstance | null,\n  // parentSuspense: SuspenseBoundary | null,\n  doRemove?: boolean,\n  optimized?: boolean,\n  start?: number\n) => void\n\ntype ProcessTextOrCommentFn = (\n  n1: VNode | null,\n  n2: VNode,\n  container: RendererElement,\n  anchor: RendererNode | null\n) => void\n\nexport interface RendererOptions<\n  HostNode = RendererNode,\n  HostElement = RendererElement\n> {\n  patchProp(\n    el: HostElement,\n    key: string,\n    prevValue: any,\n    nextValue: any,\n    prevChildren?: VNode<HostNode, HostElement>[],\n    parentComponent?: ComponentInternalInstance | null,\n    unmountChildren?: UnmountChildrenFn\n  ): void\n  insert(el: HostNode, parent: HostElement, anchor?: HostNode | null): void\n  remove(el: HostNode): void\n  createElement(\n    type: string,\n    vnodeProps?: (VNodeProps & { [key: string]: any }) | null\n  ): HostElement\n  createText(text: string): HostNode\n  createComment(text: string): HostNode\n  setText(node: HostNode, text: string): void\n  setElementText(node: HostElement, text: string): void\n  parentNode(node: HostNode): HostElement | null\n  nextSibling(node: HostNode): HostNode | null\n  // querySelector?(selector: string): HostElement | null\n}\n\nexport interface RendererNode {\n  [key: string]: any\n}\n\nexport interface RendererElement extends RendererNode {}\n\ntype PatchFn = (\n  n1: VNode | null, // null means this is a mount\n  n2: VNode,\n  container: RendererElement,\n  anchor?: RendererNode | null,\n  parentComponent?: ComponentInternalInstance | null\n) => void\n\ntype PatchChildrenFn = (\n  n1: VNode | null,\n  n2: VNode,\n  container: RendererElement,\n  anchor: RendererNode | null,\n  parentComponent: ComponentInternalInstance | null\n) => void\n\ntype UnmountFn = (\n  vnode: VNode,\n  parentComponent: ComponentInternalInstance | null,\n  doRemove?: boolean,\n  optimized?: boolean\n) => void\n\nexport function createRenderer(options: RendererOptions): any {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling\n  } = options\n\n  const patch: PatchFn = (\n    n1,\n    n2,\n    container,\n    anchor = null,\n    parentComponent = null\n  ) => {\n    // console.log('patch', n1, n2, container)\n    if (n1 === n2) {\n      return\n    }\n\n    // patching & not same type, unmount old tree\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      anchor = getNextHostNode(n1)\n      unmount(n1, parentComponent, true)\n      n1 = null\n    }\n\n    const { type } = n2\n    switch (type) {\n      case 'Text':\n        processText(n1, n2, container, anchor)\n        break\n      // case 'Comment':\n      //   processCommentNode(n1, n2, container, anchor)\n      //   break\n      default:\n        processElement(n1, n2, container, anchor, parentComponent)\n    }\n  }\n\n  const processText: ProcessTextOrCommentFn = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(hostCreateText(n2.children as string), container, anchor)\n    } else {\n      if (n2.children !== n1.children) {\n        hostSetText(n2, n2.children as string)\n      }\n    }\n  }\n\n  const processElement = (\n    n1: VNode | null,\n    n2: VNode,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    if (n1 == null) {\n      mountElement(n2, container, anchor, parentComponent)\n    } else {\n      patchElement(n1, n2, parentComponent)\n    }\n  }\n\n  const mountElement = (\n    vnode: VNode,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    let el: RendererElement\n    const { type, props } = vnode\n    // console.log('mountElement', vnode, container, anchor, parentComponent)\n\n    el = vnode.el = hostCreateElement(vnode.type as string, props)\n\n    // mount children first, since some props may rely on child content\n    // being already rendered, e.g. `<select value>`\n\n    mountChildren(\n      vnode.children as VNodeArrayChildren,\n      el,\n      null,\n      parentComponent\n    )\n\n    // props\n    if (props) {\n      // for (const key in props) {\n      //   if (key !== 'value' && !isReservedProp(key)) {\n      //     hostPatchProp(\n      //       el,\n      //       key,\n      //       null,\n      //       props[key],\n      //       isSVG,\n      //       vnode.children as VNode[],\n      //       parentComponent,\n      //       parentSuspense,\n      //       unmountChildren\n      //     )\n      //   }\n      // }\n\n      if ('value' in props) {\n        // hostPatchProp(el, 'value', null, props.value)\n      }\n    }\n\n    hostInsert(el, container, anchor)\n  }\n\n  const mountChildren: MountChildrenFn = (\n    children,\n    container,\n    anchor,\n    parentComponent,\n    start = 0\n  ) => {\n    // console.log('mountChildren', children, container, anchor, parentComponent)\n    if (typeof children === 'string') {\n      patch(null, normalizeVNode(children), container, anchor, parentComponent)\n    } else {\n      for (let i = start; i < children.length; i++) {\n        const child = normalizeVNode(children[i])\n        patch(null, child, container, anchor, parentComponent)\n      }\n    }\n  }\n\n  const patchElement = (\n    n1: VNode,\n    n2: VNode,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    const el = (n2.el = n1.el!)\n\n    const oldProps = n1.props || EMPTY_OBJ\n    const newProps = n2.props || EMPTY_OBJ\n\n    patchChildren(n1, n2, el, null, parentComponent)\n\n    // text\n    if (n1.children !== n2.children) {\n      hostSetElementText(el, n2.children as string)\n    }\n\n    patchProps(el, n2, oldProps, newProps, parentComponent)\n  }\n\n  const patchChildren: PatchChildrenFn = (\n    n1,\n    n2,\n    container,\n    anchor,\n    parentComponent\n  ) => {\n    const c1 = n1 && n1.children\n    const c2 = n2.children\n\n    patchUnkeyedChildren(\n      c1 as VNode[],\n      c2 as VNodeArrayChildren,\n      container,\n      anchor,\n      parentComponent\n    )\n  }\n\n  const patchUnkeyedChildren = (\n    c1: VNode[],\n    c2: VNodeArrayChildren,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    c1 = c1 || EMPTY_ARR\n    c2 = c2 || EMPTY_ARR\n    const oldLength = c1.length\n    const newLength = c2.length\n    const commonLength = Math.min(oldLength, newLength)\n    let i\n    for (i = 0; i < commonLength; i++) {\n      const nextChild = normalizeVNode(c2[i])\n      patch(c1[i], nextChild, container, null, parentComponent)\n    }\n    if (oldLength > newLength) {\n      // remove old\n      unmountChildren(c1, parentComponent, true, false, commonLength)\n    } else {\n      // mount new\n      mountChildren(c2, container, anchor, parentComponent, commonLength)\n    }\n  }\n\n  const patchProps = (\n    el: RendererElement,\n    vnode: VNode,\n    oldProps: Data,\n    newProps: Data,\n    parentComponent: ComponentInternalInstance | null\n  ) => {\n    if (oldProps !== newProps) {\n      if (oldProps !== EMPTY_OBJ) {\n        for (const key in oldProps) {\n          hostPatchProp(\n            el,\n            key,\n            oldProps[key],\n            null,\n            vnode.children as VNode[],\n            parentComponent,\n            unmountChildren\n          )\n        }\n      }\n      for (const key in newProps) {\n        const next = newProps[key]\n        const prev = oldProps[key]\n        // defer patching value\n        if (next !== prev && key !== 'value') {\n          hostPatchProp(\n            el,\n            key,\n            prev,\n            next,\n            vnode.children as VNode[],\n            parentComponent,\n            unmountChildren\n          )\n        }\n      }\n      if ('value' in newProps) {\n        hostPatchProp(el, 'value', oldProps.value, newProps.value)\n      }\n    }\n  }\n\n  const unmount: UnmountFn = (\n    vnode,\n    parentComponent,\n    doRemove = false,\n    optimized = false\n  ) => {\n    const { type, props, children } = vnode\n\n    unmountChildren(children as VNode[], parentComponent)\n\n    if (doRemove) {\n      remove(vnode)\n    }\n  }\n\n  const remove: RemoveFn = (vnode) => {\n    const performRemove = () => {\n      hostRemove(vnode)\n    }\n\n    performRemove()\n  }\n\n  const unmountChildren: UnmountChildrenFn = (\n    children,\n    parentComponent,\n    doRemove = false,\n    optimized = false,\n    start = 0\n  ) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, doRemove)\n    }\n  }\n\n  const getNextHostNode: NextFn = (vnode) => {\n    return hostNextSibling(vnode!)\n  }\n\n  const render: RootRenderFunction = (vnode, container) => {\n    // console.log('render:', vnode, container, container._vnode)\n\n    if (vnode == null) {\n      if (container._vnode) {\n        unmount(container._vnode, null, true)\n      }\n    } else {\n      patch(container._vnode || null, vnode, container, null, null)\n    }\n    flushPreFlushCbs()\n    flushPostFlushCbs()\n    container._vnode = vnode\n  }\n\n  return {\n    render,\n    createApp: createAppAPI(render)\n  }\n}\n","import { VNode, createVNode, VNodeArrayChildren, isVNode } from './vnode'\nimport { isObject, isArray } from './utils'\n\nexport function h(type: any, propsOrChildren?: any, children?: any): VNode {\n  const l = arguments.length\n  console.log('h', l, type, propsOrChildren, children)\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      // single vnode without props\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren])\n      }\n      // props without children\n      return createVNode(type, propsOrChildren)\n    } else {\n      // omit props\n      return createVNode(type, null, propsOrChildren)\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2)\n    } else if (l === 3 && isVNode(children)) {\n      children = [children]\n    }\n    return createVNode(type, propsOrChildren, children)\n  }\n}\n","import { TreeNode, connectChildren } from './treeNode'\nimport { CanvasElement, ElementTypes, createElementAPI } from './element'\nimport { wideTraversal, deepTraversal } from '../utils/traversal'\nimport { CanvasRenderer, createCanvasRenderer } from './renderer'\nimport { isWX, walkParent } from '../utils'\n\nexport type TravedElementList = Array<CanvasElement>\n\ntype LayerOptions = {\n  renderStyles: any\n}\n\nexport interface Layer {\n  ctx: CanvasRenderingContext2D\n  node: CanvasElement | null\n  p2cList: TravedElementList\n  c2pList: TravedElementList\n  nodeList: TreeNode[]\n  options: LayerOptions\n  renderer: CanvasRenderer | null\n  _initRender(): void\n  _initC2PList(): void\n  _initP2CList(): void\n  _flow(): void\n  _reflow(): void\n  _initPaintList(): void\n  _reflowElement(el: CanvasElement): void\n  _callBeforePaint(): void\n  _repaint(): void\n  init(): void\n  update(ctx: CanvasRenderingContext2D, options: LayerOptions): void\n  onElementRemove(el: CanvasElement): void\n  onElementAdd(el: CanvasElement): void\n  onElementChange(el: CanvasElement): void\n  animate(): void\n  getElementBy(): CanvasElement\n  lifecycle(name: string, arg: any): void\n}\n\nexport function createLayer(ctx, options) {\n  const layer: Layer = {\n    ctx,\n    node: null,\n    p2cList: [] as CanvasElement[],\n    c2pList: [] as CanvasElement[],\n    nodeList: [],\n    options: options,\n    renderer: null,\n\n    _initRender() {\n      // for 打印耗时\n      const startTime = Date.now()\n\n      connectChildren(layer.node)\n      layer._initC2PList()\n      layer._initP2CList()\n      console.log('initRender', layer.c2pList, layer.p2cList)\n\n      layer._flow()\n\n      // flow 完成后监听effect完成\n      layer.renderer\n        .onEffectFinished()\n        .then((res) => layer.lifecycle('onEffectSuccess', res))\n        .catch((res) => layer.lifecycle('onEffectFail', res))\n      // .finally((res) => layer.lifecycle('onEffectFinished', res))\n\n      layer._repaint()\n\n      console.log(\n        `渲染${layer.p2cList.length}个元素 耗时 ${Date.now() - startTime} ms`\n      )\n    },\n\n    _initP2CList() {\n      if (layer.node) layer.p2cList = wideTraversal(layer.node)\n    },\n\n    _initC2PList() {\n      if (layer.node) layer.c2pList = deepTraversal(layer.node)\n    },\n\n    _flow() {\n      for (let i = 0; i < layer.p2cList.length; i++) {\n        layer.p2cList[i].init()\n      }\n\n      layer._reflow()\n    },\n\n    _reflow() {},\n\n    _initPaintList() {},\n\n    _reflowElement(element) {\n      // 如果有line，则需要重第一个开始\n      let target: any = element\n      while (target && target.line) {\n        target = target.parent\n      }\n      const p2cList = wideTraversal(target)\n      for (let i = 0; i < p2cList.length; i++) {\n        p2cList[i]._initStyles()\n      }\n\n      // 所有子元素\n      const children = deepTraversal(target)\n      for (let i = 0; i < children.length; i++) {\n        children[i]._initWidthHeight()\n      }\n\n      if (!element.isInFlow()) {\n        for (let i = 0; i < p2cList.length; i++) {\n          p2cList[i]._initPosition()\n        }\n        this._repaint()\n      } else {\n        this.onElementChange(target)\n      }\n    },\n\n    _callBeforePaint() {\n      for (let i = 0; i < layer.p2cList.length; i++) {\n        layer.p2cList[i].beforePaint && layer.p2cList[i].beforePaint()\n      }\n    },\n\n    /**\n     * 可以给定element，则只会重绘element所在的区域\n     * @param {Element} element\n     */\n    _repaint(element = layer.node) {\n      console.log('_repaint---------------')\n      if (isWX) {\n        // 微信环境下始终重绘整个树\n        element = layer.node\n      }\n      if (element && !element.isInFlow()) element = layer.node\n\n      layer._callBeforePaint()\n\n      if (layer.node && layer.renderer) {\n        layer.renderer.readyToRender(layer.node)\n      } else {\n        throw Error('repaint need node in layer')\n      }\n    },\n\n    update(ctx, options) {\n      layer.ctx = ctx\n      layer.options = options\n      layer.options.renderStyles = options\n      // if (layer.node) {\n      //   layer.node.container = layer.options\n      // }\n    },\n\n    init() {\n      layer.renderer = createCanvasRenderer(layer)\n      layer._initRender()\n    },\n\n    onElementRemove() {},\n\n    onElementAdd(el) {\n      layer._initC2PList()\n      layer._initP2CList()\n      console.log('onElementAdd', layer.p2cList)\n\n      layer.p2cList.forEach((item) => {\n        item.init()\n      })\n\n      layer._reflowElement(el)\n    },\n\n    // 元素变化后调用，尽可能少重排重绘\n    onElementChange(element) {\n      console.log('onElementChange-------')\n      walkParent(element, (parent, callbreak) => {\n        parent._initWidthHeight()\n        if (parent.type === 'scroll-view') callbreak()\n      })\n\n      for (let i = 0; i < layer.p2cList.length; i++) {\n        layer.p2cList[i]._initPosition()\n      }\n      layer._repaint()\n    },\n\n    animate() {\n      console.warn('use [animate] option instead!')\n    },\n\n    getElementBy() {\n      return layer.node.getElementBy(...arguments)\n    },\n\n    lifecycle(name, arg) {\n      if (layer.options.lifecycle) {\n        layer.options.lifecycle[name] && layer.options.lifecycle[name](arg)\n      }\n    }\n  }\n\n  const createCanvasElement = createElementAPI(layer)\n  const createRootCanvasElement = () =>\n    createCanvasElement(ElementTypes.root, {}, [])\n\n  layer.node = createRootCanvasElement()\n  console.info('init-layer------------------------', layer)\n  layer.node.layer = layer\n  layer.node.root = layer.node\n\n  layer.init()\n\n  return {\n    layer,\n    createCanvasElement,\n    createRootCanvasElement\n  }\n}\n"],"names":["isFunction","val","EMPTY_OBJ","Object","freeze","EMPTY_ARR","onRE","isOn","key","test","isExact","num","isAuto","isOuter","match","parseOuter","_n","parseInt","replace","isNaN","isArray","Array","isString","isObject","floor","walkParent","element","callback","cur","stop","callbreak","parent","isWX","Boolean","wx","getSystemInfoSync","err","normalizeStyle","value","res","i","length","item","normalized","cssText","ret","styleCommentRE","split","listDelimiterRE","forEach","tmp","propertyDelimiterRE","trim","normalizeClass","name_1","Fragment","Symbol","for","Comment","isVNode","__v_isVNode","createVNode","type","props","children","klass","style","console","log","cloned","cloneVNode","vnode","createTextVNode","class","__v_skip","component","el","staticCount","appContext","ctx","extraProps","mergedProps","args","_i","arguments","existing","incoming","toMerge","includes","concat","map","deepCloneVNode","text","normalizeVNode","child","slice","String","uid","__assign","assign","t","s","n","p","prototype","hasOwnProperty","call","apply","this","queue","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","RECURSION_LIMIT","flushPostFlushCbs","seen","deduped","to","from","pack","ar","l","Set","push","Map","sort","a","b","getId","checkRecursiveUpdates","job","id","Infinity","fn","has","count","get","set","DISPLAY","BLOCK","INLINE_BLOCK","INLINE","FLEX","NONE","WIDTH","AUTO","OUTER","FLEX_DIRECTION","ROW","COLUMN","STYLE_CONSTANT","POSITION","ABSOLUTE","FIXED","RELATIVE","STATIC","TEXT_ALIGN","LEFT","RIGHT","CENTER","DEFAULT_STYLES","display","fontSize","fontWeight","fontFamily","color","paddingTop","paddingBottom","paddingLeft","paddingRight","marginTop","marginBottom","marginLeft","marginRight","height","borderRadius","borderColor","lineCap","flexDirection","verticalAlign","textAlign","justifyContent","alignItems","alignSelf","whiteSpace","zIndex","visible","position","isTreeNode","__v_isTreeNode","completeStyles","styles","CONSTANT","flex","width","isInFlow","borderWidth","_a","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth","overflow","lineHeight","padding","margin","contentWidth","x","y","contentX","contentHeight","ElementTypes","KEY","createElementAPI","layer","options","treeNode","_children","root","prev","next","_setParent","node","_setSibling","hasChildren","appendChild","Error","prependChild","removeChild","append","prepend","remove","__v_isElement","renderStyles","debugColor","contentY","left","top","container","_initStyles","_getDefaultStyles","_getParentStyles","_completeStyles","_initRenderStyles","relativeTo","parentWidth","getContainerLayout","parentHeight","paddingWidth","paddingHeight","_getTotalBorderWidth","_getTotalBorderHeight","_InFlexBox","_bindFlexBox","curStyles","extendStyles","_b","_getChildren","_getChildrenInFlow","filter","_reflow","_initWidthHeight","layout","_measureLayout","_refreshLayoutWithContent","line","refreshWidthHeight","_bindLine","_initPosition","contentX_1","top_1","bottom","right","refreshElementPosition","getPrevLayout","_c","_refreshContentWithLayout","canIEnter","add","doorClosed","outerWidth","elements","start","end","offsetX","_initHeight","context","_initLayout","_getPrevLine","_getOffsetY","_refreshWidthHeight","_closeLine","_refreshXAlign","prevLayout","prevLine","bindElement","addElement","pre","exactValue","flexTotal","_super","closeLine","calcFlex","getPreLine","_refreshElementPosition","initLayout","getOffsetY","_calcFlex","_this","containerWidth","initHeight","init","onElementAdd","isVisible","getLayer","getRenderer","renderer","paint","lastPaintTime","render","getCtx","getCanvas","_drawBackground","_drawBox","lines","_paint","getRender","_drawText","measureText","_calcLine","_getFont","textWidth","parentContentWidth","lineIndex","lineText","lastLayout","maxLine","substring","deepTraversal","nodes","unshift","shift","wideTraversal","getBorderRadius","createCanvasRenderer","threshold","timer","imageBus","isAnimate","lastFrameComplete","throttle","setTimeout","_restore","save","restore","_path","beginPath","closePath","_helpParentRestoreCtx","borderStyle","w","h","stroke","shadowBlur","strokeStyle","lineJoin","setLineDash","lineWidth","topBorder","moveTo","rightBorder","bottomBorder","leftBorder","backgroundColor","shadowColor","opacity","shadowOffsetX","shadowOffsetY","globalAlpha","fillStyle","fill","_clip","_parseBackground","fillRect","isDebug","strokeRect","clip","gradient","createLinearGradient","addColorStop","textIndent","textDecoration","_x","font","textBaseline","_y","index","_lines","decorationType_1","this_1","fillText","offset","decorationY","_layout","fontHeight","lineTo","_drawImage","mode","sx","sy","swidth","sheight","dx","dy","dwidth","dheight","imageW","imageH","_image","attrs","_imageInfo","drawImage","_drawScroll","translate","currentScrollX","currentScrollY","_animate","now","Date","window","requestAnimationFrame","debug","afterPaint","arc","angle","actualBoundingBoxAscent","getImageInstance","src","url","instance","image","createImage","warn","onload","Promise","resolve","reject","downloadFile","success","getImageInfo","tempFilePath","res1","target","fail","then","catch","Image","crossOrigin","e","info","onerror","clearRect","renderNode","callContinue","callNext","_callContinue","_continue","_callNext","_next","stack","pop","draw","renderFPS","readyToRender","animate","requestRepaint","canvas","stopAnimate","onEffectFinished","list","keys","all","createNodeOps","createElement","insert","anchor","tag","view","createText","createComment","setText","setElementText","parentNode","nextSibling","createRenderer","_vnode","unmount","patch","flushPreFlushCbs","cb","splice","hostInsert","hostRemove","hostPatchProp","patchProp","hostCreateElement","hostCreateText","hostSetText","hostSetElementText","hostNextSibling","n1","n2","parentComponent","getNextHostNode","processText","processElement","mountChildren","oldProps","newProps","patchChildren","patchProps","c1","c2","oldLength","newLength","commonLength","Math","min","nextChild","unmountChildren","doRemove","optimized","createApp","rootComponent","rootProps","app","_uid","_component","_props","_container","_instance","mount","rootContainer","propsOrChildren","createLayer","createRootCanvasElement","createCanvasElement","p2cList","c2pList","nodeList","_initRender","startTime","connectChildren","_initC2PList","_initP2CList","_flow","lifecycle","_repaint","_initPaintList","_reflowElement","onElementChange","_callBeforePaint","beforePaint","update","onElementRemove","getElementBy","name","arg"],"mappings":"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","x_google_ignoreList":[6]}